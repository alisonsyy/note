<!DOCTYPE html><html><head>
      <title>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\alison\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.6.0\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%A6%82%E8%BF%B0">1&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x6982;&#x8FF0;</h1>

<h2 class="mume-header" id="11-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF">1.1 &#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x4EA7;&#x751F;&#x80CC;&#x666F;</h2>

<p>&quot;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&quot;&#x6700;&#x521D;&#x5E76;&#x4E0D;&#x662F;&#x51FA;&#x73B0;&#x5728;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x88AB;&#x7528;&#x4E8E;&#x5EFA;&#x7B51;&#x9886;&#x57DF;&#x7684;&#x8BBE;&#x8BA1;&#x4E2D;&#x3002;</p>
<p>1977&#x5E74;&#x7F8E;&#x56FD;&#x8457;&#x540D;&#x5EFA;&#x7B51;&#x5927;&#x5E08;&#x3001;&#x52A0;&#x5229;&#x798F;&#x5C3C;&#x4E9A;&#x5927;&#x5B66;&#x4F2F;&#x514B;&#x5229;&#x5206;&#x6821;&#x73AF;&#x5883;&#x7ED3;&#x6784;&#x4E2D;&#x5FC3;&#x4E3B;&#x4EFB;<code>&#x514B;&#x91CC;&#x65AF;&#x6258;&#x592B;&#xB7;&#x4E9A;&#x5386;&#x5C71;&#x5927;&#xFF08;Christopher Alexander&#xFF09;</code>&#x5728;&#x4ED6;&#x7684;&#x8457;&#x4F5C;&#x300A;&#x5EFA;&#x7B51;&#x6A21;&#x5F0F;&#x8BED;&#x8A00;&#xFF1A;&#x57CE;&#x9547;&#x3001;&#x5EFA;&#x7B51;&#x3001;&#x6784;&#x9020;&#x300B;&#x4E2D;&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x5EFA;&#x7B51;&#x8BBE;&#x8BA1;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x63D0;&#x51FA;&#x4E86; 253 &#x79CD;&#x5173;&#x4E8E;&#x5BF9;&#x57CE;&#x9547;&#x3001;&#x90BB;&#x91CC;&#x3001;&#x4F4F;&#x5B85;&#x3001;&#x82B1;&#x56ED;&#x548C;&#x623F;&#x95F4;&#x7B49;&#x8FDB;&#x884C;&#x8BBE;&#x8BA1;&#x7684;&#x57FA;&#x672C;&#x6A21;&#x5F0F;&#x3002;</p>
<p>1990&#x5E74;&#x8F6F;&#x4EF6;&#x5DE5;&#x7A0B;&#x754C;&#x5F00;&#x59CB;&#x7814;&#x8BA8;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x8BDD;&#x9898;&#xFF0C;&#x540E;&#x6765;&#x53EC;&#x5F00;&#x4E86;&#x591A;&#x6B21;&#x5173;&#x4E8E;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x7814;&#x8BA8;&#x4F1A;&#x3002;&#x76F4;&#x5230;1995 &#x5E74;&#xFF0C;&#x827E;&#x745E;&#x514B;&#xB7;&#x4F3D;&#x9A6C;&#xFF08;ErichGamma&#xFF09;&#x3001;&#x7406;&#x67FB;&#x5FB7;&#xB7;&#x6D77;&#x5C14;&#x59C6;&#xFF08;Richard Helm&#xFF09;&#x3001;&#x62C9;&#x5C14;&#x592B;&#xB7;&#x7EA6;&#x7FF0;&#x68EE;&#xFF08;Ralph Johnson&#xFF09;&#x3001;&#x7EA6;&#x7FF0;&#xB7;&#x5A01;&#x5229;&#x65AF;&#x8FEA;&#x65AF;&#xFF08;John Vlissides&#xFF09;&#x7B49; 4 &#x4F4D;&#x4F5C;&#x8005;&#x5408;&#x4F5C;&#x51FA;&#x7248;&#x4E86;&#x300A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF1A;&#x53EF;&#x590D;&#x7528;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8F6F;&#x4EF6;&#x7684;&#x57FA;&#x7840;&#x300B;&#x4E00;&#x4E66;&#xFF0C;&#x5728;&#x6B64;&#x4E66;&#x4E2D;&#x6536;&#x5F55;&#x4E86; 23 &#x4E2A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x662F;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x9886;&#x57DF;&#x91CC;&#x7A0B;&#x7891;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x5BFC;&#x81F4;&#x4E86;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x7A81;&#x7834;&#x3002;&#x8FD9; 4 &#x4F4D;&#x4F5C;&#x8005;&#x5728;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x9886;&#x57DF;&#x91CC;&#x4E5F;&#x4EE5;&#x4ED6;&#x4EEC;&#x7684;&#x201C;&#x56DB;&#x4EBA;&#x7EC4;&#x201D;&#xFF08;Gang of Four&#xFF0C;GoF&#xFF09;&#x8457;&#x79F0;&#x3002;</p>
<h2 class="mume-header" id="12-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%A6%82%E5%BF%B5">1.2 &#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x6982;&#x5FF5;</h2>

<p>&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;Software Design Pattern&#xFF09;&#xFF0C;&#x53C8;&#x79F0;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x4E00;&#x5957;&#x88AB;&#x53CD;&#x590D;&#x4F7F;&#x7528;&#x3001;&#x591A;&#x6570;&#x4EBA;&#x77E5;&#x6653;&#x7684;&#x3001;&#x7ECF;&#x8FC7;&#x5206;&#x7C7B;&#x7F16;&#x76EE;&#x7684;&#x3001;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x7ECF;&#x9A8C;&#x7684;&#x603B;&#x7ED3;&#x3002;&#x5B83;&#x63CF;&#x8FF0;&#x4E86;&#x5728;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x4E0D;&#x65AD;&#x91CD;&#x590D;&#x53D1;&#x751F;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x53CA;&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5B83;&#x662F;&#x89E3;&#x51B3;&#x7279;&#x5B9A;&#x95EE;&#x9898;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x5957;&#x8DEF;&#xFF0C;&#x662F;&#x524D;&#x8F88;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x7ECF;&#x9A8C;&#x7684;&#x603B;&#x7ED3;&#xFF0C;&#x5177;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x666E;&#x904D;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x53CD;&#x590D;&#x4F7F;&#x7528;&#x3002;</p>
<h2 class="mume-header" id="13-%E5%AD%A6%E4%B9%A0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7">1.3 &#x5B66;&#x4E60;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x5FC5;&#x8981;&#x6027;</h2>

<p>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x672C;&#x8D28;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#x539F;&#x5219;&#x7684;&#x5B9E;&#x9645;&#x8FD0;&#x7528;&#xFF0C;&#x662F;&#x5BF9;&#x7C7B;&#x7684;&#x5C01;&#x88C5;&#x6027;&#x3001;&#x7EE7;&#x627F;&#x6027;&#x548C;&#x591A;&#x6001;&#x6027;&#x4EE5;&#x53CA;&#x7C7B;&#x7684;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x548C;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x7684;&#x5145;&#x5206;&#x7406;&#x89E3;&#x3002;</p>
<p>&#x6B63;&#x786E;&#x4F7F;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x4F18;&#x70B9;&#x3002;</p>
<ul>
<li>&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x601D;&#x7EF4;&#x80FD;&#x529B;&#x3001;&#x7F16;&#x7A0B;&#x80FD;&#x529B;&#x548C;&#x8BBE;&#x8BA1;&#x80FD;&#x529B;&#x3002;</li>
<li>&#x4F7F;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x66F4;&#x52A0;&#x6807;&#x51C6;&#x5316;&#x3001;&#x4EE3;&#x7801;&#x7F16;&#x5236;&#x66F4;&#x52A0;&#x5DE5;&#x7A0B;&#x5316;&#xFF0C;&#x4F7F;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#xFF0C;&#x4ECE;&#x800C;&#x7F29;&#x77ED;&#x8F6F;&#x4EF6;&#x7684;&#x5F00;&#x53D1;&#x5468;&#x671F;&#x3002;</li>
<li>&#x4F7F;&#x8BBE;&#x8BA1;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x91CD;&#x7528;&#x6027;&#x9AD8;&#x3001;&#x53EF;&#x8BFB;&#x6027;&#x5F3A;&#x3001;&#x53EF;&#x9760;&#x6027;&#x9AD8;&#x3001;&#x7075;&#x6D3B;&#x6027;&#x597D;&#x3001;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x5F3A;&#x3002;</li>
</ul>
<h2 class="mume-header" id="14-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB">1.4 &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5206;&#x7C7B;</h2>

<ul>
<li>
<p><strong>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;</strong></p>
<p>&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x201C;&#x600E;&#x6837;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x201D;&#xFF0C;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x70B9;&#x662F;&#x201C;&#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x4F7F;&#x7528;&#x5206;&#x79BB;&#x201D;&#x3002;GoF&#xFF08;&#x56DB;&#x4EBA;&#x7EC4;&#xFF09;&#x4E66;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x5355;&#x4F8B;&#x3001;&#x539F;&#x578B;&#x3001;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x3001;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x3001;&#x5EFA;&#x9020;&#x8005;&#x7B49; 5 &#x79CD;&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;&#x3002;</p>
</li>
<li>
<p><strong>&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;</strong></p>
<p>&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x5982;&#x4F55;&#x5C06;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x6309;&#x67D0;&#x79CD;&#x5E03;&#x5C40;&#x7EC4;&#x6210;&#x66F4;&#x5927;&#x7684;&#x7ED3;&#x6784;&#xFF0C;GoF&#xFF08;&#x56DB;&#x4EBA;&#x7EC4;&#xFF09;&#x4E66;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4EE3;&#x7406;&#x3001;&#x9002;&#x914D;&#x5668;&#x3001;&#x6865;&#x63A5;&#x3001;&#x88C5;&#x9970;&#x3001;&#x5916;&#x89C2;&#x3001;&#x4EAB;&#x5143;&#x3001;&#x7EC4;&#x5408;&#x7B49; 7 &#x79CD;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x3002;</p>
</li>
<li>
<p><strong>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;</strong></p>
<p>&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x600E;&#x6837;&#x76F8;&#x4E92;&#x534F;&#x4F5C;&#x5171;&#x540C;&#x5B8C;&#x6210;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x65E0;&#x6CD5;&#x5355;&#x72EC;&#x5B8C;&#x6210;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x4EE5;&#x53CA;&#x600E;&#x6837;&#x5206;&#x914D;&#x804C;&#x8D23;&#x3002;GoF&#xFF08;&#x56DB;&#x4EBA;&#x7EC4;&#xFF09;&#x4E66;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x3001;&#x7B56;&#x7565;&#x3001;&#x547D;&#x4EE4;&#x3001;&#x804C;&#x8D23;&#x94FE;&#x3001;&#x72B6;&#x6001;&#x3001;&#x89C2;&#x5BDF;&#x8005;&#x3001;&#x4E2D;&#x4ECB;&#x8005;&#x3001;&#x8FED;&#x4EE3;&#x5668;&#x3001;&#x8BBF;&#x95EE;&#x8005;&#x3001;&#x5907;&#x5FD8;&#x5F55;&#x3001;&#x89E3;&#x91CA;&#x5668;&#x7B49; 11 &#x79CD;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x3002;</p>
</li>
</ul>
<h1 class="mume-header" id="2uml%E5%9B%BE">2&#xFF0C;UML&#x56FE;</h1>

<p>&#x7EDF;&#x4E00;&#x5EFA;&#x6A21;&#x8BED;&#x8A00;&#xFF08;Unified Modeling Language&#xFF0C;UML&#xFF09;&#x662F;&#x7528;&#x6765;&#x8BBE;&#x8BA1;&#x8F6F;&#x4EF6;&#x7684;&#x53EF;&#x89C6;&#x5316;&#x5EFA;&#x6A21;&#x8BED;&#x8A00;&#x3002;&#x5B83;&#x7684;&#x7279;&#x70B9;&#x662F;&#x7B80;&#x5355;&#x3001;&#x7EDF;&#x4E00;&#x3001;&#x56FE;&#x5F62;&#x5316;&#x3001;&#x80FD;&#x8868;&#x8FBE;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x4E2D;&#x7684;&#x52A8;&#x6001;&#x4E0E;&#x9759;&#x6001;&#x4FE1;&#x606F;&#x3002;</p>
<p>UML &#x4ECE;&#x76EE;&#x6807;&#x7CFB;&#x7EDF;&#x7684;&#x4E0D;&#x540C;&#x89D2;&#x5EA6;&#x51FA;&#x53D1;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x7528;&#x4F8B;&#x56FE;&#x3001;&#x7C7B;&#x56FE;&#x3001;&#x5BF9;&#x8C61;&#x56FE;&#x3001;&#x72B6;&#x6001;&#x56FE;&#x3001;&#x6D3B;&#x52A8;&#x56FE;&#x3001;&#x65F6;&#x5E8F;&#x56FE;&#x3001;&#x534F;&#x4F5C;&#x56FE;&#x3001;&#x6784;&#x4EF6;&#x56FE;&#x3001;&#x90E8;&#x7F72;&#x56FE;&#x7B49; 9 &#x79CD;&#x56FE;&#x3002;</p>
<h2 class="mume-header" id="21-%E7%B1%BB%E5%9B%BE%E6%A6%82%E8%BF%B0">2.1 &#x7C7B;&#x56FE;&#x6982;&#x8FF0;</h2>

<p>&#x7C7B;&#x56FE;(Class diagram)&#x662F;&#x663E;&#x793A;&#x4E86;&#x6A21;&#x578B;&#x7684;&#x9759;&#x6001;&#x7ED3;&#x6784;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6A21;&#x578B;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x7C7B;&#x3001;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x4E0E;&#x5176;&#x4ED6;&#x7C7B;&#x7684;&#x5173;&#x7CFB;&#x7B49;&#x3002;&#x7C7B;&#x56FE;&#x4E0D;&#x663E;&#x793A;&#x6682;&#x65F6;&#x6027;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x7C7B;&#x56FE;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x5EFA;&#x6A21;&#x7684;&#x4E3B;&#x8981;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x3002;</p>
<h2 class="mume-header" id="22-%E7%B1%BB%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8">2.2 &#x7C7B;&#x56FE;&#x7684;&#x4F5C;&#x7528;</h2>

<ul>
<li>&#x5728;&#x8F6F;&#x4EF6;&#x5DE5;&#x7A0B;&#x4E2D;&#xFF0C;&#x7C7B;&#x56FE;&#x662F;&#x4E00;&#x79CD;&#x9759;&#x6001;&#x7684;&#x7ED3;&#x6784;&#x56FE;&#xFF0C;&#x63CF;&#x8FF0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x7C7B;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x7C7B;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x4E86;&#x4EBA;&#x4EEC;&#x5BF9;&#x7CFB;&#x7EDF;&#x7684;&#x7406;&#x89E3;&#xFF1B;</li>
<li>&#x7C7B;&#x56FE;&#x662F;&#x7CFB;&#x7EDF;&#x5206;&#x6790;&#x548C;&#x8BBE;&#x8BA1;&#x9636;&#x6BB5;&#x7684;&#x91CD;&#x8981;&#x4EA7;&#x7269;&#xFF0C;&#x662F;&#x7CFB;&#x7EDF;&#x7F16;&#x7801;&#x548C;&#x6D4B;&#x8BD5;&#x7684;&#x91CD;&#x8981;&#x6A21;&#x578B;&#x3002;</li>
</ul>
<h2 class="mume-header" id="23-%E7%B1%BB%E5%9B%BE%E8%A1%A8%E7%A4%BA%E6%B3%95">2.3 &#x7C7B;&#x56FE;&#x8868;&#x793A;&#x6CD5;</h2>

<h3 class="mume-header" id="231-%E7%B1%BB%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F">2.3.1 &#x7C7B;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;</h3>

<p>&#x5728;UML&#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x7C7B;&#x4F7F;&#x7528;&#x5305;&#x542B;&#x7C7B;&#x540D;&#x3001;&#x5C5E;&#x6027;(field) &#x548C;&#x65B9;&#x6CD5;(method) &#x4E14;&#x5E26;&#x6709;&#x5206;&#x5272;&#x7EBF;&#x7684;&#x77E9;&#x5F62;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x56FE;&#x8868;&#x793A;&#x4E00;&#x4E2A;Employee&#x7C7B;&#xFF0C;&#x5B83;&#x5305;&#x542B;name,age&#x548C;address&#x8FD9;3&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x4EE5;&#x53CA;work()&#x65B9;&#x6CD5;&#x3002;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5CEmployee.jpg" alt></p>
<p>&#x5C5E;&#x6027;/&#x65B9;&#x6CD5;&#x540D;&#x79F0;&#x524D;&#x52A0;&#x7684;&#x52A0;&#x53F7;&#x548C;&#x51CF;&#x53F7;&#x8868;&#x793A;&#x4E86;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;/&#x65B9;&#x6CD5;&#x7684;&#x53EF;&#x89C1;&#x6027;&#xFF0C;UML&#x7C7B;&#x56FE;&#x4E2D;&#x8868;&#x793A;&#x53EF;&#x89C1;&#x6027;&#x7684;&#x7B26;&#x53F7;&#x6709;&#x4E09;&#x79CD;&#xFF1A;</p>
<ul>
<li>
<p>+&#xFF1A;&#x8868;&#x793A;public</p>
</li>
<li>
<p>-&#xFF1A;&#x8868;&#x793A;private</p>
</li>
<li>
<p>#&#xFF1A;&#x8868;&#x793A;protected</p>
</li>
</ul>
<p>&#x5C5E;&#x6027;&#x7684;&#x5B8C;&#x6574;&#x8868;&#x793A;&#x65B9;&#x5F0F;&#x662F;&#xFF1A; <strong>&#x53EF;&#x89C1;&#x6027;  &#x540D;&#x79F0; &#xFF1A;&#x7C7B;&#x578B; [ = &#x7F3A;&#x7701;&#x503C;]</strong></p>
<p>&#x65B9;&#x6CD5;&#x7684;&#x5B8C;&#x6574;&#x8868;&#x793A;&#x65B9;&#x5F0F;&#x662F;&#xFF1A; <strong>&#x53EF;&#x89C1;&#x6027;  &#x540D;&#x79F0;(&#x53C2;&#x6570;&#x5217;&#x8868;) [ &#xFF1A; &#x8FD4;&#x56DE;&#x7C7B;&#x578B;]</strong></p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>&#x200B;	1&#xFF0C;&#x4E2D;&#x62EC;&#x53F7;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8868;&#x793A;&#x662F;&#x53EF;&#x9009;&#x7684;</p>
<p>&#x200B;	2&#xFF0C;&#x4E5F;&#x6709;&#x5C06;&#x7C7B;&#x578B;&#x653E;&#x5728;&#x53D8;&#x91CF;&#x540D;&#x524D;&#x9762;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x653E;&#x5728;&#x65B9;&#x6CD5;&#x540D;&#x524D;&#x9762;</p>
</blockquote>
<p><strong>&#x4E3E;&#x4E2A;&#x6817;&#x5B50;&#xFF1A;</strong></p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cdemo.png" alt></p>
<p>&#x4E0A;&#x56FE;Demo&#x7C7B;&#x5B9A;&#x4E49;&#x4E86;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>method()&#x65B9;&#x6CD5;&#xFF1A;&#x4FEE;&#x9970;&#x7B26;&#x4E3A;public&#xFF0C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x3002;</li>
<li>method1()&#x65B9;&#x6CD5;&#xFF1A;&#x4FEE;&#x9970;&#x7B26;&#x4E3A;private&#xFF0C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E3A;String&#x3002;</li>
<li>method2()&#x65B9;&#x6CD5;&#xFF1A;&#x4FEE;&#x9970;&#x7B26;&#x4E3A;protected&#xFF0C;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E3A;int&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E3A;String&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x662F;int&#x3002;</li>
</ul>
<h3 class="mume-header" id="232-%E7%B1%BB%E4%B8%8E%E7%B1%BB%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F">2.3.2 &#x7C7B;&#x4E0E;&#x7C7B;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;</h3>

<h4 class="mume-header" id="2321-%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB">2.3.2.1 &#x5173;&#x8054;&#x5173;&#x7CFB;</h4>

<p>&#x5173;&#x8054;&#x5173;&#x7CFB;&#x662F;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x79CD;&#x5F15;&#x7528;&#x5173;&#x7CFB;&#xFF0C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x4E00;&#x7C7B;&#x5BF9;&#x8C61;&#x4E0E;&#x53E6;&#x4E00;&#x7C7B;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#xFF0C;&#x5982;&#x8001;&#x5E08;&#x548C;&#x5B66;&#x751F;&#x3001;&#x5E08;&#x5085;&#x548C;&#x5F92;&#x5F1F;&#x3001;&#x4E08;&#x592B;&#x548C;&#x59BB;&#x5B50;&#x7B49;&#x3002;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x662F;&#x7C7B;&#x4E0E;&#x7C7B;&#x4E4B;&#x95F4;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E00;&#x79CD;&#x5173;&#x7CFB;&#xFF0C;&#x5206;&#x4E3A;&#x4E00;&#x822C;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x3001;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x548C;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x4ECB;&#x7ECD;&#x4E00;&#x822C;&#x5173;&#x8054;&#x3002;</p>
<p>&#x5173;&#x8054;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5355;&#x5411;&#x5173;&#x8054;&#xFF0C;&#x53CC;&#x5411;&#x5173;&#x8054;&#xFF0C;&#x81EA;&#x5173;&#x8054;&#x3002;</p>
<p><strong>1&#xFF0C;&#x5355;&#x5411;&#x5173;&#x8054;</strong></p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Ccustomer_address.png" alt></p>
<p>&#x5728;UML&#x7C7B;&#x56FE;&#x4E2D;&#x5355;&#x5411;&#x5173;&#x8054;&#x7528;&#x4E00;&#x4E2A;&#x5E26;&#x7BAD;&#x5934;&#x7684;&#x5B9E;&#x7EBF;&#x8868;&#x793A;&#x3002;&#x4E0A;&#x56FE;&#x8868;&#x793A;&#x6BCF;&#x4E2A;&#x987E;&#x5BA2;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x901A;&#x8FC7;&#x8BA9;Customer&#x7C7B;&#x6301;&#x6709;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x4E3A;Address&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</p>
<p><strong>2&#xFF0C;&#x53CC;&#x5411;&#x5173;&#x8054;</strong></p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Ccustomer_product.png" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x770B;&#x51FA;&#xFF0C;&#x6240;&#x8C13;&#x7684;&#x53CC;&#x5411;&#x5173;&#x8054;&#x5C31;&#x662F;&#x53CC;&#x65B9;&#x5404;&#x81EA;&#x6301;&#x6709;&#x5BF9;&#x65B9;&#x7C7B;&#x578B;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x5728;UML&#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x53CC;&#x5411;&#x5173;&#x8054;&#x7528;&#x4E00;&#x4E2A;&#x4E0D;&#x5E26;&#x7BAD;&#x5934;&#x7684;&#x76F4;&#x7EBF;&#x8868;&#x793A;&#x3002;&#x4E0A;&#x56FE;&#x4E2D;&#x5728;Customer&#x7C7B;&#x4E2D;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;List&lt;Product&gt;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x987E;&#x5BA2;&#x53EF;&#x4EE5;&#x8D2D;&#x4E70;&#x591A;&#x4E2A;&#x5546;&#x54C1;&#xFF1B;&#x5728;Product&#x7C7B;&#x4E2D;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;Customer&#x7C7B;&#x578B;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x4EA7;&#x54C1;&#x88AB;&#x54EA;&#x4E2A;&#x987E;&#x5BA2;&#x6240;&#x8D2D;&#x4E70;&#x3002;</p>
<p><strong>3&#xFF0C;&#x81EA;&#x5173;&#x8054;</strong></p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cnode.png" alt></p>
<p>&#x81EA;&#x5173;&#x8054;&#x5728;UML&#x7C7B;&#x56FE;&#x4E2D;&#x7528;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x7BAD;&#x5934;&#x4E14;&#x6307;&#x5411;&#x81EA;&#x8EAB;&#x7684;&#x7EBF;&#x8868;&#x793A;&#x3002;&#x4E0A;&#x56FE;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;Node&#x7C7B;&#x5305;&#x542B;&#x7C7B;&#x578B;&#x4E3A;Node&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x201C;&#x81EA;&#x5DF1;&#x5305;&#x542B;&#x81EA;&#x5DF1;&#x201D;&#x3002;</p>
<h4 class="mume-header" id="2322-%E8%81%9A%E5%90%88%E5%85%B3%E7%B3%BB">2.3.2.2 &#x805A;&#x5408;&#x5173;&#x7CFB;</h4>

<p>&#x805A;&#x5408;&#x5173;&#x7CFB;&#x662F;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x662F;&#x5F3A;&#x5173;&#x8054;&#x5173;&#x7CFB;&#xFF0C;&#x662F;&#x6574;&#x4F53;&#x548C;&#x90E8;&#x5206;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x3002;</p>
<p>&#x805A;&#x5408;&#x5173;&#x7CFB;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x662F;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4F46;&#x662F;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x8131;&#x79BB;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x800C;&#x72EC;&#x7ACB;&#x5B58;&#x5728;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5B66;&#x6821;&#x4E0E;&#x8001;&#x5E08;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x5B66;&#x6821;&#x5305;&#x542B;&#x8001;&#x5E08;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5B66;&#x6821;&#x505C;&#x529E;&#x4E86;&#xFF0C;&#x8001;&#x5E08;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#x3002;</p>
<p>&#x5728; UML &#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x53EF;&#x4EE5;&#x7528;&#x5E26;&#x7A7A;&#x5FC3;&#x83F1;&#x5F62;&#x7684;&#x5B9E;&#x7EBF;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x83F1;&#x5F62;&#x6307;&#x5411;&#x6574;&#x4F53;&#x3002;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x662F;&#x5927;&#x5B66;&#x548C;&#x6559;&#x5E08;&#x7684;&#x5173;&#x7CFB;&#x56FE;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cimage-20191229173422328.png" alt></p>
<h4 class="mume-header" id="2323-%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB">2.3.2.3 &#x7EC4;&#x5408;&#x5173;&#x7CFB;</h4>

<p>&#x7EC4;&#x5408;&#x8868;&#x793A;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x6574;&#x4F53;&#x4E0E;&#x90E8;&#x5206;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x4E00;&#x79CD;&#x66F4;&#x5F3A;&#x70C8;&#x7684;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x3002;</p>
<p>&#x5728;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x4E2D;&#xFF0C;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x4E00;&#x65E6;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x4E5F;&#x5C06;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x4E0D;&#x80FD;&#x8131;&#x79BB;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x800C;&#x5B58;&#x5728;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5934;&#x548C;&#x5634;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x6CA1;&#x6709;&#x4E86;&#x5934;&#xFF0C;&#x5634;&#x4E5F;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x4E86;&#x3002;</p>
<p>&#x5728; UML &#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x7528;&#x5E26;&#x5B9E;&#x5FC3;&#x83F1;&#x5F62;&#x7684;&#x5B9E;&#x7EBF;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x83F1;&#x5F62;&#x6307;&#x5411;&#x6574;&#x4F53;&#x3002;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x662F;&#x5934;&#x548C;&#x5634;&#x7684;&#x5173;&#x7CFB;&#x56FE;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cimage-20191229173455149.png" alt></p>
<h4 class="mume-header" id="2324-%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB">2.3.2.4 &#x4F9D;&#x8D56;&#x5173;&#x7CFB;</h4>

<p>&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x662F;&#x4E00;&#x79CD;&#x4F7F;&#x7528;&#x5173;&#x7CFB;&#xFF0C;&#x5B83;&#x662F;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x8026;&#x5408;&#x5EA6;&#x6700;&#x5F31;&#x7684;&#x4E00;&#x79CD;&#x5173;&#x8054;&#x65B9;&#x5F0F;&#xFF0C;&#x662F;&#x4E34;&#x65F6;&#x6027;&#x7684;&#x5173;&#x8054;&#x3002;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x67D0;&#x4E2A;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x3001;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x6216;&#x8005;&#x5BF9;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x6765;&#x8BBF;&#x95EE;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#xFF08;&#x88AB;&#x4F9D;&#x8D56;&#x7C7B;&#xFF09;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x65B9;&#x6CD5;&#x6765;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;&#x804C;&#x8D23;&#x3002;</p>
<p>&#x5728; UML &#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4F7F;&#x7528;&#x5E26;&#x7BAD;&#x5934;&#x7684;&#x865A;&#x7EBF;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x7BAD;&#x5934;&#x4ECE;&#x4F7F;&#x7528;&#x7C7B;&#x6307;&#x5411;&#x88AB;&#x4F9D;&#x8D56;&#x7684;&#x7C7B;&#x3002;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x662F;&#x53F8;&#x673A;&#x548C;&#x6C7D;&#x8F66;&#x7684;&#x5173;&#x7CFB;&#x56FE;&#xFF0C;&#x53F8;&#x673A;&#x9A7E;&#x9A76;&#x6C7D;&#x8F66;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cimage-20191229173518926.png" alt></p>
<h4 class="mume-header" id="2325-%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB">2.3.2.5 &#x7EE7;&#x627F;&#x5173;&#x7CFB;</h4>

<p>&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x662F;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x8026;&#x5408;&#x5EA6;&#x6700;&#x5927;&#x7684;&#x4E00;&#x79CD;&#x5173;&#x7CFB;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x822C;&#x4E0E;&#x7279;&#x6B8A;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x662F;&#x7236;&#x7C7B;&#x4E0E;&#x5B50;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x3002;</p>
<p>&#x5728; UML &#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x6CDB;&#x5316;&#x5173;&#x7CFB;&#x7528;&#x5E26;&#x7A7A;&#x5FC3;&#x4E09;&#x89D2;&#x7BAD;&#x5934;&#x7684;&#x5B9E;&#x7EBF;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x7BAD;&#x5934;&#x4ECE;&#x5B50;&#x7C7B;&#x6307;&#x5411;&#x7236;&#x7C7B;&#x3002;&#x5728;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7EE7;&#x627F;&#x673A;&#x5236;&#x6765;&#x5B9E;&#x73B0;&#x6CDB;&#x5316;&#x5173;&#x7CFB;&#x3002;&#x4F8B;&#x5982;&#xFF0C;Student &#x7C7B;&#x548C; Teacher &#x7C7B;&#x90FD;&#x662F; Person &#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5176;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cimage-20191229173539838.png" alt></p>
<h4 class="mume-header" id="2326-%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB">2.3.2.6 &#x5B9E;&#x73B0;&#x5173;&#x7CFB;</h4>

<p>&#x5B9E;&#x73B0;&#x5173;&#x7CFB;&#x662F;&#x63A5;&#x53E3;&#x4E0E;&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x5173;&#x7CFB;&#x4E2D;&#xFF0C;&#x7C7B;&#x5B9E;&#x73B0;&#x4E86;&#x63A5;&#x53E3;&#xFF0C;&#x7C7B;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x5B9E;&#x73B0;&#x4E86;&#x63A5;&#x53E3;&#x4E2D;&#x6240;&#x58F0;&#x660E;&#x7684;&#x6240;&#x6709;&#x7684;&#x62BD;&#x8C61;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5728; UML &#x7C7B;&#x56FE;&#x4E2D;&#xFF0C;&#x5B9E;&#x73B0;&#x5173;&#x7CFB;&#x4F7F;&#x7528;&#x5E26;&#x7A7A;&#x5FC3;&#x4E09;&#x89D2;&#x7BAD;&#x5934;&#x7684;&#x865A;&#x7EBF;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x7BAD;&#x5934;&#x4ECE;&#x5B9E;&#x73B0;&#x7C7B;&#x6307;&#x5411;&#x63A5;&#x53E3;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6C7D;&#x8F66;&#x548C;&#x8239;&#x5B9E;&#x73B0;&#x4E86;&#x4EA4;&#x901A;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x7C7B;&#x56FE;&#x5982;&#x56FE; 9 &#x6240;&#x793A;&#x3002;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Cimage-20191229173554296.png" alt></p>
<h1 class="mume-header" id="3%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99">3&#xFF0C;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x539F;&#x5219;</h1>

<p>&#x5728;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x548C;&#x53EF;&#x590D;&#x7528;&#x6027;&#xFF0C;&#x589E;&#x52A0;&#x8F6F;&#x4EF6;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x548C;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x8981;&#x5C3D;&#x91CF;&#x6839;&#x636E;6&#x6761;&#x539F;&#x5219;&#x6765;&#x5F00;&#x53D1;&#x7A0B;&#x5E8F;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3001;&#x8282;&#x7EA6;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6210;&#x672C;&#x548C;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x3002;</p>
<h2 class="mume-header" id="31-%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99">3.1 &#x5F00;&#x95ED;&#x539F;&#x5219;</h2>

<p><strong>&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#xFF0C;&#x5BF9;&#x4FEE;&#x6539;&#x5173;&#x95ED;</strong>&#x3002;&#x5728;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x62D3;&#x5C55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x80FD;&#x53BB;&#x4FEE;&#x6539;&#x539F;&#x6709;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x70ED;&#x63D2;&#x62D4;&#x7684;&#x6548;&#x679C;&#x3002;&#x7B80;&#x8A00;&#x4E4B;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x4F7F;&#x7A0B;&#x5E8F;&#x7684;&#x6269;&#x5C55;&#x6027;&#x597D;&#xFF0C;&#x6613;&#x4E8E;&#x7EF4;&#x62A4;&#x548C;&#x5347;&#x7EA7;&#x3002;</p>
<p>&#x60F3;&#x8981;&#x8FBE;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x63A5;&#x53E3;&#x548C;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x62BD;&#x8C61;&#x7075;&#x6D3B;&#x6027;&#x597D;&#xFF0C;&#x9002;&#x5E94;&#x6027;&#x5E7F;&#xFF0C;&#x53EA;&#x8981;&#x62BD;&#x8C61;&#x7684;&#x5408;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x57FA;&#x672C;&#x4FDD;&#x6301;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;&#x7684;&#x7A33;&#x5B9A;&#x3002;&#x800C;&#x8F6F;&#x4EF6;&#x4E2D;&#x6613;&#x53D8;&#x7684;&#x7EC6;&#x8282;&#x53EF;&#x4EE5;&#x4ECE;&#x62BD;&#x8C61;&#x6D3E;&#x751F;&#x6765;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x6765;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#xFF0C;&#x5F53;&#x8F6F;&#x4EF6;&#x9700;&#x8981;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6839;&#x636E;&#x9700;&#x6C42;&#x91CD;&#x65B0;&#x6D3E;&#x751F;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#x6765;&#x6269;&#x5C55;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x4EE5; <code>&#x641C;&#x72D7;&#x8F93;&#x5165;&#x6CD5;</code> &#x7684;&#x76AE;&#x80A4;&#x4E3A;&#x4F8B;&#x4ECB;&#x7ECD;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x7684;&#x5E94;&#x7528;&#x3002;</p>
<p>&#x3010;&#x4F8B;&#x3011;<code>&#x641C;&#x72D7;&#x8F93;&#x5165;&#x6CD5;</code> &#x7684;&#x76AE;&#x80A4;&#x8BBE;&#x8BA1;&#x3002;</p>
<p>&#x5206;&#x6790;&#xFF1A;<code>&#x641C;&#x72D7;&#x8F93;&#x5165;&#x6CD5;</code> &#x7684;&#x76AE;&#x80A4;&#x662F;&#x8F93;&#x5165;&#x6CD5;&#x80CC;&#x666F;&#x56FE;&#x7247;&#x3001;&#x7A97;&#x53E3;&#x989C;&#x8272;&#x548C;&#x58F0;&#x97F3;&#x7B49;&#x5143;&#x7D20;&#x7684;&#x7EC4;&#x5408;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x559C;&#x7231;&#x66F4;&#x6362;&#x81EA;&#x5DF1;&#x7684;&#x8F93;&#x5165;&#x6CD5;&#x7684;&#x76AE;&#x80A4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;&#x7F51;&#x4E0A;&#x4E0B;&#x8F7D;&#x65B0;&#x7684;&#x76AE;&#x80A4;&#x3002;&#x8FD9;&#x4E9B;&#x76AE;&#x80A4;&#x6709;&#x5171;&#x540C;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x5176;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#xFF08;AbstractSkin&#xFF09;&#xFF0C;&#x800C;&#x6BCF;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x76AE;&#x80A4;&#xFF08;DefaultSpecificSkin&#x548C;HeimaSpecificSkin&#xFF09;&#x662F;&#x5176;&#x5B50;&#x7C7B;&#x3002;&#x7528;&#x6237;&#x7A97;&#x4F53;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x9009;&#x62E9;&#x6216;&#x8005;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x539F;&#x4EE3;&#x7801;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x662F;&#x6EE1;&#x8DB3;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x7684;&#x3002;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5Copen-close.png" alt></p>
<h2 class="mume-header" id="32-%E9%87%8C%E6%B0%8F%E4%BB%A3%E6%8D%A2%E5%8E%9F%E5%88%99">3.2 &#x91CC;&#x6C0F;&#x4EE3;&#x6362;&#x539F;&#x5219;</h2>

<p>&#x91CC;&#x6C0F;&#x4EE3;&#x6362;&#x539F;&#x5219;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#x7684;&#x57FA;&#x672C;&#x539F;&#x5219;&#x4E4B;&#x4E00;&#x3002;</p>
<p>&#x91CC;&#x6C0F;&#x4EE3;&#x6362;&#x539F;&#x5219;&#xFF1A;&#x4EFB;&#x4F55;&#x57FA;&#x7C7B;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x5B50;&#x7C7B;&#x4E00;&#x5B9A;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x3002;&#x901A;&#x4FD7;&#x7406;&#x89E3;&#xFF1A;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x7236;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x6539;&#x53D8;&#x7236;&#x7C7B;&#x539F;&#x6709;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5B50;&#x7C7B;&#x7EE7;&#x627F;&#x7236;&#x7C7B;&#x65F6;&#xFF0C;&#x9664;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x65B9;&#x6CD5;&#x5B8C;&#x6210;&#x65B0;&#x589E;&#x529F;&#x80FD;&#x5916;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x91CD;&#x5199;&#x7236;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5982;&#x679C;&#x901A;&#x8FC7;&#x91CD;&#x5199;&#x7236;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x5B8C;&#x6210;&#x65B0;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x6837;&#x5199;&#x8D77;&#x6765;&#x867D;&#x7136;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x6574;&#x4E2A;&#x7EE7;&#x627F;&#x4F53;&#x7CFB;&#x7684;&#x53EF;&#x590D;&#x7528;&#x6027;&#x4F1A;&#x6BD4;&#x8F83;&#x5DEE;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x8FD0;&#x7528;&#x591A;&#x6001;&#x6BD4;&#x8F83;&#x9891;&#x7E41;&#x65F6;&#xFF0C;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x51FA;&#x9519;&#x7684;&#x6982;&#x7387;&#x4F1A;&#x975E;&#x5E38;&#x5927;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x4E2A;&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x4E2D;&#x7ECF;&#x5178;&#x7684;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x6B63;&#x65B9;&#x5F62;&#x4E0D;&#x662F;&#x957F;&#x65B9;&#x5F62;&#x3002;</p>
<p>&#x5728;&#x6570;&#x5B66;&#x9886;&#x57DF;&#x91CC;&#xFF0C;&#x6B63;&#x65B9;&#x5F62;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x662F;&#x957F;&#x65B9;&#x5F62;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x957F;&#x5BBD;&#x76F8;&#x7B49;&#x7684;&#x957F;&#x65B9;&#x5F62;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x4E2A;&#x4E0E;&#x51E0;&#x4F55;&#x56FE;&#x5F62;&#x76F8;&#x5173;&#x7684;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x987A;&#x7406;&#x6210;&#x7AE0;&#x7684;&#x8BA9;&#x6B63;&#x65B9;&#x5F62;&#x7EE7;&#x627F;&#x81EA;&#x957F;&#x65B9;&#x5F62;&#x3002;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5C%E6%AD%A3%E6%96%B9%E5%BD%A2%E4%B8%8D%E6%98%AF%E9%95%BF%E6%96%B9%E5%BD%A2.png" alt></p>
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>&#x957F;&#x65B9;&#x5F62;&#x7C7B;&#xFF08;Rectangle&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x6B63;&#x65B9;&#x5F62;&#xFF08;Square&#xFF09;&#xFF1A;</strong></p>
<p>&#x7531;&#x4E8E;&#x6B63;&#x65B9;&#x5F62;&#x7684;&#x957F;&#x548C;&#x5BBD;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x65B9;&#x6CD5;setLength&#x548C;setWidth&#x4E2D;&#xFF0C;&#x5BF9;&#x957F;&#x5EA6;&#x548C;&#x5BBD;&#x5EA6;&#x90FD;&#x9700;&#x8981;&#x8D4B;&#x76F8;&#x540C;&#x503C;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x7C7B;RectangleDemo&#x662F;&#x6211;&#x4EEC;&#x7684;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x5B83;&#x6709;&#x4E00;&#x4E2A;resize&#x65B9;&#x6CD5;&#x4F9D;&#x8D56;&#x57FA;&#x7C7B;Rectangle&#xFF0C;resize&#x65B9;&#x6CD5;&#x662F;RectandleDemo&#x7C7B;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5BBD;&#x5EA6;&#x9010;&#x6E10;&#x589E;&#x957F;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6253;&#x5370;&#x957F;&#x65B9;&#x5F62;&#x7684;&#x957F;&#x548C;&#x5BBD;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x628A;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x957F;&#x65B9;&#x5F62;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165;resize&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x957F;&#x65B9;&#x5F62;&#x5BBD;&#x5EA6;&#x9010;&#x6E10;&#x589E;&#x957F;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5F53;&#x5BBD;&#x5EA6;&#x5927;&#x4E8E;&#x957F;&#x5EA6;,&#x4EE3;&#x7801;&#x5C31;&#x4F1A;&#x505C;&#x6B62;&#xFF0C;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x7684;&#x7ED3;&#x679C;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x9884;&#x671F;&#xFF1B;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x518D;&#x628A;&#x4E00;&#x4E2A;&#x6B63;&#x65B9;&#x5F62;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165;resize&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x6B63;&#x65B9;&#x5F62;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x957F;&#x5EA6;&#x90FD;&#x5728;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#xFF0C;&#x4EE3;&#x7801;&#x4F1A;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x4E0B;&#x53BB;&#xFF0C;&#x76F4;&#x81F3;&#x7CFB;&#x7EDF;&#x4EA7;&#x751F;&#x6EA2;&#x51FA;&#x9519;&#x8BEF;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x666E;&#x901A;&#x7684;&#x957F;&#x65B9;&#x5F62;&#x662F;&#x9002;&#x5408;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#xFF0C;&#x6B63;&#x65B9;&#x5F62;&#x4E0D;&#x9002;&#x5408;&#x3002;<br>
&#x6211;&#x4EEC;&#x5F97;&#x51FA;&#x7ED3;&#x8BBA;&#xFF1A;&#x5728;resize&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;Rectangle&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E0D;&#x80FD;&#x88AB;Square&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x6240;&#x4EE3;&#x66FF;&#xFF0C;&#x5982;&#x679C;&#x8FDB;&#x884C;&#x4E86;&#x66FF;&#x6362;&#x5C31;&#x5F97;&#x4E0D;&#x5230;&#x9884;&#x671F;&#x7ED3;&#x679C;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Square&#x7C7B;&#x548C;Rectangle&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x8FDD;&#x53CD;&#x4E86;&#x91CC;&#x6C0F;&#x4EE3;&#x6362;&#x539F;&#x5219;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x6B63;&#x65B9;&#x5F62;&#x4E0D;&#x662F;&#x957F;&#x65B9;&#x5F62;&#x3002;</p>
<p>&#x5982;&#x4F55;&#x6539;&#x8FDB;&#x5462;&#xFF1F;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x3002;&#x62BD;&#x8C61;&#x51FA;&#x6765;&#x4E00;&#x4E2A;&#x56DB;&#x8FB9;&#x5F62;&#x63A5;&#x53E3;(Quadrilateral)&#xFF0C;&#x8BA9;Rectangle&#x7C7B;&#x548C;Square&#x7C7B;&#x5B9E;&#x73B0;Quadrilateral&#x63A5;&#x53E3;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x6B63;&#x65B9;&#x5F62;&#x4E0D;&#x662F;&#x957F;&#x65B9;&#x5F62;&#x6539;&#x8FDB;.png" style="zoom:80%;">
<h2 class="mume-header" id="33-%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99">3.3 &#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;</h2>

<p>&#x9AD8;&#x5C42;&#x6A21;&#x5757;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x4F4E;&#x5C42;&#x6A21;&#x5757;&#xFF0C;&#x4E24;&#x8005;&#x90FD;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5176;&#x62BD;&#x8C61;&#xFF1B;&#x62BD;&#x8C61;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x7EC6;&#x8282;&#xFF0C;&#x7EC6;&#x8282;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#x3002;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5C31;&#x662F;&#x8981;&#x6C42;&#x5BF9;&#x62BD;&#x8C61;&#x8FDB;&#x884C;&#x7F16;&#x7A0B;&#xFF0C;&#x4E0D;&#x8981;&#x5BF9;&#x5B9E;&#x73B0;&#x8FDB;&#x884C;&#x7F16;&#x7A0B;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x964D;&#x4F4E;&#x4E86;&#x5BA2;&#x6237;&#x4E0E;&#x5B9E;&#x73B0;&#x6A21;&#x5757;&#x95F4;&#x7684;&#x8026;&#x5408;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x7406;&#x89E3;&#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x7EC4;&#x88C5;&#x7535;&#x8111;</p>
<p>&#x73B0;&#x8981;&#x7EC4;&#x88C5;&#x4E00;&#x53F0;&#x7535;&#x8111;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x4EF6;cpu&#xFF0C;&#x786C;&#x76D8;&#xFF0C;&#x5185;&#x5B58;&#x6761;&#x3002;&#x53EA;&#x6709;&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#x90FD;&#x6709;&#x4E86;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x7684;&#x8FD0;&#x884C;&#x3002;&#x9009;&#x62E9;cpu&#x6709;&#x5F88;&#x591A;&#x9009;&#x62E9;&#xFF0C;&#x5982;Intel&#xFF0C;AMD&#x7B49;&#xFF0C;&#x786C;&#x76D8;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5E0C;&#x6377;&#xFF0C;&#x897F;&#x6570;&#x7B49;&#xFF0C;&#x5185;&#x5B58;&#x6761;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x91D1;&#x58EB;&#x987F;&#xFF0C;&#x6D77;&#x76D7;&#x8239;&#x7B49;&#x3002;</p>
<p><strong>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>&#x5E0C;&#x6377;&#x786C;&#x76D8;&#x7C7B;&#xFF08;XiJieHardDisk&#xFF09;:</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4F7F;&#x7528;&#x5E0C;&#x6377;&#x786C;&#x76D8;&#x5B58;&#x50A8;&#x6570;&#x636E;&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4F7F;&#x7528;&#x5E0C;&#x6377;&#x5E0C;&#x6377;&#x786C;&#x76D8;&#x53D6;&#x6570;&#x636E;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x6570;&#x636E;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>Intel&#x5904;&#x7406;&#x5668;&#xFF08;IntelCpu&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4F7F;&#x7528;Intel&#x5904;&#x7406;&#x5668;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x91D1;&#x58EB;&#x987F;&#x5185;&#x5B58;&#x6761;&#xFF08;KingstonMemory&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4F7F;&#x7528;&#x91D1;&#x58EB;&#x987F;&#x4F5C;&#x4E3A;&#x5185;&#x5B58;&#x6761;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x7535;&#x8111;&#xFF08;Computer&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8BA1;&#x7B97;&#x673A;&#x5DE5;&#x4F5C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4ECE;&#x786C;&#x76D8;&#x4E2D;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x4E3A;&#xFF1A;&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x6D4B;&#x8BD5;&#x7C7B;&#xFF08;TestComputer&#xFF09;&#xFF1A;</strong></p>
<p>&#x6D4B;&#x8BD5;&#x7C7B;&#x7528;&#x6765;&#x7EC4;&#x88C5;&#x7535;&#x8111;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5DF2;&#x7ECF;&#x7EC4;&#x88C5;&#x4E86;&#x4E00;&#x53F0;&#x7535;&#x8111;&#xFF0C;&#x4F46;&#x662F;&#x4F3C;&#x4E4E;&#x7EC4;&#x88C5;&#x7684;&#x7535;&#x8111;&#x7684;cpu&#x53EA;&#x80FD;&#x662F;Intel&#x7684;&#xFF0C;&#x5185;&#x5B58;&#x6761;&#x53EA;&#x80FD;&#x662F;&#x91D1;&#x58EB;&#x987F;&#x7684;&#xFF0C;&#x786C;&#x76D8;&#x53EA;&#x80FD;&#x662F;&#x5E0C;&#x6377;&#x7684;&#xFF0C;&#x8FD9;&#x5BF9;&#x7528;&#x6237;&#x80AF;&#x5B9A;&#x662F;&#x4E0D;&#x53CB;&#x597D;&#x7684;&#xFF0C;&#x7528;&#x6237;&#x6709;&#x4E86;&#x673A;&#x7BB1;&#x80AF;&#x5B9A;&#x662F;&#x60F3;&#x6309;&#x7167;&#x81EA;&#x5DF1;&#x7684;&#x559C;&#x597D;&#xFF0C;&#x9009;&#x62E9;&#x81EA;&#x5DF1;&#x559C;&#x6B22;&#x7684;&#x914D;&#x4EF6;&#x3002;</p>
<p>&#x6839;&#x636E;&#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#xFF1A;</p>
<p>&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;Computer&#x7C7B;&#xFF0C;&#x8BA9;Computer&#x7C7B;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#xFF08;&#x5404;&#x4E2A;&#x914D;&#x4EF6;&#x7684;&#x63A5;&#x53E3;&#xFF09;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</p>
<p><strong>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;&#x6539;&#x8FDB;.png" alt="image-20191229173554296" style="zoom:70%;">
<p><strong>&#x7535;&#x8111;&#xFF08;Computer&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8BA1;&#x7B97;&#x673A;&#x5DE5;&#x4F5C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x5F00;&#x53D1;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x62BD;&#x8C61;&#x7684;&#x53D8;&#x5316;&#x6982;&#x7387;&#x5F88;&#x5C0F;&#xFF0C;&#x8BA9;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x4F9D;&#x8D56;&#x4E8E;&#x62BD;&#x8C61;&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x7EC6;&#x8282;&#x4E5F;&#x4F9D;&#x8D56;&#x4E8E;&#x62BD;&#x8C61;&#x3002;&#x5373;&#x4F7F;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x4E0D;&#x65AD;&#x53D8;&#x52A8;&#xFF0C;&#x53EA;&#x8981;&#x62BD;&#x8C61;&#x4E0D;&#x53D8;&#xFF0C;&#x5BA2;&#x6237;&#x7A0B;&#x5E8F;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x53D8;&#x5316;&#x3002;&#x8FD9;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x4E86;&#x5BA2;&#x6237;&#x7A0B;&#x5E8F;&#x4E0E;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x3002;</p>
<h2 class="mume-header" id="34-%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99">3.4 &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x8FEB;&#x4F9D;&#x8D56;&#x4E8E;&#x5B83;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF1B;&#x4E00;&#x4E2A;&#x7C7B;&#x5BF9;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x4F9D;&#x8D56;&#x5E94;&#x8BE5;&#x5EFA;&#x7ACB;&#x5728;&#x6700;&#x5C0F;&#x7684;&#x63A5;&#x53E3;&#x4E0A;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x7406;&#x89E3;&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x5B89;&#x5168;&#x95E8;&#x6848;&#x4F8B;</p>
<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>&#x9ED1;&#x9A6C;</code>&#x54C1;&#x724C;&#x7684;&#x5B89;&#x5168;&#x95E8;&#xFF0C;&#x8BE5;&#x5B89;&#x5168;&#x95E8;&#x5177;&#x6709;&#x9632;&#x706B;&#x3001;&#x9632;&#x6C34;&#x3001;&#x9632;&#x76D7;&#x7684;&#x529F;&#x80FD;&#x3002;&#x53EF;&#x4EE5;&#x5C06;&#x9632;&#x706B;&#xFF0C;&#x9632;&#x6C34;&#xFF0C;&#x9632;&#x76D7;&#x529F;&#x80FD;&#x63D0;&#x53D6;&#x6210;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5F62;&#x6210;&#x4E00;&#x5957;&#x89C4;&#x8303;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5C%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99.png" alt></p>
<p>&#x4E0A;&#x9762;&#x7684;&#x8BBE;&#x8BA1;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x4E86;&#x5B83;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9ED1;&#x9A6C;&#x54C1;&#x724C;&#x7684;&#x5B89;&#x5168;&#x95E8;&#x5177;&#x6709;&#x9632;&#x76D7;&#xFF0C;&#x9632;&#x6C34;&#xFF0C;&#x9632;&#x706B;&#x7684;&#x529F;&#x80FD;&#x3002;&#x73B0;&#x5728;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4F20;&#x667A;&#x54C1;&#x724C;&#x7684;&#x5B89;&#x5168;&#x95E8;&#xFF0C;&#x800C;&#x8BE5;&#x5B89;&#x5168;&#x95E8;&#x53EA;&#x5177;&#x6709;&#x9632;&#x76D7;&#x3001;&#x9632;&#x6C34;&#x529F;&#x80FD;&#x5462;&#xFF1F;&#x5F88;&#x663E;&#x7136;&#x5982;&#x679C;&#x5B9E;&#x73B0;SafetyDoor&#x63A5;&#x53E3;&#x5C31;&#x8FDD;&#x80CC;&#x4E86;&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x5462;&#xFF1F;&#x770B;&#x5982;&#x4E0B;&#x7C7B;&#x56FE;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5C%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%991.png" alt></p>
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>AntiTheft&#xFF08;&#x63A5;&#x53E3;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</pre><p><strong>Fireproof&#xFF08;&#x63A5;&#x53E3;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</pre><p><strong>Waterproof&#xFF08;&#x63A5;&#x53E3;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</pre><p><strong>HeiMaSafetyDoor&#xFF08;&#x7C7B;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9632;&#x76D7;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9632;&#x706B;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9632;&#x6C34;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</pre><p><strong>ItcastSafetyDoor&#xFF08;&#x7C7B;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9632;&#x76D7;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9632;&#x706B;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="35-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99">3.5 &#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;</h2>

<p>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x53C8;&#x53EB;&#x6700;&#x5C11;&#x77E5;&#x8BC6;&#x539F;&#x5219;&#x3002;</p>
<p>&#x53EA;&#x548C;&#x4F60;&#x7684;&#x76F4;&#x63A5;&#x670B;&#x53CB;&#x4EA4;&#x8C08;&#xFF0C;&#x4E0D;&#x8DDF;&#x201C;&#x964C;&#x751F;&#x4EBA;&#x201D;&#x8BF4;&#x8BDD;&#xFF08;Talk only to your immediate friends and not to strangers&#xFF09;&#x3002;</p>
<p>&#x5176;&#x542B;&#x4E49;&#x662F;&#xFF1A;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x8F6F;&#x4EF6;&#x5B9E;&#x4F53;&#x65E0;&#x987B;&#x76F4;&#x63A5;&#x901A;&#x4FE1;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x5E94;&#x5F53;&#x53D1;&#x751F;&#x76F4;&#x63A5;&#x7684;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7B2C;&#x4E09;&#x65B9;&#x8F6C;&#x53D1;&#x8BE5;&#x8C03;&#x7528;&#x3002;&#x5176;&#x76EE;&#x7684;&#x662F;&#x964D;&#x4F4E;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#xFF0C;&#x63D0;&#x9AD8;&#x6A21;&#x5757;&#x7684;&#x76F8;&#x5BF9;&#x72EC;&#x7ACB;&#x6027;&#x3002;</p>
<p>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x4E2D;&#x7684;&#x201C;&#x670B;&#x53CB;&#x201D;&#x662F;&#x6307;&#xFF1A;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x3001;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x7684;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x3001;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x6240;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x3001;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x540C;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x5B58;&#x5728;&#x5173;&#x8054;&#x3001;&#x805A;&#x5408;&#x6216;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x7406;&#x89E3;&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x660E;&#x661F;&#x4E0E;&#x7ECF;&#x7EAA;&#x4EBA;&#x7684;&#x5173;&#x7CFB;&#x5B9E;&#x4F8B;</p>
<p>&#x660E;&#x661F;&#x7531;&#x4E8E;&#x5168;&#x8EAB;&#x5FC3;&#x6295;&#x5165;&#x827A;&#x672F;&#xFF0C;&#x6240;&#x4EE5;&#x8BB8;&#x591A;&#x65E5;&#x5E38;&#x4E8B;&#x52A1;&#x7531;&#x7ECF;&#x7EAA;&#x4EBA;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x548C;&#x7C89;&#x4E1D;&#x7684;&#x89C1;&#x9762;&#x4F1A;&#xFF0C;&#x548C;&#x5A92;&#x4F53;&#x516C;&#x53F8;&#x7684;&#x4E1A;&#x52A1;&#x6D3D;&#x6DE1;&#x7B49;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x7ECF;&#x7EAA;&#x4EBA;&#x662F;&#x660E;&#x661F;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x800C;&#x7C89;&#x4E1D;&#x548C;&#x5A92;&#x4F53;&#x516C;&#x53F8;&#x662F;&#x964C;&#x751F;&#x4EBA;&#xFF0C;&#x6240;&#x4EE5;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;.png" alt="image-20191229173554296" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>&#x660E;&#x661F;&#x7C7B;&#xFF08;Star&#xFF09;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x7C89;&#x4E1D;&#x7C7B;&#xFF08;Fans&#xFF09;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x5A92;&#x4F53;&#x516C;&#x53F8;&#x7C7B;&#xFF08;Company&#xFF09;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>&#x7ECF;&#x7EAA;&#x4EBA;&#x7C7B;&#xFF08;Agent&#xFF09;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x4E0E;&#x660E;&#x661F;&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x89C1;&#x9762;&#x4E86;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x4E0E;&#x660E;&#x661F;&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x6D3D;&#x6DE1;&#x4E1A;&#x52A1;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="36-%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99">3.6 &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;</h2>

<p>&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;&#x662F;&#x6307;&#xFF1A;&#x5C3D;&#x91CF;&#x5148;&#x4F7F;&#x7528;&#x7EC4;&#x5408;&#x6216;&#x8005;&#x805A;&#x5408;&#x7B49;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x6B21;&#x624D;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x901A;&#x5E38;&#x7C7B;&#x7684;&#x590D;&#x7528;&#x5206;&#x4E3A;&#x7EE7;&#x627F;&#x590D;&#x7528;&#x548C;&#x5408;&#x6210;&#x590D;&#x7528;&#x4E24;&#x79CD;&#x3002;</p>
<p>&#x7EE7;&#x627F;&#x590D;&#x7528;&#x867D;&#x7136;&#x6709;&#x7B80;&#x5355;&#x548C;&#x6613;&#x5B9E;&#x73B0;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x5B58;&#x5728;&#x4EE5;&#x4E0B;&#x7F3A;&#x70B9;&#xFF1A;</p>
<ol>
<li>&#x7EE7;&#x627F;&#x590D;&#x7528;&#x7834;&#x574F;&#x4E86;&#x7C7B;&#x7684;&#x5C01;&#x88C5;&#x6027;&#x3002;&#x56E0;&#x4E3A;&#x7EE7;&#x627F;&#x4F1A;&#x5C06;&#x7236;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x66B4;&#x9732;&#x7ED9;&#x5B50;&#x7C7B;&#xFF0C;&#x7236;&#x7C7B;&#x5BF9;&#x5B50;&#x7C7B;&#x662F;&#x900F;&#x660E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x79CD;&#x590D;&#x7528;&#x53C8;&#x79F0;&#x4E3A;&#x201C;&#x767D;&#x7BB1;&#x201D;&#x590D;&#x7528;&#x3002;</li>
<li>&#x5B50;&#x7C7B;&#x4E0E;&#x7236;&#x7C7B;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x9AD8;&#x3002;&#x7236;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;&#x7684;&#x4EFB;&#x4F55;&#x6539;&#x53D8;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x5B50;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x8FD9;&#x4E0D;&#x5229;&#x4E8E;&#x7C7B;&#x7684;&#x6269;&#x5C55;&#x4E0E;&#x7EF4;&#x62A4;&#x3002;</li>
<li>&#x5B83;&#x9650;&#x5236;&#x4E86;&#x590D;&#x7528;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002;&#x4ECE;&#x7236;&#x7C7B;&#x7EE7;&#x627F;&#x800C;&#x6765;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4E0D;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;</li>
</ol>
<p>&#x91C7;&#x7528;&#x7EC4;&#x5408;&#x6216;&#x805A;&#x5408;&#x590D;&#x7528;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5DF2;&#x6709;&#x5BF9;&#x8C61;&#x7EB3;&#x5165;&#x65B0;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x65B0;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5DF2;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x6709;&#x4EE5;&#x4E0B;&#x4F18;&#x70B9;&#xFF1A;</p>
<ol>
<li>&#x5B83;&#x7EF4;&#x6301;&#x4E86;&#x7C7B;&#x7684;&#x5C01;&#x88C5;&#x6027;&#x3002;&#x56E0;&#x4E3A;&#x6210;&#x5206;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x7EC6;&#x8282;&#x662F;&#x65B0;&#x5BF9;&#x8C61;&#x770B;&#x4E0D;&#x89C1;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x79CD;&#x590D;&#x7528;&#x53C8;&#x79F0;&#x4E3A;&#x201C;&#x9ED1;&#x7BB1;&#x201D;&#x590D;&#x7528;&#x3002;</li>
<li>&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x4F4E;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x58F0;&#x660E;&#x62BD;&#x8C61;&#x3002;</li>
<li>&#x590D;&#x7528;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x9AD8;&#x3002;&#x8FD9;&#x79CD;&#x590D;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x8FDB;&#x884C;&#xFF0C;&#x65B0;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x5F15;&#x7528;&#x4E0E;&#x6210;&#x5206;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x76F8;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<p>&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x7406;&#x89E3;&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x6C7D;&#x8F66;&#x5206;&#x7C7B;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;</p>
<p>&#x6C7D;&#x8F66;&#x6309;&#x201C;&#x52A8;&#x529B;&#x6E90;&#x201D;&#x5212;&#x5206;&#x53EF;&#x5206;&#x4E3A;&#x6C7D;&#x6CB9;&#x6C7D;&#x8F66;&#x3001;&#x7535;&#x52A8;&#x6C7D;&#x8F66;&#x7B49;&#xFF1B;&#x6309;&#x201C;&#x989C;&#x8272;&#x201D;&#x5212;&#x5206;&#x53EF;&#x5206;&#x4E3A;&#x767D;&#x8272;&#x6C7D;&#x8F66;&#x3001;&#x9ED1;&#x8272;&#x6C7D;&#x8F66;&#x548C;&#x7EA2;&#x8272;&#x6C7D;&#x8F66;&#x7B49;&#x3002;&#x5982;&#x679C;&#x540C;&#x65F6;&#x8003;&#x8651;&#x8FD9;&#x4E24;&#x79CD;&#x5206;&#x7C7B;&#xFF0C;&#x5176;&#x7EC4;&#x5408;&#x5C31;&#x5F88;&#x591A;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;.png" alt="image-20191229173554296" style="zoom:80%;">
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7C7B;&#x56FE;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x590D;&#x7528;&#x4EA7;&#x751F;&#x4E86;&#x5F88;&#x591A;&#x5B50;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x73B0;&#x5728;&#x53C8;&#x6709;&#x65B0;&#x7684;&#x52A8;&#x529B;&#x6E90;&#x6216;&#x8005;&#x65B0;&#x7684;&#x989C;&#x8272;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x518D;&#x5B9A;&#x4E49;&#x65B0;&#x7684;&#x7C7B;&#x3002;&#x6211;&#x4EEC;&#x8BD5;&#x7740;&#x5C06;&#x7EE7;&#x627F;&#x590D;&#x7528;&#x6539;&#x4E3A;&#x805A;&#x5408;&#x590D;&#x7528;&#x770B;&#x4E00;&#x4E0B;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;1.png" alt="image-20191229173554296" style="zoom:80%;">
<h1 class="mume-header" id="4%E5%88%9B%E5%BB%BA%E8%80%85%E6%A8%A1%E5%BC%8F">4&#xFF0C;&#x521B;&#x5EFA;&#x8005;&#x6A21;&#x5F0F;</h1>

<p>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x70B9;&#x662F;&#x201C;&#x600E;&#x6837;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF1F;&#x201D;&#xFF0C;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x70B9;&#x662F;&#x201C;&#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x4F7F;&#x7528;&#x5206;&#x79BB;&#x201D;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x7CFB;&#x7EDF;&#x7684;&#x8026;&#x5408;&#x5EA6;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x7EC6;&#x8282;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#xFF1A;</p>
<ul>
<li>&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</li>
<li>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</li>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x7A0B;&#x6A21;&#x5F0F;</li>
<li>&#x539F;&#x578B;&#x6A21;&#x5F0F;</li>
<li>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</li>
</ul>
<h2 class="mume-header" id="41-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">4.1 &#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h2>

<p>&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#xFF08;Singleton Pattern&#xFF09;&#x662F; Java &#x4E2D;&#x6700;&#x7B80;&#x5355;&#x7684;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E4B;&#x4E00;&#x3002;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5C5E;&#x4E8E;&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x6700;&#x4F73;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#x7C7B;&#xFF0C;&#x8BE5;&#x7C7B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x540C;&#x65F6;&#x786E;&#x4FDD;&#x53EA;&#x6709;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x8BBF;&#x95EE;&#x5176;&#x552F;&#x4E00;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x4F8B;&#x5316;&#x8BE5;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<h3 class="mume-header" id="411-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84">4.1.1 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x6784;</h3>

<p>&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x5355;&#x4F8B;&#x7C7B;&#x3002;&#x53EA;&#x80FD;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x7C7B;</li>
<li>&#x8BBF;&#x95EE;&#x7C7B;&#x3002;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x7C7B;</li>
</ul>
<h3 class="mume-header" id="412-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0">4.1.2 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;</h3>

<blockquote>
<p>&#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5206;&#x7C7B;&#x4E24;&#x79CD;&#xFF1A;</p>
<p>&#x200B;	&#x997F;&#x6C49;&#x5F0F;&#xFF1A;&#x7C7B;&#x52A0;&#x8F7D;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x8BE5;&#x5355;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;</p>
<p>&#x200B;	&#x61D2;&#x6C49;&#x5F0F;&#xFF1A;&#x7C7B;&#x52A0;&#x8F7D;&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x8BE5;&#x5355;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#xFF0C;&#x800C;&#x662F;&#x9996;&#x6B21;&#x4F7F;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;&#x65F6;&#x624D;&#x4F1A;&#x521B;&#x5EFA;</p>
</blockquote>
<ol>
<li>
<p>&#x997F;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;1&#xFF08;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x65B9;&#x5F0F;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x997F;&#x6C49;&#x5F0F; *      &#x9759;&#x6001;&#x53D8;&#x91CF;&#x521B;&#x5EFA;&#x7C7B;&#x7684;&#x5BF9;&#x8C61; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    //&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x521B;&#x5EFA;&#x8BE5;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;    private static Singleton instance = new Singleton();    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        return instance;    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x8BE5;&#x65B9;&#x5F0F;&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x58F0;&#x660E;Singleton&#x7C7B;&#x578B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;instance&#x3002;instance&#x5BF9;&#x8C61;&#x662F;&#x968F;&#x7740;&#x7C7B;&#x7684;&#x52A0;&#x8F7D;&#x800C;&#x521B;&#x5EFA;&#x7684;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x5BF9;&#x8C61;&#x8DB3;&#x591F;&#x5927;&#x7684;&#x8BDD;&#xFF0C;&#x800C;&#x4E00;&#x76F4;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x5185;&#x5B58;&#x7684;&#x6D6A;&#x8D39;&#x3002;</p>
</li>
<li>
<p>&#x997F;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;2&#xFF08;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x65B9;&#x5F0F;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x6076;&#x6C49;&#x5F0F; *      &#x5728;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x521B;&#x5EFA;&#x8BE5;&#x7C7B;&#x5BF9;&#x8C61; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    //&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x521B;&#x5EFA;&#x8BE5;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;    private static Singleton instance;    static {        instance = new Singleton();    }    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        return instance;    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x8BE5;&#x65B9;&#x5F0F;&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x58F0;&#x660E;Singleton&#x7C7B;&#x578B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x800C;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x662F;&#x5728;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#xFF0C;&#x4E5F;&#x662F;&#x5BF9;&#x7740;&#x7C7B;&#x7684;&#x52A0;&#x8F7D;&#x800C;&#x521B;&#x5EFA;&#x3002;&#x6240;&#x4EE5;&#x548C;&#x997F;&#x6C49;&#x5F0F;&#x7684;&#x65B9;&#x5F0F;1&#x57FA;&#x672C;&#x4E0A;&#x4E00;&#x6837;&#xFF0C;&#x5F53;&#x7136;&#x8BE5;&#x65B9;&#x5F0F;&#x4E5F;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x6D6A;&#x8D39;&#x95EE;&#x9898;&#x3002;</p>
</li>
<li>
<p>&#x61D2;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;1&#xFF08;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x61D2;&#x6C49;&#x5F0F; *  &#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    //&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x521B;&#x5EFA;&#x8BE5;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;    private static Singleton instance;    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        if(instance == null) {            instance = new Singleton();        }        return instance;    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8BE5;&#x65B9;&#x5F0F;&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x58F0;&#x660E;Singleton&#x7C7B;&#x578B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x5BF9;&#x8C61;&#x7684;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8D4B;&#x503C;&#x7684;&#x5462;&#xFF1F;&#x5F53;&#x8C03;&#x7528;getInstance()&#x65B9;&#x6CD5;&#x83B7;&#x53D6;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#x624D;&#x521B;&#x5EFA;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x61D2;&#x52A0;&#x8F7D;&#x7684;&#x6548;&#x679C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;</p>
</li>
<li>
<p>&#x61D2;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;2&#xFF08;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x61D2;&#x6C49;&#x5F0F; *  &#x7EBF;&#x7A0B;&#x5B89;&#x5168; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    //&#x5728;&#x6210;&#x5458;&#x4F4D;&#x7F6E;&#x521B;&#x5EFA;&#x8BE5;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;    private static Singleton instance;    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static synchronized Singleton getInstance() {        if(instance == null) {            instance = new Singleton();        }        return instance;    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x8BE5;&#x65B9;&#x5F0F;&#x4E5F;&#x5B9E;&#x73B0;&#x4E86;&#x61D2;&#x52A0;&#x8F7D;&#x6548;&#x679C;&#xFF0C;&#x540C;&#x65F6;&#x53C8;&#x89E3;&#x51B3;&#x4E86;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x5728;getInstance()&#x65B9;&#x6CD5;&#x4E0A;&#x6DFB;&#x52A0;&#x4E86;synchronized&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5BFC;&#x81F4;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x6267;&#x884C;&#x6548;&#x679C;&#x7279;&#x522B;&#x4F4E;&#x3002;&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5728;&#x521D;&#x59CB;&#x5316;instance&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x51FA;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x65E6;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x4E86;&#x3002;</p>
</li>
<li>
<p>&#x61D2;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;3&#xFF08;&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x9501;&#xFF09;</p>
<p>&#x518D;&#x6765;&#x8BA8;&#x8BBA;&#x4E00;&#x4E0B;&#x61D2;&#x6C49;&#x6A21;&#x5F0F;&#x4E2D;&#x52A0;&#x9501;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5BF9;&#x4E8E; <code>getInstance()</code> &#x65B9;&#x6CD5;&#x6765;&#x8BF4;&#xFF0C;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x8BFB;&#x64CD;&#x4F5C;&#xFF0C;&#x8BFB;&#x64CD;&#x4F5C;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6CA1;&#x5FC5;&#x8BA9;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x6301;&#x6709;&#x9501;&#x624D;&#x80FD;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8C03;&#x6574;&#x52A0;&#x9501;&#x7684;&#x65F6;&#x673A;&#x3002;&#x7531;&#x6B64;&#x4E5F;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x79CD;&#x65B0;&#x7684;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#xFF1A;&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x9501;&#x6A21;&#x5F0F;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x65B9;&#x5F0F; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>     <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    private static Singleton instance;   //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {		//&#x7B2C;&#x4E00;&#x6B21;&#x5224;&#x65AD;&#xFF0C;&#x5982;&#x679C;instance&#x4E0D;&#x4E3A;null&#xFF0C;&#x4E0D;&#x8FDB;&#x5165;&#x62A2;&#x9501;&#x9636;&#x6BB5;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5B9E;&#x4F8B;        if(instance == null) {            synchronized (Singleton.class) {                //&#x62A2;&#x5230;&#x9501;&#x4E4B;&#x540E;&#x518D;&#x6B21;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;null                if(instance == null) {                    instance = new Singleton();                }            }        }        return instance;    }}</span>
</pre><p>&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x9501;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x597D;&#x7684;&#x5355;&#x4F8B;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x5355;&#x4F8B;&#x3001;&#x6027;&#x80FD;&#x3001;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x53CC;&#x91CD;&#x68C0;&#x6D4B;&#x9501;&#x6A21;&#x5F0F;&#x770B;&#x4E0A;&#x53BB;&#x5B8C;&#x7F8E;&#x65E0;&#x7F3A;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x7A7A;&#x6307;&#x9488;&#x95EE;&#x9898;&#xFF0C;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x7684;&#x539F;&#x56E0;&#x662F;JVM&#x5728;&#x5B9E;&#x4F8B;&#x5316;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x548C;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x8981;&#x89E3;&#x51B3;&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x9501;&#x6A21;&#x5F0F;&#x5E26;&#x6765;&#x7A7A;&#x6307;&#x9488;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>volatile</code> &#x5173;&#x952E;&#x5B57;, <code>volatile</code> &#x5173;&#x952E;&#x5B57;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x53EF;&#x89C1;&#x6027;&#x548C;&#x6709;&#x5E8F;&#x6027;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x65B9;&#x5F0F; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    private static volatile Singleton instance;   //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {		//&#x7B2C;&#x4E00;&#x6B21;&#x5224;&#x65AD;&#xFF0C;&#x5982;&#x679C;instance&#x4E0D;&#x4E3A;null&#xFF0C;&#x4E0D;&#x8FDB;&#x5165;&#x62A2;&#x9501;&#x9636;&#x6BB5;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5B9E;&#x9645;        if(instance == null) {            synchronized (Singleton.class) {                //&#x62A2;&#x5230;&#x9501;&#x4E4B;&#x540E;&#x518D;&#x6B21;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x7A7A;                if(instance == null) {                    instance = new Singleton();                }            }        }        return instance;    }}</span>
</pre><p><font color="red">&#x5C0F;&#x7ED3;&#xFF1A;</font></p>
<p>&#x6DFB;&#x52A0; <code>volatile</code> &#x5173;&#x952E;&#x5B57;&#x4E4B;&#x540E;&#x7684;&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#x9501;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x5355;&#x4F8B;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#xFF0C;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3002;</p>
</li>
<li>
<p>&#x61D2;&#x6C49;&#x5F0F;-&#x65B9;&#x5F0F;4&#xFF08;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x65B9;&#x5F0F;&#xFF09;</p>
<p>&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x4E2D;&#x5B9E;&#x4F8B;&#x7531;&#x5185;&#x90E8;&#x7C7B;&#x521B;&#x5EFA;&#xFF0C;&#x7531;&#x4E8E; JVM &#x5728;&#x52A0;&#x8F7D;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;, &#x662F;&#x4E0D;&#x4F1A;&#x52A0;&#x8F7D;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x7684;, &#x53EA;&#x6709;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x5C5E;&#x6027;/&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#x624D;&#x4F1A;&#x88AB;&#x52A0;&#x8F7D;, &#x5E76;&#x521D;&#x59CB;&#x5316;&#x5176;&#x9759;&#x6001;&#x5C5E;&#x6027;&#x3002;&#x9759;&#x6001;&#x5C5E;&#x6027;&#x7531;&#x4E8E;&#x88AB; <code>static</code> &#x4FEE;&#x9970;&#xFF0C;&#x4FDD;&#x8BC1;&#x53EA;&#x88AB;&#x5B9E;&#x4F8B;&#x5316;&#x4E00;&#x6B21;&#xFF0C;&#x5E76;&#x4E14;&#x4E25;&#x683C;&#x4FDD;&#x8BC1;&#x5B9E;&#x4F8B;&#x5316;&#x987A;&#x5E8F;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x65B9;&#x5F0F; */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    private static class SingletonHolder {        private static final Singleton INSTANCE = new Singleton();    }    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        return SingletonHolder.INSTANCE;    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x7B2C;&#x4E00;&#x6B21;&#x52A0;&#x8F7D;Singleton&#x7C7B;&#x65F6;&#x4E0D;&#x4F1A;&#x53BB;&#x521D;&#x59CB;&#x5316;INSTANCE&#xFF0C;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;getInstance&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x52A0;&#x8F7D;SingletonHolder</p>
<p>&#x5E76;&#x521D;&#x59CB;&#x5316;INSTANCE&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x80FD;&#x786E;&#x4FDD;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x4E5F;&#x80FD;&#x4FDD;&#x8BC1; Singleton &#x7C7B;&#x7684;&#x552F;&#x4E00;&#x6027;&#x3002;</p>
<p><font color="red">&#x5C0F;&#x7ED3;&#xFF1A;</font></p>
<p>&#x200B;	&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x4F18;&#x79C0;&#x7684;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x4E2D;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;&#x4E00;&#x79CD;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x52A0;&#x4EFB;&#x4F55;&#x9501;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x7684;&#x5B89;&#x5168;&#xFF0C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x548C;&#x7A7A;&#x95F4;&#x7684;&#x6D6A;&#x8D39;&#x3002;</p>
</li>
<li>
<p>&#x679A;&#x4E3E;&#x65B9;&#x5F0F;</p>
<p>&#x679A;&#x4E3E;&#x7C7B;&#x5B9E;&#x73B0;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x662F;&#x6781;&#x529B;&#x63A8;&#x8350;&#x7684;&#x5355;&#x4F8B;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#xFF0C;&#x56E0;&#x4E3A;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x88C5;&#x8F7D;&#x4E00;&#x6B21;&#xFF0C;&#x8BBE;&#x8BA1;&#x8005;&#x5145;&#x5206;&#x7684;&#x5229;&#x7528;&#x4E86;&#x679A;&#x4E3E;&#x7684;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x6765;&#x5B9E;&#x73B0;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#xFF0C;&#x679A;&#x4E3E;&#x7684;&#x5199;&#x6CD5;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x800C;&#x4E14;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x662F;&#x6240;&#x7528;&#x5355;&#x4F8B;&#x5B9E;&#x73B0;&#x4E2D;&#x552F;&#x4E00;&#x4E00;&#x79CD;&#x4E0D;&#x4F1A;&#x88AB;&#x7834;&#x574F;&#x7684;&#x5355;&#x4F8B;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/** * &#x679A;&#x4E3E;&#x65B9;&#x5F0F; */</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    INSTANCE<span class="token punctuation">;</span><span class="token punctuation">}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	&#x679A;&#x4E3E;&#x65B9;&#x5F0F;&#x5C5E;&#x4E8E;&#x6076;&#x6C49;&#x5F0F;&#x65B9;&#x5F0F;&#x3002;</p>
</li>
</ol>
<h3 class="mume-header" id="413-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">4.1.3 &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</h3>

<h4 class="mume-header" id="4131-%E9%97%AE%E9%A2%98%E6%BC%94%E7%A4%BA">4.1.3.1 &#x95EE;&#x9898;&#x6F14;&#x793A;</h4>

<p>&#x7834;&#x574F;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#xFF1A;</p>
<p>&#x4F7F;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x5355;&#x4F8B;&#x7C7B;&#xFF08;Singleton&#xFF09;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x679A;&#x4E3E;&#x65B9;&#x5F0F;&#x9664;&#x5916;&#x3002;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5C04;&#x3002;</p>
<ul>
<li>
<p>&#x5E8F;&#x5217;&#x5316;&#x53CD;&#x5E8F;&#x5217;&#x5316;</p>
<p><strong>Singleton&#x7C7B;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    private static class SingletonHolder {        private static final Singleton INSTANCE = new Singleton();    }    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        return SingletonHolder.INSTANCE;    }}</span>
</pre><p><strong>Test&#x7C7B;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//&#x5F80;&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x5BF9;&#x8C61;        //writeObject2File();        //&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x5BF9;&#x8C61;        Singleton s1 = readObjectFromFile();        Singleton s2 = readObjectFromFile();        //&#x5224;&#x65AD;&#x4E24;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x540E;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;        System.out.println(s1 == s2);    }    private static Singleton readObjectFromFile() throws Exception {        //&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8F93;&#x5165;&#x6D41;&#x5BF9;&#x8C61;        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;C:\\Users\\Think\\Desktop\\a.txt&quot;));        //&#x7B2C;&#x4E00;&#x4E2A;&#x8BFB;&#x53D6;Singleton&#x5BF9;&#x8C61;        Singleton instance = (Singleton) ois.readObject();        return instance;    }    public static void writeObject2File() throws Exception {        //&#x83B7;&#x53D6;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;        Singleton instance = Singleton.getInstance();        //&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8F93;&#x51FA;&#x6D41;        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;C:\\Users\\Think\\Desktop\\a.txt&quot;));        //&#x5C06;instance&#x5BF9;&#x8C61;&#x5199;&#x51FA;&#x5230;&#x6587;&#x4EF6;&#x4E2D;        oos.writeObject(instance);    }}</span>
</pre><blockquote>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x662F;<code>false</code>&#xFF0C;&#x8868;&#x660E;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5DF2;&#x7ECF;&#x7834;&#x574F;&#x4E86;&#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>
</blockquote>
</li>
<li>
<p>&#x53CD;&#x5C04;</p>
<p><strong>Singleton&#x7C7B;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}        private static volatile Singleton instance;    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        if(instance != null) {            return instance;        }        synchronized (Singleton.class) {            if(instance != null) {                return instance;            }            instance = new Singleton();            return instance;        }    }}</span>
</pre><p><strong>Test&#x7C7B;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//&#x83B7;&#x53D6;Singleton&#x7C7B;&#x7684;&#x5B57;&#x8282;&#x7801;&#x5BF9;&#x8C61;        Class clazz = Singleton.class;        //&#x83B7;&#x53D6;Singleton&#x7C7B;&#x7684;&#x79C1;&#x6709;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5BF9;&#x8C61;        Constructor constructor = clazz.getDeclaredConstructor();        //&#x53D6;&#x6D88;&#x8BBF;&#x95EE;&#x68C0;&#x67E5;        constructor.setAccessible(true);        //&#x521B;&#x5EFA;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;s1        Singleton s1 = (Singleton) constructor.newInstance();        //&#x521B;&#x5EFA;Singleton&#x7C7B;&#x7684;&#x5BF9;&#x8C61;s2        Singleton s2 = (Singleton) constructor.newInstance();        //&#x5224;&#x65AD;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x521B;&#x5EFA;&#x7684;&#x4E24;&#x4E2A;Singleton&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;        System.out.println(s1 == s2);    }}</span>
</pre><blockquote>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x662F;<code>false</code>&#xFF0C;&#x8868;&#x660E;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5DF2;&#x7ECF;&#x7834;&#x574F;&#x4E86;&#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</p>
</blockquote>
</li>
</ul>
<blockquote>
<p><font color="red">&#x6CE8;&#x610F;&#xFF1A;</font>&#x679A;&#x4E3E;&#x65B9;&#x5F0F;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
</blockquote>
<h4 class="mume-header" id="4132-%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3">4.1.3.2 &#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;</h4>

<ul>
<li>
<p>&#x5E8F;&#x5217;&#x5316;&#x3001;&#x53CD;&#x5E8F;&#x5217;&#x65B9;&#x5F0F;&#x7834;&#x574F;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</p>
<p>&#x5728;Singleton&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;<code>readResolve()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#x88AB;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x5B9A;&#x4E49;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x8FD4;&#x56DE;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x65B0;new&#x51FA;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p><strong>Singleton&#x7C7B;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {}    private static class SingletonHolder {        private static final Singleton INSTANCE = new Singleton();    }    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        return SingletonHolder.INSTANCE;    }        /**     * &#x4E0B;&#x9762;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x5E8F;&#x5217;&#x5316;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7834;&#x89E3;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;     */    private Object readResolve() {        return SingletonHolder.INSTANCE;    }}</span>
</pre><p><strong>&#x6E90;&#x7801;&#x89E3;&#x6790;&#xFF1A;</strong></p>
<p>ObjectInputStream&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">// if nested read, passHandle contains handle of enclosing object    int outerHandle = passHandle;    try {        Object obj = readObject0(false);//&#x91CD;&#x70B9;&#x67E5;&#x770B;readObject0&#x65B9;&#x6CD5;    .....}    private Object readObject0(boolean unshared) throws IOException {	...    try {		switch (tc) {			...			case TC_OBJECT:				return checkResolve(readOrdinaryObject(unshared));//&#x91CD;&#x70B9;&#x67E5;&#x770B;readOrdinaryObject&#x65B9;&#x6CD5;			...        }    } finally {        depth--;        bin.setBlockDataMode(oldMode);    }    }    private Object readOrdinaryObject(boolean unshared) throws IOException {	...	//isInstantiable &#x8FD4;&#x56DE;true&#xFF0C;&#x6267;&#x884C; desc.newInstance()&#xFF0C;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5355;&#x4F8B;&#x7C7B;&#xFF0C;    obj = desc.isInstantiable() ? desc.newInstance() : null;     ...    // &#x5728;Singleton&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0; readResolve &#x65B9;&#x6CD5;&#x540E; desc.hasReadResolveMethod() &#x65B9;&#x6CD5;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A;true    if (obj != null &amp;&amp; handles.lookupException(passHandle) == null &amp;&amp; desc.hasReadResolveMethod()) {    	// &#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x8C03;&#x7528; Singleton &#x7C7B;&#x4E2D;&#x7684; readResolve &#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x503C;&#x8D4B;&#x503C;&#x7ED9;rep&#x53D8;&#x91CF;    	// &#x8FD9;&#x6837;&#x591A;&#x6B21;&#x8C03;&#x7528;ObjectInputStream&#x7C7B;&#x4E2D;&#x7684;readObject&#x65B9;&#x6CD5;&#xFF0C;&#x7EE7;&#x800C;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;readResolve&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;    	Object rep = desc.invokeReadResolve(obj);     	...    }    return obj;}</span>
</pre></li>
<li>
<p>&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#x7834;&#x89E3;&#x5355;&#x4F8B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token comment">//&#x79C1;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;    private Singleton() {        /*           &#x53CD;&#x5C04;&#x7834;&#x89E3;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x4EE3;&#x7801;        */        if(instance != null) {            throw new RuntimeException();        }    }        private static volatile Singleton instance;    //&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;    public static Singleton getInstance() {        if(instance != null) {            return instance;        }        synchronized (Singleton.class) {            if(instance != null) {                return instance;            }            instance = new Singleton();            return instance;        }    }}</span>
</pre><p><font color="red">&#x8BF4;&#x660E;:</font></p>
<p>&#x200B;	&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6BD4;&#x8F83;&#x597D;&#x7406;&#x89E3;&#x3002;&#x5F53;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#x8C03;&#x7528;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x521B;&#x5EFA;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x629B;&#x5F02;&#x5E38;&#x3002;&#x4E0D;&#x8FD0;&#x884C;&#x6B64;&#x4E2D;&#x64CD;&#x4F5C;&#x3002;</p>
</li>
</ul>
<h3 class="mume-header" id="414-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-runtime%E7%B1%BB">4.1.4 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;-Runtime&#x7C7B;</h3>

<p>Runtime&#x7C7B;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>
<ol>
<li>
<p>&#x901A;&#x8FC7;&#x6E90;&#x4EE3;&#x7801;&#x67E5;&#x770B;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x54EA;&#x513F;&#x79CD;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token doc-comment comment">/**     * Returns the runtime object associated with the current Java application.     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span> are instance     * methods and must be invoked with respect to the current runtime object.     *     * @return  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span> object associated with the current     *          Java application.     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token doc-comment comment">/** Don&apos;t let anyone else instantiate this class */</span>    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;Runtime&#x7C7B;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6076;&#x6C49;&#x5F0F;&#xFF08;&#x9759;&#x6001;&#x5C5E;&#x6027;&#xFF09;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x3002;</p>
</li>
<li>
<p>&#x4F7F;&#x7528;Runtime&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">//&#x83B7;&#x53D6;Runtime&#x7C7B;&#x5BF9;&#x8C61;        Runtime runtime = Runtime.getRuntime();        //&#x8FD4;&#x56DE; Java &#x865A;&#x62DF;&#x673A;&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x603B;&#x91CF;&#x3002;        System.out.println(runtime.totalMemory());        //&#x8FD4;&#x56DE; Java &#x865A;&#x62DF;&#x673A;&#x8BD5;&#x56FE;&#x4F7F;&#x7528;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#x91CF;&#x3002;        System.out.println(runtime.maxMemory());        //&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x547D;&#x4EE4;&#xFF0C;&#x8FD4;&#x56DE;&#x8FDB;&#x7A0B;&#x5BF9;&#x8C61;        Process process = runtime.exec(&quot;ipconfig&quot;);        //&#x83B7;&#x53D6;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x901A;&#x8FC7;&#x8F93;&#x5165;&#x6D41;&#x83B7;&#x53D6;        InputStream inputStream = process.getInputStream();        byte[] arr = new byte[1024 * 1024* 100];        int b = inputStream.read(arr);        System.out.println(new String(arr,0,b,&quot;gbk&quot;));    }}</span>
</pre></li>
</ol>
<h2 class="mume-header" id="42-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2 &#x5DE5;&#x5382;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="421-%E6%A6%82%E8%BF%B0">4.2.1 &#x6982;&#x8FF0;</h3>

<p>&#x9700;&#x6C42;&#xFF1A;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x5496;&#x5561;&#x5E97;&#x70B9;&#x9910;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x5496;&#x5561;&#x7C7B;&#xFF08;Coffee&#xFF09;&#xFF0C;&#x5E76;&#x5B9A;&#x4E49;&#x5176;&#x4E24;&#x4E2A;&#x5B50;&#x7C7B;&#xFF08;&#x7F8E;&#x5F0F;&#x5496;&#x5561;&#x3010;AmericanCoffee&#x3011;&#x548C;&#x62FF;&#x94C1;&#x5496;&#x5561;&#x3010;LatteCoffee&#x3011;&#xFF09;&#xFF1B;&#x518D;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x5496;&#x5561;&#x5E97;&#x7C7B;&#xFF08;CoffeeStore&#xFF09;&#xFF0C;&#x5496;&#x5561;&#x5E97;&#x5177;&#x6709;&#x70B9;&#x5496;&#x5561;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x7C7B;&#x7684;&#x8BBE;&#x8BA1;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5DE5;&#x5382;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5F15;&#x5165;.png" style="zoom:80%;">
<p>&#x5728;java&#x4E2D;&#xFF0C;&#x4E07;&#x7269;&#x7686;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x90FD;&#x9700;&#x8981;&#x521B;&#x5EFA;&#xFF0C;&#x5982;&#x679C;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#x76F4;&#x63A5;new&#x8BE5;&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x4F1A;&#x5BF9;&#x8BE5;&#x5BF9;&#x8C61;&#x8026;&#x5408;&#x4E25;&#x91CD;&#xFF0C;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x8981;&#x66F4;&#x6362;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x6709;new&#x5BF9;&#x8C61;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x904D;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x8FDD;&#x80CC;&#x4E86;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x7684;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EA;&#x548C;&#x5DE5;&#x5382;&#x6253;&#x4EA4;&#x9053;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5F7B;&#x5E95;&#x548C;&#x5BF9;&#x8C61;&#x89E3;&#x8026;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x66F4;&#x6362;&#x5BF9;&#x8C61;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x5DE5;&#x5382;&#x91CC;&#x66F4;&#x6362;&#x8BE5;&#x5BF9;&#x8C61;&#x5373;&#x53EF;&#xFF0C;&#x8FBE;&#x5230;&#x4E86;&#x4E0E;&#x5BF9;&#x8C61;&#x89E3;&#x8026;&#x7684;&#x76EE;&#x7684;&#xFF1B;&#x6240;&#x4EE5;&#x8BF4;&#xFF0C;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x6700;&#x5927;&#x7684;&#x4F18;&#x70B9;&#x5C31;&#x662F;&#xFF1A;<strong>&#x89E3;&#x8026;</strong>&#x3002;</p>
<p>&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#x4F1A;&#x4ECB;&#x7ECD;&#x4E09;&#x79CD;&#x5DE5;&#x5382;&#x7684;&#x4F7F;&#x7528;</p>
<ul>
<li>&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF08;&#x4E0D;&#x5C5E;&#x4E8E;GOF&#x7684;23&#x79CD;&#x7ECF;&#x5178;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF09;</li>
<li>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</li>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</li>
</ul>
<h3 class="mume-header" id="422-%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2.2 &#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</h3>

<p>&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x4E0D;&#x662F;&#x4E00;&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x53CD;&#x800C;&#x6BD4;&#x8F83;&#x50CF;&#x662F;&#x4E00;&#x79CD;&#x7F16;&#x7A0B;&#x4E60;&#x60EF;&#x3002;</p>
<h4 class="mume-header" id="4221-%E7%BB%93%E6%9E%84">4.2.2.1 &#x7ED3;&#x6784;</h4>

<p>&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x5305;&#x542B;&#x5982;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x4EA7;&#x54C1; &#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x63CF;&#x8FF0;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x6027;&#x548C;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x4EA7;&#x54C1; &#xFF1A;&#x5B9E;&#x73B0;&#x6216;&#x8005;&#x7EE7;&#x627F;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x7684;&#x5B50;&#x7C7B;</li>
<li>&#x5177;&#x4F53;&#x5DE5;&#x5382; &#xFF1A;&#x63D0;&#x4F9B;&#x4E86;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8C03;&#x7528;&#x8005;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x4EA7;&#x54C1;&#x3002;</li>
</ul>
<h4 class="mume-header" id="4222-%E5%AE%9E%E7%8E%B0">4.2.2.2 &#x5B9E;&#x73B0;</h4>

<p>&#x73B0;&#x5728;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x5BF9;&#x4E0A;&#x9762;&#x6848;&#x4F8B;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#xFF0C;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;.png" style="zoom:70%;">
<p>&#x5DE5;&#x5382;&#x7C7B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;americano&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5DE5;&#x5382;&#xFF08;factory&#xFF09;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x4E00;&#x65E6;&#x6709;&#x4E86;SimpleCoffeeFactory&#xFF0C;CoffeeStore&#x7C7B;&#x4E2D;&#x7684;orderCoffee()&#x5C31;&#x53D8;&#x6210;&#x6B64;&#x5BF9;&#x8C61;&#x7684;&#x5BA2;&#x6237;&#xFF0C;&#x540E;&#x671F;&#x5982;&#x679C;&#x9700;&#x8981;Coffee&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x4ECE;&#x5DE5;&#x5382;&#x4E2D;&#x83B7;&#x53D6;&#x5373;&#x53EF;&#x3002;&#x8FD9;&#x6837;&#x4E5F;&#x5C31;&#x89E3;&#x9664;&#x4E86;&#x548C;Coffee&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x540C;&#x65F6;&#x53C8;&#x4EA7;&#x751F;&#x4E86;&#x65B0;&#x7684;&#x8026;&#x5408;&#xFF0C;CoffeeStore&#x5BF9;&#x8C61;&#x548C;SimpleCoffeeFactory&#x5DE5;&#x5382;&#x5BF9;&#x8C61;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x5DE5;&#x5382;&#x5BF9;&#x8C61;&#x548C;&#x5546;&#x54C1;&#x5BF9;&#x8C61;&#x7684;&#x8026;&#x5408;&#x3002;</p>
<p>&#x540E;&#x671F;&#x5982;&#x679C;&#x518D;&#x52A0;&#x65B0;&#x54C1;&#x79CD;&#x7684;&#x5496;&#x5561;&#xFF0C;&#x6211;&#x4EEC;&#x52BF;&#x5FC5;&#x8981;&#x9700;&#x6C42;&#x4FEE;&#x6539;SimpleCoffeeFactory&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FDD;&#x53CD;&#x4E86;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;&#x5DE5;&#x5382;&#x7C7B;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x80FD;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x521B;&#x5EFA;&#x7F8E;&#x56E2;&#x5916;&#x5356;&#x7B49;&#xFF0C;&#x8FD9;&#x6837;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5DE5;&#x5382;&#x7C7B;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7701;&#x53BB;&#x5176;&#x4ED6;&#x7684;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x3002;</p>
<h4 class="mume-header" id="4224-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.2.4 &#x4F18;&#x7F3A;&#x70B9;</h4>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<p>&#x5C01;&#x88C5;&#x4E86;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x3002;&#x628A;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C42;&#x5206;&#x5F00;&#xFF0C;&#x8FD9;&#x6837;&#x4EE5;&#x540E;&#x5C31;&#x907F;&#x514D;&#x4E86;&#x4FEE;&#x6539;&#x5BA2;&#x6237;&#x4EE3;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x65B0;&#x4EA7;&#x54C1;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x539F;&#x4EE3;&#x7801;&#x4E2D;&#x4FEE;&#x6539;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x964D;&#x4F4E;&#x4E86;&#x5BA2;&#x6237;&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x7684;&#x53EF;&#x80FD;&#x6027;&#xFF0C;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x6269;&#x5C55;&#x3002;</p>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x589E;&#x52A0;&#x65B0;&#x4EA7;&#x54C1;&#x65F6;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5DE5;&#x5382;&#x7C7B;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FDD;&#x80CC;&#x4E86;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D;&#x3002;</p>
<h4 class="mume-header" id="4223-%E6%89%A9%E5%B1%95">4.2.2.3 &#x6269;&#x5C55;</h4>

<p><strong>&#x9759;&#x6001;&#x5DE5;&#x5382;</strong></p>
<p>&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x4E5F;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x4EBA;&#x5C06;&#x5DE5;&#x5382;&#x7C7B;&#x4E2D;&#x7684;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x529F;&#x80FD;&#x5B9A;&#x4E49;&#x4E3A;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x9759;&#x6001;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x4E5F;&#x4E0D;&#x662F;23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;americano&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="423-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">4.2.3 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</h3>

<p>&#x9488;&#x5BF9;&#x4E0A;&#x4F8B;&#x4E2D;&#x7684;&#x7F3A;&#x70B9;&#xFF0C;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#xFF0C;&#x5B8C;&#x5168;&#x9075;&#x5FAA;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;</p>
<h4 class="mume-header" id="4231-%E6%A6%82%E5%BF%B5">4.2.3.1 &#x6982;&#x5FF5;</h4>

<p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8BA9;&#x5B50;&#x7C7B;&#x51B3;&#x5B9A;&#x5B9E;&#x4F8B;&#x5316;&#x54EA;&#x4E2A;&#x4EA7;&#x54C1;&#x7C7B;&#x5BF9;&#x8C61;&#x3002;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x4F7F;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x5EF6;&#x8FDF;&#x5230;&#x5176;&#x5DE5;&#x5382;&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
<h4 class="mume-header" id="4232-%E7%BB%93%E6%9E%84">4.2.3.2 &#x7ED3;&#x6784;</h4>

<p>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#xFF08;Abstract Factory&#xFF09;&#xFF1A;&#x63D0;&#x4F9B;&#x4E86;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8C03;&#x7528;&#x8005;&#x901A;&#x8FC7;&#x5B83;&#x8BBF;&#x95EE;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x7684;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x5DE5;&#x5382;&#xFF08;ConcreteFactory&#xFF09;&#xFF1A;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x4E2D;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x5B8C;&#x6210;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#xFF08;Product&#xFF09;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x63CF;&#x8FF0;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x6027;&#x548C;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#xFF08;ConcreteProduct&#xFF09;&#xFF1A;&#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x89D2;&#x8272;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x6765;&#x521B;&#x5EFA;&#xFF0C;&#x5B83;&#x540C;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x4E4B;&#x95F4;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x3002;</li>
</ul>
<h4 class="mume-header" id="4233-%E5%AE%9E%E7%8E%B0">4.2.3.3 &#x5B9E;&#x73B0;</h4>

<p>&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x5BF9;&#x4E0A;&#x4F8B;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#xFF0C;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;.png" style="zoom:70%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5177;&#x4F53;&#x5DE5;&#x5382;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5496;&#x5561;&#x5E97;&#x7C7B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4ECE;&#x4EE5;&#x4E0A;&#x7684;&#x7F16;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8981;&#x589E;&#x52A0;&#x4EA7;&#x54C1;&#x7C7B;&#x65F6;&#x4E5F;&#x8981;&#x76F8;&#x5E94;&#x5730;&#x589E;&#x52A0;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5DE5;&#x5382;&#x7C7B;&#x7684;&#x4EE3;&#x7801;&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x89E3;&#x51B3;&#x4E86;&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x7684;&#x7F3A;&#x70B9;&#x3002;</p>
<p>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x662F;&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x7684;&#x8FDB;&#x4E00;&#x6B65;&#x62BD;&#x8C61;&#x3002;&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x4E86;&#x591A;&#x6001;&#x6027;&#xFF0C;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x4FDD;&#x6301;&#x4E86;&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x800C;&#x4E14;&#x514B;&#x670D;&#x4E86;&#x5B83;&#x7684;&#x7F3A;&#x70B9;&#x3002;</p>
<h4 class="mume-header" id="4234-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.3.4 &#x4F18;&#x7F3A;&#x70B9;</h4>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x7684;&#x540D;&#x79F0;&#x5C31;&#x53EF;&#x5F97;&#x5230;&#x6240;&#x8981;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x65E0;&#x987B;&#x77E5;&#x9053;&#x4EA7;&#x54C1;&#x7684;&#x5177;&#x4F53;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF1B;</li>
<li>&#x5728;&#x7CFB;&#x7EDF;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x4EA7;&#x54C1;&#x65F6;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7C7B;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x65E0;&#x987B;&#x5BF9;&#x539F;&#x5DE5;&#x5382;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x6EE1;&#x8DB3;&#x5F00;&#x95ED;&#x539F;&#x5219;&#xFF1B;</li>
</ul>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x6BCF;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x5C31;&#x8981;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7C7B;&#x548C;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x8FD9;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x3002;</li>
</ul>
<h3 class="mume-header" id="424-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2.4 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</h3>

<p>&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x4E2D;&#x8003;&#x8651;&#x7684;&#x662F;&#x4E00;&#x7C7B;&#x4EA7;&#x54C1;&#x7684;&#x751F;&#x4EA7;&#xFF0C;&#x5982;&#x755C;&#x7267;&#x573A;&#x53EA;&#x517B;&#x52A8;&#x7269;&#x3001;&#x7535;&#x89C6;&#x673A;&#x5382;&#x53EA;&#x751F;&#x4EA7;&#x7535;&#x89C6;&#x673A;&#x3001;&#x4F20;&#x667A;&#x64AD;&#x5BA2;&#x53EA;&#x57F9;&#x517B;&#x8BA1;&#x7B97;&#x673A;&#x8F6F;&#x4EF6;&#x4E13;&#x4E1A;&#x7684;&#x5B66;&#x751F;&#x7B49;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x5DE5;&#x5382;&#x53EA;&#x751F;&#x4EA7;&#x540C;&#x79CD;&#x7C7B;&#x4EA7;&#x54C1;&#xFF0C;&#x540C;&#x79CD;&#x7C7B;&#x4EA7;&#x54C1;&#x79F0;&#x4E3A;&#x540C;&#x7B49;&#x7EA7;&#x4EA7;&#x54C1;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF1A;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x53EA;&#x8003;&#x8651;&#x751F;&#x4EA7;&#x540C;&#x7B49;&#x7EA7;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x73B0;&#x5B9E;&#x751F;&#x6D3B;&#x4E2D;&#x8BB8;&#x591A;&#x5DE5;&#x5382;&#x662F;&#x7EFC;&#x5408;&#x578B;&#x7684;&#x5DE5;&#x5382;&#xFF0C;&#x80FD;&#x751F;&#x4EA7;&#x591A;&#x7B49;&#x7EA7;&#xFF08;&#x79CD;&#x7C7B;&#xFF09; &#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x5982;&#x7535;&#x5668;&#x5382;&#x65E2;&#x751F;&#x4EA7;&#x7535;&#x89C6;&#x673A;&#x53C8;&#x751F;&#x4EA7;&#x6D17;&#x8863;&#x673A;&#x6216;&#x7A7A;&#x8C03;&#xFF0C;&#x5927;&#x5B66;&#x65E2;&#x6709;&#x8F6F;&#x4EF6;&#x4E13;&#x4E1A;&#x53C8;&#x6709;&#x751F;&#x7269;&#x4E13;&#x4E1A;&#x7B49;&#x3002;</p>
<p>&#x672C;&#x8282;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x5C06;&#x8003;&#x8651;&#x591A;&#x7B49;&#x7EA7;&#x4EA7;&#x54C1;&#x7684;&#x751F;&#x4EA7;&#xFF0C;&#x5C06;&#x540C;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x6240;&#x751F;&#x4EA7;&#x7684;&#x4F4D;&#x4E8E;&#x4E0D;&#x540C;&#x7B49;&#x7EA7;&#x7684;&#x4E00;&#x7EC4;&#x4EA7;&#x54C1;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#xFF0C;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x6A2A;&#x8F74;&#x662F;&#x4EA7;&#x54C1;&#x7B49;&#x7EA7;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x540C;&#x4E00;&#x7C7B;&#x4EA7;&#x54C1;&#xFF1B;&#x7EB5;&#x8F74;&#x662F;&#x4EA7;&#x54C1;&#x65CF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x540C;&#x4E00;&#x54C1;&#x724C;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x540C;&#x4E00;&#x54C1;&#x724C;&#x7684;&#x4EA7;&#x54C1;&#x4EA7;&#x81EA;&#x540C;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200401214509176.png" style="zoom:67%;">
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200401222951963.png" style="zoom:67%;">
<h4 class="mume-header" id="4241-%E6%A6%82%E5%BF%B5">4.2.4.1 &#x6982;&#x5FF5;</h4>

<p>&#x662F;&#x4E00;&#x79CD;&#x4E3A;&#x8BBF;&#x95EE;&#x7C7B;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x4E00;&#x7EC4;&#x76F8;&#x5173;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4E14;&#x8BBF;&#x95EE;&#x7C7B;&#x65E0;&#x987B;&#x6307;&#x5B9A;&#x6240;&#x8981;&#x4EA7;&#x54C1;&#x7684;&#x5177;&#x4F53;&#x7C7B;&#x5C31;&#x80FD;&#x5F97;&#x5230;&#x540C;&#x65CF;&#x7684;&#x4E0D;&#x540C;&#x7B49;&#x7EA7;&#x7684;&#x4EA7;&#x54C1;&#x7684;&#x6A21;&#x5F0F;&#x7ED3;&#x6784;&#x3002;</p>
<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x662F;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x7684;&#x5347;&#x7EA7;&#x7248;&#x672C;&#xFF0C;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x53EA;&#x751F;&#x4EA7;&#x4E00;&#x4E2A;&#x7B49;&#x7EA7;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x800C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x53EF;&#x751F;&#x4EA7;&#x591A;&#x4E2A;&#x7B49;&#x7EA7;&#x7684;&#x4EA7;&#x54C1;&#x3002;</p>
<h4 class="mume-header" id="4242-%E7%BB%93%E6%9E%84">4.2.4.2 &#x7ED3;&#x6784;</h4>

<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#xFF08;Abstract Factory&#xFF09;&#xFF1A;&#x63D0;&#x4F9B;&#x4E86;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7B49;&#x7EA7;&#x7684;&#x4EA7;&#x54C1;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x5DE5;&#x5382;&#xFF08;Concrete Factory&#xFF09;&#xFF1A;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x4E2D;&#x7684;&#x591A;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x5B8C;&#x6210;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#xFF08;Product&#xFF09;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x63CF;&#x8FF0;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x6027;&#x548C;&#x529F;&#x80FD;&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x6709;&#x591A;&#x4E2A;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#xFF08;ConcreteProduct&#xFF09;&#xFF1A;&#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x89D2;&#x8272;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x6765;&#x521B;&#x5EFA;&#xFF0C;&#x5B83; &#x540C;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x4E4B;&#x95F4;&#x662F;&#x591A;&#x5BF9;&#x4E00;&#x7684;&#x5173;&#x7CFB;&#x3002;</li>
</ul>
<h4 class="mume-header" id="4242-%E5%AE%9E%E7%8E%B0">4.2.4.2 &#x5B9E;&#x73B0;</h4>

<p>&#x73B0;&#x5496;&#x5561;&#x5E97;&#x4E1A;&#x52A1;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x4E0D;&#x4EC5;&#x8981;&#x751F;&#x4EA7;&#x5496;&#x5561;&#x8FD8;&#x8981;&#x751F;&#x4EA7;&#x751C;&#x70B9;&#xFF0C;&#x5982;&#x63D0;&#x62C9;&#x7C73;&#x82CF;&#x3001;&#x62B9;&#x8336;&#x6155;&#x65AF;&#x7B49;&#xFF0C;&#x8981;&#x662F;&#x6309;&#x7167;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x63D0;&#x62C9;&#x7C73;&#x82CF;&#x7C7B;&#x3001;&#x62B9;&#x8336;&#x6155;&#x65AF;&#x7C7B;&#x3001;&#x63D0;&#x62C9;&#x7C73;&#x82CF;&#x5DE5;&#x5382;&#x3001;&#x62B9;&#x8336;&#x6155;&#x65AF;&#x5DE5;&#x5382;&#x3001;&#x751C;&#x70B9;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x751F;&#x7C7B;&#x7206;&#x70B8;&#x60C5;&#x51B5;&#x3002;&#x5176;&#x4E2D;&#x62FF;&#x94C1;&#x5496;&#x5561;&#x3001;&#x7F8E;&#x5F0F;&#x5496;&#x5561;&#x662F;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x7B49;&#x7EA7;&#xFF0C;&#x90FD;&#x662F;&#x5496;&#x5561;&#xFF1B;&#x63D0;&#x62C9;&#x7C73;&#x82CF;&#x3001;&#x62B9;&#x8336;&#x6155;&#x65AF;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x7B49;&#x7EA7;&#xFF1B;&#x62FF;&#x94C1;&#x5496;&#x5561;&#x548C;&#x63D0;&#x62C9;&#x7C73;&#x82CF;&#x662F;&#x540C;&#x4E00;&#x4EA7;&#x54C1;&#x65CF;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x90FD;&#x5C5E;&#x4E8E;&#x610F;&#x5927;&#x5229;&#x98CE;&#x5473;&#xFF09;&#xFF0C;&#x7F8E;&#x5F0F;&#x5496;&#x5561;&#x548C;&#x62B9;&#x8336;&#x6155;&#x65AF;&#x662F;&#x540C;&#x4E00;&#x4EA7;&#x54C1;&#x65CF;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x90FD;&#x5C5E;&#x4E8E;&#x7F8E;&#x5F0F;&#x98CE;&#x5473;&#xFF09;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x6848;&#x4F8B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x5B9E;&#x73B0;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;.png" style="zoom:67%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5177;&#x4F53;&#x5DE5;&#x5382;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x7F8E;&#x5F0F;&#x751C;&#x70B9;&#x5DE5;&#x5382;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//&#x610F;&#x5927;&#x5229;&#x98CE;&#x5473;&#x751C;&#x70B9;&#x5DE5;&#x5382;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5982;&#x679C;&#x8981;&#x52A0;&#x540C;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x7684;&#x8BDD;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x518D;&#x52A0;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x5373;&#x53EF;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5176;&#x4ED6;&#x7684;&#x7C7B;&#x3002;</p>
<h4 class="mume-header" id="4243-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.4.3 &#x4F18;&#x7F3A;&#x70B9;</h4>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x4E2D;&#x7684;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x88AB;&#x8BBE;&#x8BA1;&#x6210;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x65F6;&#xFF0C;&#x5B83;&#x80FD;&#x4FDD;&#x8BC1;&#x5BA2;&#x6237;&#x7AEF;&#x59CB;&#x7EC8;&#x53EA;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x5F53;&#x4EA7;&#x54C1;&#x65CF;&#x4E2D;&#x9700;&#x8981;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4EA7;&#x54C1;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x90FD;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;</p>
<h4 class="mume-header" id="4244-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.2.4.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</h4>

<ul>
<li>
<p>&#x5F53;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x76F8;&#x4E92;&#x5173;&#x8054;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x7684;&#x4EA7;&#x54C1;&#x65CF;&#x65F6;&#xFF0C;&#x5982;&#x7535;&#x5668;&#x5DE5;&#x5382;&#x4E2D;&#x7684;&#x7535;&#x89C6;&#x673A;&#x3001;&#x6D17;&#x8863;&#x673A;&#x3001;&#x7A7A;&#x8C03;&#x7B49;&#x3002;</p>
</li>
<li>
<p>&#x7CFB;&#x7EDF;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#xFF0C;&#x4F46;&#x6BCF;&#x6B21;&#x53EA;&#x4F7F;&#x7528;&#x5176;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x65CF;&#x4EA7;&#x54C1;&#x3002;&#x5982;&#x6709;&#x4EBA;&#x53EA;&#x559C;&#x6B22;&#x7A7F;&#x67D0;&#x4E00;&#x4E2A;&#x54C1;&#x724C;&#x7684;&#x8863;&#x670D;&#x548C;&#x978B;&#x3002;</p>
</li>
<li>
<p>&#x7CFB;&#x7EDF;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4EA7;&#x54C1;&#x7684;&#x7C7B;&#x5E93;&#xFF0C;&#x4E14;&#x6240;&#x6709;&#x4EA7;&#x54C1;&#x7684;&#x63A5;&#x53E3;&#x76F8;&#x540C;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x4F9D;&#x8D56;&#x4EA7;&#x54C1;&#x5B9E;&#x4F8B;&#x7684;&#x521B;&#x5EFA;&#x7EC6;&#x8282;&#x548C;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x3002;</p>
</li>
</ul>
<p>&#x5982;&#xFF1A;&#x8F93;&#x5165;&#x6CD5;&#x6362;&#x76AE;&#x80A4;&#xFF0C;&#x4E00;&#x6574;&#x5957;&#x4E00;&#x8D77;&#x6362;&#x3002;&#x751F;&#x6210;&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p>
<h3 class="mume-header" id="425-%E6%A8%A1%E5%BC%8F%E6%89%A9%E5%B1%95">4.2.5 &#x6A21;&#x5F0F;&#x6269;&#x5C55;</h3>

<p><strong>&#x7B80;&#x5355;&#x5DE5;&#x5382;+&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x89E3;&#x9664;&#x8026;&#x5408;</strong></p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;+&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;&#x89E3;&#x9664;&#x5DE5;&#x5382;&#x5BF9;&#x8C61;&#x548C;&#x4EA7;&#x54C1;&#x5BF9;&#x8C61;&#x7684;&#x8026;&#x5408;&#x3002;&#x5728;&#x5DE5;&#x5382;&#x7C7B;&#x4E2D;&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5168;&#x7C7B;&#x540D;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x679C;&#x9700;&#x8981;&#x5BF9;&#x8C61;&#xFF0C;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x83B7;&#x53D6;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<p>&#x4E3A;&#x4E86;&#x6F14;&#x793A;&#x65B9;&#x4FBF;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;properties&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x540D;&#x79F0;&#x4E3A;bean.properties</p>
<pre data-role="codeBlock" data-info="properties" class="language-properties"><span class="token attr-name">american</span><span class="token punctuation">=</span><span class="token attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token attr-name">latte</span><span class="token punctuation">=</span><span class="token attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</pre><p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x6539;&#x8FDB;&#x5DE5;&#x5382;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;bean.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//&#x904D;&#x5386;Properties&#x96C6;&#x5408;&#x5BF9;&#x8C61;</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//&#x6839;&#x636E;&#x952E;&#x83B7;&#x53D6;&#x503C;&#xFF08;&#x5168;&#x7C7B;&#x540D;&#xFF09;</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//&#x83B7;&#x53D6;&#x5B57;&#x8282;&#x7801;&#x5BF9;&#x8C61;</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x952E;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x540D;&#x79F0;&#xFF0C;&#x503C;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#x5BF9;&#x8C61;&#xFF09;&#xFF0C;&#x800C;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x5199;&#x5728;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#xFF0C;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x53EA;&#x9700;&#x8981;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<h3 class="mume-header" id="426-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-collectioniterator%E6%96%B9%E6%B3%95">4.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;-Collection.iterator&#x65B9;&#x6CD5;</h3>

<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EE4;&#x72D0;&#x51B2;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x98CE;&#x6E05;&#x626C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EFB;&#x6211;&#x884C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x83B7;&#x53D6;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x5F88;&#x719F;&#xFF0C;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;&#x96C6;&#x5408;&#xFF0C;&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x800C;&#x5355;&#x5217;&#x96C6;&#x5408;&#x83B7;&#x53D6;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x770B;&#x901A;&#x8FC7;&#x7C7B;&#x56FE;&#x770B;&#x770B;&#x7ED3;&#x6784;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\JDK&#x6E90;&#x7801;&#x89E3;&#x6790;.png" style="zoom:75%;">
<p>Collection&#x63A5;&#x53E3;&#x662F;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;ArrayList&#x662F;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#xFF1B;Iterator&#x63A5;&#x53E3;&#x662F;&#x62BD;&#x8C61;&#x5546;&#x54C1;&#x7C7B;&#xFF0C;ArrayList&#x7C7B;&#x4E2D;&#x7684;Iter&#x5185;&#x90E8;&#x7C7B;&#x662F;&#x5177;&#x4F53;&#x7684;&#x5546;&#x54C1;&#x7C7B;&#x3002;&#x5728;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x4E2D;iterator()&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x5177;&#x4F53;&#x7684;&#x5546;&#x54C1;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<blockquote>
<p>&#x53E6;&#xFF1A;</p>
<p>&#x200B;	1,DateForamt&#x7C7B;&#x4E2D;&#x7684;getInstance()&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF1B;</p>
<p>&#x200B;	2,Calendar&#x7C7B;&#x4E2D;&#x7684;getInstance()&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF1B;</p>
</blockquote>
<h2 class="mume-header" id="43-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F">4.3 &#x539F;&#x578B;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="431-%E6%A6%82%E8%BF%B0">4.3.1 &#x6982;&#x8FF0;</h3>

<p>&#x7528;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x7684;&#x5B9E;&#x4F8B;&#x4F5C;&#x4E3A;&#x539F;&#x578B;&#xFF0C;&#x901A;&#x8FC7;&#x590D;&#x5236;&#x8BE5;&#x539F;&#x578B;&#x5BF9;&#x8C61;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x548C;&#x539F;&#x578B;&#x5BF9;&#x8C61;&#x76F8;&#x540C;&#x7684;&#x65B0;&#x5BF9;&#x8C61;&#x3002;</p>
<h3 class="mume-header" id="432-%E7%BB%93%E6%9E%84">4.3.2 &#x7ED3;&#x6784;</h3>

<p>&#x539F;&#x578B;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x5982;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x539F;&#x578B;&#x7C7B;&#xFF1A;&#x89C4;&#x5B9A;&#x4E86;&#x5177;&#x4F53;&#x539F;&#x578B;&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x7684;&#x7684; clone() &#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x539F;&#x578B;&#x7C7B;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x539F;&#x578B;&#x7C7B;&#x7684; clone() &#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x662F;&#x53EF;&#x88AB;&#x590D;&#x5236;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x8BBF;&#x95EE;&#x7C7B;&#xFF1A;&#x4F7F;&#x7528;&#x5177;&#x4F53;&#x539F;&#x578B;&#x7C7B;&#x4E2D;&#x7684; clone() &#x65B9;&#x6CD5;&#x6765;&#x590D;&#x5236;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<p>&#x63A5;&#x53E3;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5C%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F.png" alt></p>
<h3 class="mume-header" id="433-%E5%AE%9E%E7%8E%B0">4.3.3 &#x5B9E;&#x73B0;</h3>

<p>&#x539F;&#x578B;&#x6A21;&#x5F0F;&#x7684;&#x514B;&#x9686;&#x5206;&#x4E3A;&#x6D45;&#x514B;&#x9686;&#x548C;&#x6DF1;&#x514B;&#x9686;&#x3002;</p>
<blockquote>
<p>&#x6D45;&#x514B;&#x9686;&#xFF1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x5BF9;&#x8C61;&#xFF0C;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x539F;&#x6765;&#x5BF9;&#x8C61;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#xFF0C;&#x5BF9;&#x4E8E;&#x975E;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5C5E;&#x6027;&#xFF0C;&#x4ECD;&#x6307;&#x5411;&#x539F;&#x6709;&#x5C5E;&#x6027;&#x6240;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x3002;</p>
<p>&#x6DF1;&#x514B;&#x9686;&#xFF1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x5BF9;&#x8C61;&#xFF0C;&#x5C5E;&#x6027;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x4E5F;&#x4F1A;&#x88AB;&#x514B;&#x9686;&#xFF0C;&#x4E0D;&#x518D;&#x6307;&#x5411;&#x539F;&#x6709;&#x5BF9;&#x8C61;&#x5730;&#x5740;&#x3002;</p>
</blockquote>
<p>Java&#x4E2D;&#x7684;Object&#x7C7B;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86; <code>clone()</code> &#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x6D45;&#x514B;&#x9686;&#x3002; Cloneable &#x63A5;&#x53E3;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x7C7B;&#x56FE;&#x4E2D;&#x7684;&#x62BD;&#x8C61;&#x539F;&#x578B;&#x7C7B;&#xFF0C;&#x800C;&#x5B9E;&#x73B0;&#x4E86;Cloneable&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5C31;&#x662F;&#x5177;&#x4F53;&#x7684;&#x539F;&#x578B;&#x7C7B;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>Realizetype&#xFF08;&#x5177;&#x4F53;&#x7684;&#x539F;&#x578B;&#x7C7B;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5177;&#x4F53;&#x7684;&#x539F;&#x578B;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5177;&#x4F53;&#x539F;&#x578B;&#x590D;&#x5236;&#x6210;&#x529F;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</pre><p><strong>PrototypeTest&#xFF08;&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;&#x7C7B;&#xFF09;&#xFF1A;</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5BF9;&#x8C61;r1&#x548C;r2&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1F;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="434-%E6%A1%88%E4%BE%8B">4.3.4 &#x6848;&#x4F8B;</h3>

<p><strong>&#x7528;&#x539F;&#x578B;&#x6A21;&#x5F0F;&#x751F;&#x6210;&#x201C;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x201D;&#x5956;&#x72B6;</strong></p>
<p>&#x540C;&#x4E00;&#x5B66;&#x6821;&#x7684;&#x201C;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x201D;&#x5956;&#x72B6;&#x9664;&#x4E86;&#x83B7;&#x5956;&#x4EBA;&#x59D3;&#x540D;&#x4E0D;&#x540C;&#xFF0C;&#x5176;&#x4ED6;&#x90FD;&#x76F8;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x539F;&#x578B;&#x6A21;&#x5F0F;&#x590D;&#x5236;&#x591A;&#x4E2A;&#x201C;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x201D;&#x5956;&#x72B6;&#x51FA;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4FEE;&#x6539;&#x5956;&#x72B6;&#x4E0A;&#x7684;&#x540D;&#x5B57;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x539F;&#x578B;&#x6A21;&#x5F0F;1.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x5956;&#x72B6;&#x7C7B;public class Citation implements Cloneable {    private String name;    public void setName(String name) {        this.name = name;    }    public String getName() {        return (this.name);    }    public void show() {        System.out.println(name + &quot;&#x540C;&#x5B66;&#xFF1A;&#x5728;2020&#x5B66;&#x5E74;&#x7B2C;&#x4E00;&#x5B66;&#x671F;&#x4E2D;&#x8868;&#x73B0;&#x4F18;&#x79C0;&#xFF0C;&#x88AB;&#x8BC4;&#x4E3A;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x3002;&#x7279;&#x53D1;&#x6B64;&#x72B6;&#xFF01;&quot;);    }    @Override    public Citation clone() throws CloneNotSupportedException {        return (Citation) super.clone();    }}//&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;&#x7C7B;public class CitationTest {    public static void main(String[] args) throws CloneNotSupportedException {        Citation c1 = new Citation();        c1.setName(&quot;&#x5F20;&#x4E09;&quot;);        //&#x590D;&#x5236;&#x5956;&#x72B6;        Citation c2 = c1.clone();        //&#x5C06;&#x5956;&#x72B6;&#x7684;&#x540D;&#x5B57;&#x4FEE;&#x6539;&#x674E;&#x56DB;        c2.setName(&quot;&#x674E;&#x56DB;&quot;);        c1.show();        c2.show();    }}</span>
</pre><h3 class="mume-header" id="435-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.3.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x539F;&#x578B;&#x6A21;&#x5F0F;&#x5FEB;&#x6377;&#x7684;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x6027;&#x80FD;&#x548C;&#x5B89;&#x5168;&#x8981;&#x6C42;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;</li>
</ul>
<h3 class="mume-header" id="436-%E6%89%A9%E5%B1%95%E6%B7%B1%E5%85%8B%E9%9A%86">4.3.6 &#x6269;&#x5C55;&#xFF08;&#x6DF1;&#x514B;&#x9686;&#xFF09;</h3>

<p>&#x5C06;&#x4E0A;&#x9762;&#x7684;&#x201C;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x201D;&#x5956;&#x72B6;&#x7684;&#x6848;&#x4F8B;&#x4E2D;Citation&#x7C7B;&#x7684;name&#x5C5E;&#x6027;&#x4FEE;&#x6539;&#x4E3A;Student&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x5956;&#x72B6;&#x7C7B;public class Citation implements Cloneable {    private Student stu;    public Student getStu() {        return stu;    }    public void setStu(Student stu) {        this.stu = stu;    }    void show() {        System.out.println(stu.getName() + &quot;&#x540C;&#x5B66;&#xFF1A;&#x5728;2020&#x5B66;&#x5E74;&#x7B2C;&#x4E00;&#x5B66;&#x671F;&#x4E2D;&#x8868;&#x73B0;&#x4F18;&#x79C0;&#xFF0C;&#x88AB;&#x8BC4;&#x4E3A;&#x4E09;&#x597D;&#x5B66;&#x751F;&#x3002;&#x7279;&#x53D1;&#x6B64;&#x72B6;&#xFF01;&quot;);    }    @Override    public Citation clone() throws CloneNotSupportedException {        return (Citation) super.clone();    }}//&#x5B66;&#x751F;&#x7C7B;public class Student {    private String name;    private String address;    public Student(String name, String address) {        this.name = name;        this.address = address;    }    public Student() {    }    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }    public String getAddress() {        return address;    }    public void setAddress(String address) {        this.address = address;    }}//&#x6D4B;&#x8BD5;&#x7C7B;public class CitationTest {    public static void main(String[] args) throws CloneNotSupportedException {        Citation c1 = new Citation();        Student stu = new Student(&quot;&#x5F20;&#x4E09;&quot;, &quot;&#x897F;&#x5B89;&quot;);        c1.setStu(stu);        //&#x590D;&#x5236;&#x5956;&#x72B6;        Citation c2 = c1.clone();        //&#x83B7;&#x53D6;c2&#x5956;&#x72B6;&#x6240;&#x5C5E;&#x5B66;&#x751F;&#x5BF9;&#x8C61;        Student stu1 = c2.getStu();        stu1.setName(&quot;&#x674E;&#x56DB;&quot;);        //&#x5224;&#x65AD;stu&#x5BF9;&#x8C61;&#x548C;stu1&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;        System.out.println(&quot;stu&#x548C;stu1&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1F;&quot; + (stu == stu1));        c1.show();        c2.show();    }}</span>
</pre><p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x539F;&#x578B;&#x6A21;&#x5F0F;2.png" style="zoom:80%;">
<p><font color="red">&#x8BF4;&#x660E;&#xFF1A;</font></p>
<p>&#x200B;	stu&#x5BF9;&#x8C61;&#x548C;stu1&#x5BF9;&#x8C61;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5C06;stu1&#x5BF9;&#x8C61;&#x4E2D;name&#x5C5E;&#x6027;&#x503C;&#x6539;&#x4E3A;&#x201C;&#x674E;&#x56DB;&#x201D;&#xFF0C;&#x4E24;&#x4E2A;Citation&#xFF08;&#x5956;&#x72B6;&#xFF09;&#x5BF9;&#x8C61;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x90FD;&#x662F;&#x674E;&#x56DB;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6D45;&#x514B;&#x9686;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5BF9;&#x5177;&#x4F53;&#x539F;&#x578B;&#x7C7B;&#xFF08;Citation&#xFF09;&#x4E2D;&#x7684;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x5F15;&#x7528;&#x7684;&#x590D;&#x5236;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6DF1;&#x514B;&#x9686;&#xFF0C;&#x800C;&#x8FDB;&#x884C;&#x6DF1;&#x514B;&#x9686;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x6D41;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5F20;&#x4E09;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x897F;&#x5B89;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8F93;&#x51FA;&#x6D41;&#x5BF9;&#x8C61;        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;C:\\Users\\Think\\Desktop\\b.txt&quot;));        //&#x5C06;c1&#x5BF9;&#x8C61;&#x5199;&#x51FA;&#x5230;&#x6587;&#x4EF6;&#x4E2D;        oos.writeObject(c1);        oos.close();        //&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x51FA;&#x5165;&#x6D41;&#x5BF9;&#x8C61;        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;C:\\Users\\Think\\Desktop\\b.txt&quot;));        //&#x8BFB;&#x53D6;&#x5BF9;&#x8C61;        Citation c2 = (Citation) ois.readObject();        //&#x83B7;&#x53D6;c2&#x5956;&#x72B6;&#x6240;&#x5C5E;&#x5B66;&#x751F;&#x5BF9;&#x8C61;        Student stu1 = c2.getStu();        stu1.setName(&quot;&#x674E;&#x56DB;&quot;);        //&#x5224;&#x65AD;stu&#x5BF9;&#x8C61;&#x548C;stu1&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;        System.out.println(&quot;stu&#x548C;stu1&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1F;&quot; + (stu == stu1));        c1.show();        c2.show();    }}</span>
</pre><p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x539F;&#x578B;&#x6A21;&#x5F0F;3.png" style="zoom:80%;">
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;Citation&#x7C7B;&#x548C;Student&#x7C7B;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Serializable&#x63A5;&#x53E3;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x629B;NotSerializableException&#x5F02;&#x5E38;&#x3002;</p>
</blockquote>
<h2 class="mume-header" id="45-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.5 &#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="441-%E6%A6%82%E8%BF%B0">4.4.1 &#x6982;&#x8FF0;</h3>

<p>&#x5C06;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x4E0E;&#x8868;&#x793A;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x5F97;&#x540C;&#x6837;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x793A;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200413225341516.png" style="zoom:60%;">
<ul>
<li>&#x5206;&#x79BB;&#x4E86;&#x90E8;&#x4EF6;&#x7684;&#x6784;&#x9020;(&#x7531;Builder&#x6765;&#x8D1F;&#x8D23;)&#x548C;&#x88C5;&#x914D;(&#x7531;Director&#x8D1F;&#x8D23;)&#x3002; &#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x6784;&#x9020;&#x51FA;&#x590D;&#x6742;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4E2A;&#x6A21;&#x5F0F;&#x9002;&#x7528;&#x4E8E;&#xFF1A;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#x3002;</li>
<li>&#x7531;&#x4E8E;&#x5B9E;&#x73B0;&#x4E86;&#x6784;&#x5EFA;&#x548C;&#x88C5;&#x914D;&#x7684;&#x89E3;&#x8026;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x6784;&#x5EFA;&#x5668;&#xFF0C;&#x76F8;&#x540C;&#x7684;&#x88C5;&#x914D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x505A;&#x51FA;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#xFF1B;&#x76F8;&#x540C;&#x7684;&#x6784;&#x5EFA;&#x5668;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x88C5;&#x914D;&#x987A;&#x5E8F;&#x4E5F;&#x53EF;&#x4EE5;&#x505A;&#x51FA;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#x6784;&#x5EFA;&#x7B97;&#x6CD5;&#x3001;&#x88C5;&#x914D;&#x7B97;&#x6CD5;&#x7684;&#x89E3;&#x8026;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x590D;&#x7528;&#x3002;</li>
<li>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x5C06;&#x90E8;&#x4EF6;&#x548C;&#x5176;&#x7EC4;&#x88C5;&#x8FC7;&#x7A0B;&#x5206;&#x5F00;&#xFF0C;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x578B;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x8BE5;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x65E0;&#x987B;&#x77E5;&#x9053;&#x5176;&#x5185;&#x90E8;&#x7684;&#x5177;&#x4F53;&#x6784;&#x9020;&#x7EC6;&#x8282;&#x3002;</li>
</ul>
<h3 class="mume-header" id="442-%E7%BB%93%E6%9E%84">4.4.2 &#x7ED3;&#x6784;</h3>

<p>&#x5EFA;&#x9020;&#x8005;&#xFF08;Builder&#xFF09;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x5982;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>
<p>&#x62BD;&#x8C61;&#x5EFA;&#x9020;&#x8005;&#x7C7B;&#xFF08;Builder&#xFF09;&#xFF1A;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x89C4;&#x5B9A;&#x8981;&#x5B9E;&#x73B0;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x90A3;&#x4E9B;&#x90E8;&#x5206;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x5E76;&#x4E0D;&#x6D89;&#x53CA;&#x5177;&#x4F53;&#x7684;&#x90E8;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x5EFA;&#x9020;&#x8005;&#x7C7B;&#xFF08;ConcreteBuilder&#xFF09;&#xFF1A;&#x5B9E;&#x73B0; Builder &#x63A5;&#x53E3;&#xFF0C;&#x5B8C;&#x6210;&#x590D;&#x6742;&#x4EA7;&#x54C1;&#x7684;&#x5404;&#x4E2A;&#x90E8;&#x4EF6;&#x7684;&#x5177;&#x4F53;&#x521B;&#x5EFA;&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x6784;&#x9020;&#x8FC7;&#x7A0B;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x63D0;&#x4F9B;&#x4EA7;&#x54C1;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
</li>
<li>
<p>&#x4EA7;&#x54C1;&#x7C7B;&#xFF08;Product&#xFF09;&#xFF1A;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x3002;</p>
</li>
<li>
<p>&#x6307;&#x6325;&#x8005;&#x7C7B;&#xFF08;Director&#xFF09;&#xFF1A;&#x8C03;&#x7528;&#x5177;&#x4F53;&#x5EFA;&#x9020;&#x8005;&#x6765;&#x521B;&#x5EFA;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x5728;&#x6307;&#x5BFC;&#x8005;&#x4E2D;&#x4E0D;&#x6D89;&#x53CA;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EA;&#x8D1F;&#x8D23;&#x4FDD;&#x8BC1;&#x5BF9;&#x8C61;&#x5404;&#x90E8;&#x5206;&#x5B8C;&#x6574;&#x521B;&#x5EFA;&#x6216;&#x6309;&#x67D0;&#x79CD;&#x987A;&#x5E8F;&#x521B;&#x5EFA;&#x3002;</p>
</li>
</ul>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<h3 class="mume-header" id="443-%E5%AE%9E%E4%BE%8B">4.4.3 &#x5B9E;&#x4F8B;</h3>

<p><strong>&#x521B;&#x5EFA;&#x5171;&#x4EAB;&#x5355;&#x8F66;</strong></p>
<p>&#x751F;&#x4EA7;&#x81EA;&#x884C;&#x8F66;&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E86;&#x8F66;&#x67B6;&#xFF0C;&#x8F66;&#x5EA7;&#x7B49;&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x4EA7;&#x3002;&#x800C;&#x8F66;&#x67B6;&#x53C8;&#x6709;&#x78B3;&#x7EA4;&#x7EF4;&#xFF0C;&#x94DD;&#x5408;&#x91D1;&#x7B49;&#x6750;&#x8D28;&#x7684;&#xFF0C;&#x8F66;&#x5EA7;&#x6709;&#x6A61;&#x80F6;&#xFF0C;&#x771F;&#x76AE;&#x7B49;&#x6750;&#x8D28;&#x3002;&#x5BF9;&#x4E8E;&#x81EA;&#x884C;&#x8F66;&#x7684;&#x751F;&#x4EA7;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x8FD9;&#x91CC;Bike&#x662F;&#x4EA7;&#x54C1;&#xFF0C;&#x5305;&#x542B;&#x8F66;&#x67B6;&#xFF0C;&#x8F66;&#x5EA7;&#x7B49;&#x7EC4;&#x4EF6;&#xFF1B;Builder&#x662F;&#x62BD;&#x8C61;&#x5EFA;&#x9020;&#x8005;&#xFF0C;MobikeBuilder&#x548C;OfoBuilder&#x662F;&#x5177;&#x4F53;&#x7684;&#x5EFA;&#x9020;&#x8005;&#xFF1B;Director&#x662F;&#x6307;&#x6325;&#x8005;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;1.png" style="zoom:80%;">
<p>&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x81EA;&#x884C;&#x8F66;&#x7C7B;public class Bike {    private String frame;    private String seat;    public String getFrame() {        return frame;    }    public void setFrame(String frame) {        this.frame = frame;    }    public String getSeat() {        return seat;    }    public void setSeat(String seat) {        this.seat = seat;    }}// &#x62BD;&#x8C61; builder &#x7C7B;public abstract class Builder {    protected Bike mBike = new Bike();    public abstract void buildFrame();    public abstract void buildSeat();    public abstract Bike createBike();}//&#x6469;&#x62DC;&#x5355;&#x8F66;Builder&#x7C7B;public class MobikeBuilder extends Builder {    @Override    public void buildFrame() {        mBike.setFrame(&quot;&#x94DD;&#x5408;&#x91D1;&#x8F66;&#x67B6;&quot;);    }    @Override    public void buildSeat() {        mBike.setSeat(&quot;&#x771F;&#x76AE;&#x8F66;&#x5EA7;&quot;);    }    @Override    public Bike createBike() {        return mBike;    }}//ofo&#x5355;&#x8F66;Builder&#x7C7B;public class OfoBuilder extends Builder {    @Override    public void buildFrame() {        mBike.setFrame(&quot;&#x78B3;&#x7EA4;&#x7EF4;&#x8F66;&#x67B6;&quot;);    }    @Override    public void buildSeat() {        mBike.setSeat(&quot;&#x6A61;&#x80F6;&#x8F66;&#x5EA7;&quot;);    }    @Override    public Bike createBike() {        return mBike;    }}//&#x6307;&#x6325;&#x8005;&#x7C7B;public class Director {    private Builder mBuilder;    public Director(Builder builder) {        mBuilder = builder;    }    public Bike construct() {        mBuilder.buildFrame();        mBuilder.buildSeat();        return mBuilder.createBike();    }}//&#x6D4B;&#x8BD5;&#x7C7B;public class Client {    public static void main(String[] args) {        showBike(new OfoBuilder());        showBike(new MobikeBuilder());    }    private static void showBike(Builder builder) {        Director director = new Director(builder);        Bike bike = director.construct();        System.out.println(bike.getFrame());        System.out.println(bike.getSeat());    }}</span>
</pre><p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong></p>
<p>&#x4E0A;&#x9762;&#x793A;&#x4F8B;&#x662F; Builder&#x6A21;&#x5F0F;&#x7684;&#x5E38;&#x89C4;&#x7528;&#x6CD5;&#xFF0C;&#x6307;&#x6325;&#x8005;&#x7C7B; Director &#x5728;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#x5177;&#x6709;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x5B83;&#x7528;&#x4E8E;&#x6307;&#x5BFC;&#x5177;&#x4F53;&#x6784;&#x5EFA;&#x8005;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x4EA7;&#x54C1;&#xFF0C;&#x63A7;&#x5236;&#x8C03;&#x7528;&#x5148;&#x540E;&#x6B21;&#x5E8F;&#xFF0C;&#x5E76;&#x5411;&#x8C03;&#x7528;&#x8005;&#x8FD4;&#x56DE;&#x5B8C;&#x6574;&#x7684;&#x4EA7;&#x54C1;&#x7C7B;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x7B80;&#x5316;&#x7CFB;&#x7EDF;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x6307;&#x6325;&#x8005;&#x7C7B;&#x548C;&#x62BD;&#x8C61;&#x5EFA;&#x9020;&#x8005;&#x8FDB;&#x884C;&#x7ED3;&#x5408;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// &#x62BD;&#x8C61; builder &#x7C7B;public abstract class Builder {    protected Bike mBike = new Bike();    public abstract void buildFrame();    public abstract void buildSeat();    public abstract Bike createBike();        public Bike construct() {        this.buildFrame();        this.BuildSeat();        return this.createBike();    }}</span>
</pre><p><strong>&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p>&#x8FD9;&#x6837;&#x505A;&#x786E;&#x5B9E;&#x7B80;&#x5316;&#x4E86;&#x7CFB;&#x7EDF;&#x7ED3;&#x6784;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x52A0;&#x91CD;&#x4E86;&#x62BD;&#x8C61;&#x5EFA;&#x9020;&#x8005;&#x7C7B;&#x7684;&#x804C;&#x8D23;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x592A;&#x7B26;&#x5408;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#xFF0C;&#x5982;&#x679C;construct() &#x8FC7;&#x4E8E;&#x590D;&#x6742;&#xFF0C;&#x5EFA;&#x8BAE;&#x8FD8;&#x662F;&#x5C01;&#x88C5;&#x5230; Director &#x4E2D;&#x3002;</p>
<h3 class="mume-header" id="444-%E4%BC%98%E7%BC%BA%E7%82%B9">4.4.4 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x5C01;&#x88C5;&#x6027;&#x5F88;&#x597D;&#x3002;&#x4F7F;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x7684;&#x5C01;&#x88C5;&#x53D8;&#x5316;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x4EA7;&#x54C1;&#x7C7B;&#x548C;&#x5EFA;&#x9020;&#x8005;&#x7C7B;&#x662F;&#x6BD4;&#x8F83;&#x7A33;&#x5B9A;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5C06;&#x4E3B;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C01;&#x88C5;&#x5728;&#x6307;&#x6325;&#x8005;&#x7C7B;&#x4E2D;&#x5BF9;&#x6574;&#x4F53;&#x800C;&#x8A00;&#x53EF;&#x4EE5;&#x53D6;&#x5F97;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x3002;</li>
<li>&#x5728;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x5FC5;&#x77E5;&#x9053;&#x4EA7;&#x54C1;&#x5185;&#x90E8;&#x7EC4;&#x6210;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x5C06;&#x4EA7;&#x54C1;&#x672C;&#x8EAB;&#x4E0E;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x89E3;&#x8026;&#xFF0C;&#x4F7F;&#x5F97;&#x76F8;&#x540C;&#x7684;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x4EA7;&#x54C1;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x7CBE;&#x7EC6;&#x5730;&#x63A7;&#x5236;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B; &#x3002;&#x5C06;&#x590D;&#x6742;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#x6B65;&#x9AA4;&#x5206;&#x89E3;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#xFF0C;&#x4E5F;&#x66F4;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x3002;</li>
<li>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x5F88;&#x5BB9;&#x6613;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x3002;&#x5982;&#x679C;&#x6709;&#x65B0;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x4E0D;&#x7528;&#x4FEE;&#x6539;&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x6D4B;&#x8BD5;&#x901A;&#x8FC7;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x5BF9;&#x539F;&#x6709;&#x529F;&#x80FD;&#x5F15;&#x5165;&#x98CE;&#x9669;&#x3002;&#x7B26;&#x5408;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;</li>
</ul>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x6240;&#x521B;&#x5EFA;&#x7684;&#x4EA7;&#x54C1;&#x4E00;&#x822C;&#x5177;&#x6709;&#x8F83;&#x591A;&#x7684;&#x5171;&#x540C;&#x70B9;&#xFF0C;&#x5176;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x76F8;&#x4F3C;&#xFF0C;&#x5982;&#x679C;&#x4EA7;&#x54C1;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x6027;&#x5F88;&#x5927;&#xFF0C;&#x5219;&#x4E0D;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x5176;&#x4F7F;&#x7528;&#x8303;&#x56F4;&#x53D7;&#x5230;&#x4E00;&#x5B9A;&#x7684;&#x9650;&#x5236;&#x3002;</p>
<h3 class="mume-header" id="445-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.4.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<p>&#x5EFA;&#x9020;&#x8005;&#xFF08;Builder&#xFF09;&#x6A21;&#x5F0F;&#x521B;&#x5EFA;&#x7684;&#x662F;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4EA7;&#x54C1;&#x7684;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#x7ECF;&#x5E38;&#x9762;&#x4E34;&#x7740;&#x5267;&#x70C8;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x4F46;&#x5C06;&#x5B83;&#x4EEC;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x7B97;&#x6CD5;&#x5374;&#x76F8;&#x5BF9;&#x7A33;&#x5B9A;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x901A;&#x5E38;&#x5728;&#x4EE5;&#x4E0B;&#x573A;&#x5408;&#x4F7F;&#x7528;&#x3002;</p>
<ul>
<li>&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x7531;&#x591A;&#x4E2A;&#x90E8;&#x4EF6;&#x6784;&#x6210;&#xFF0C;&#x5404;&#x90E8;&#x4EF6;&#x9762;&#x4E34;&#x7740;&#x590D;&#x6742;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x4F46;&#x6784;&#x4EF6;&#x95F4;&#x7684;&#x5EFA;&#x9020;&#x987A;&#x5E8F;&#x662F;&#x7A33;&#x5B9A;&#x7684;&#x3002;</li>
<li>&#x521B;&#x5EFA;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x7B97;&#x6CD5;&#x72EC;&#x7ACB;&#x4E8E;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x7684;&#x88C5;&#x914D;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x4EA7;&#x54C1;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x548C;&#x6700;&#x7EC8;&#x7684;&#x8868;&#x793A;&#x662F;&#x72EC;&#x7ACB;&#x7684;&#x3002;</li>
</ul>
<h3 class="mume-header" id="446-%E6%A8%A1%E5%BC%8F%E6%89%A9%E5%B1%95">4.4.6 &#x6A21;&#x5F0F;&#x6269;&#x5C55;</h3>

<p>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x9664;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x7528;&#x9014;&#x5916;&#xFF0C;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x5C31;&#x662F;&#x5F53;&#x4E00;&#x4E2A;&#x7C7B;&#x6784;&#x9020;&#x5668;&#x9700;&#x8981;&#x4F20;&#x5165;&#x5F88;&#x591A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;&#x4F1A;&#x975E;&#x5E38;&#x5DEE;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x5BB9;&#x6613;&#x5F15;&#x5165;&#x9519;&#x8BEF;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x8FDB;&#x884C;&#x91CD;&#x6784;&#x3002;</p>
<p>&#x91CD;&#x6784;&#x524D;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">&quot;Phone{&quot;</span> <span class="token operator">+</span>                <span class="token string">&quot;cpu=&apos;&quot;</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, screen=&apos;&quot;</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, memory=&apos;&quot;</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, mainboard=&apos;&quot;</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&apos;}&apos;</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//&#x6784;&#x5EFA;Phone&#x5BF9;&#x8C61;        Phone phone = new Phone(&quot;intel&quot;,&quot;&#x4E09;&#x661F;&#x5C4F;&#x5E55;&quot;,&quot;&#x91D1;&#x58EB;&#x987F;&quot;,&quot;&#x534E;&#x7855;&quot;);        System.out.println(phone);    }}</span>
</pre><p>&#x4E0A;&#x9762;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;&#x4E2D;&#x6784;&#x5EFA;Phone&#x5BF9;&#x8C61;&#xFF0C;&#x4F20;&#x9012;&#x4E86;&#x56DB;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x53C2;&#x6570;&#x66F4;&#x591A;&#x5462;&#xFF1F;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x53CA;&#x4F7F;&#x7528;&#x7684;&#x6210;&#x672C;&#x5C31;&#x662F;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;</p>
<p>&#x91CD;&#x6784;&#x540E;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">&quot;Phone{&quot;</span> <span class="token operator">+</span>                <span class="token string">&quot;cpu=&apos;&quot;</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, screen=&apos;&quot;</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, memory=&apos;&quot;</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&quot;, mainboard=&apos;&quot;</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token string">&apos;\&apos;&apos;</span> <span class="token operator">+</span>                <span class="token string">&apos;}&apos;</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">&quot;intel&quot;</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">&quot;&#x534E;&#x7855;&quot;</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">&quot;&#x91D1;&#x58EB;&#x987F;&quot;</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E09;&#x661F;&quot;</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</pre><p>&#x91CD;&#x6784;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x5728;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x66F4;&#x65B9;&#x4FBF;&#xFF0C;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;&#x4ECE;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x4E0A;&#xFF0C;&#x5BF9;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x8981;&#x6C42;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;</p>
<h2 class="mume-header" id="46-%E5%88%9B%E5%BB%BA%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94">4.6 &#x521B;&#x5EFA;&#x8005;&#x6A21;&#x5F0F;&#x5BF9;&#x6BD4;</h2>

<h3 class="mume-header" id="461-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8Fvs%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.6.1 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;VS&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h3>

<p>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x6CE8;&#x91CD;&#x7684;&#x662F;&#x6574;&#x4F53;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;&#xFF1B;&#x800C;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x6CE8;&#x91CD;&#x7684;&#x662F;&#x90E8;&#x4EF6;&#x6784;&#x5EFA;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x610F;&#x5728;&#x901A;&#x8FC7;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x5730;&#x7CBE;&#x786E;&#x6784;&#x9020;&#x521B;&#x5EFA;&#x51FA;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E3E;&#x4E2A;&#x7B80;&#x5355;&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#x660E;&#x4E24;&#x8005;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x5982;&#x8981;&#x5236;&#x9020;&#x4E00;&#x4E2A;&#x8D85;&#x4EBA;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x4EA7;&#x751F;&#x51FA;&#x6765;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x529B;&#x5927;&#x65E0;&#x7A77;&#x3001;&#x80FD;&#x591F;&#x98DE;&#x7FD4;&#x3001;&#x5185;&#x88E4;&#x5916;&#x7A7F;&#x7684;&#x8D85;&#x4EBA;&#xFF1B;&#x800C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x7EC4;&#x88C5;&#x624B;&#x3001;&#x5934;&#x3001;&#x811A;&#x3001;&#x8EAF;&#x5E72;&#x7B49;&#x90E8;&#x5206;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x628A;&#x5185;&#x88E4;&#x5916;&#x7A7F;&#xFF0C;&#x4E8E;&#x662F;&#x4E00;&#x4E2A;&#x8D85;&#x4EBA;&#x5C31;&#x8BDE;&#x751F;&#x4E86;&#x3002;</p>
<h3 class="mume-header" id="462-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8Fvs%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.6.2 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;VS&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h3>

<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4EA7;&#x54C1;&#x5BB6;&#x65CF;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x5BB6;&#x65CF;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x4EA7;&#x54C1;&#xFF1A;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x5206;&#x7C7B;&#x7EF4;&#x5EA6;&#x7684;&#x4EA7;&#x54C1;&#x7EC4;&#x5408;&#xFF0C;&#x91C7;&#x7528;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x5219;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EA;&#x5173;&#x5FC3;&#x4EC0;&#x4E48;&#x4EA7;&#x54C1;&#x7531;&#x4EC0;&#x4E48;&#x5DE5;&#x5382;&#x751F;&#x4EA7;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x5219;&#x662F;&#x8981;&#x6C42;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x7684;&#x84DD;&#x56FE;&#x5EFA;&#x9020;&#x4EA7;&#x54C1;&#xFF0C;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x662F;&#x901A;&#x8FC7;&#x7EC4;&#x88C5;&#x96F6;&#x914D;&#x4EF6;&#x800C;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x65B0;&#x4EA7;&#x54C1;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5C06;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x770B;&#x6210;&#x6C7D;&#x8F66;&#x914D;&#x4EF6;&#x751F;&#x4EA7;&#x5DE5;&#x5382;&#xFF0C;&#x751F;&#x4EA7;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x90A3;&#x4E48;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6C7D;&#x8F66;&#x7EC4;&#x88C5;&#x5DE5;&#x5382;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x90E8;&#x4EF6;&#x7684;&#x7EC4;&#x88C5;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x4E00;&#x8F86;&#x5B8C;&#x6574;&#x7684;&#x6C7D;&#x8F66;&#x3002;</p>
<h1 class="mume-header" id="5%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F">5&#xFF0C;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;</h1>

<p>&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x63CF;&#x8FF0;&#x5982;&#x4F55;&#x5C06;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x6309;&#x67D0;&#x79CD;&#x5E03;&#x5C40;&#x7EC4;&#x6210;&#x66F4;&#x5927;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x5B83;&#x5206;&#x4E3A;&#x7C7B;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x548C;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#xFF0C;&#x524D;&#x8005;&#x91C7;&#x7528;&#x7EE7;&#x627F;&#x673A;&#x5236;&#x6765;&#x7EC4;&#x7EC7;&#x63A5;&#x53E3;&#x548C;&#x7C7B;&#xFF0C;&#x540E;&#x8005;&#x91C6;&#x7528;&#x7EC4;&#x5408;&#x6216;&#x805A;&#x5408;&#x6765;&#x7EC4;&#x5408;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x6216;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x6BD4;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x8026;&#x5408;&#x5EA6;&#x4F4E;&#xFF0C;&#x6EE1;&#x8DB3;&#x201C;&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;&#x201D;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x6BD4;&#x7C7B;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x5177;&#x6709;&#x66F4;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002;</p>
<p>&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B; 7 &#x79CD;&#xFF1A;</p>
<ul>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;</li>
<li>&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</li>
<li>&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;</li>
<li>&#x6865;&#x63A5;&#x6A21;&#x5F0F;</li>
<li>&#x5916;&#x89C2;&#x6A21;&#x5F0F;</li>
<li>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;</li>
<li>&#x4EAB;&#x5143;&#x6A21;&#x5F0F;</li>
</ul>
<h2 class="mume-header" id="51-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F">5.1 &#x4EE3;&#x7406;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="511-%E6%A6%82%E8%BF%B0">5.1.1 &#x6982;&#x8FF0;</h3>

<p>&#x7531;&#x4E8E;&#x67D0;&#x4E9B;&#x539F;&#x56E0;&#x9700;&#x8981;&#x7ED9;&#x67D0;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x4EE5;&#x63A7;&#x5236;&#x5BF9;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x4E0D;&#x9002;&#x5408;&#x6216;&#x8005;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x548C;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x4E2D;&#x4ECB;&#x3002;</p>
<p>Java&#x4E2D;&#x7684;&#x4EE3;&#x7406;&#x6309;&#x7167;&#x4EE3;&#x7406;&#x7C7B;&#x751F;&#x6210;&#x65F6;&#x673A;&#x4E0D;&#x540C;&#x53C8;&#x5206;&#x4E3A;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x548C;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x3002;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x4EE3;&#x7406;&#x7C7B;&#x5728;&#x7F16;&#x8BD1;&#x671F;&#x5C31;&#x751F;&#x6210;&#xFF0C;&#x800C;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4EE3;&#x7406;&#x7C7B;&#x5219;&#x662F;&#x5728;Java&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x751F;&#x6210;&#x3002;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x53C8;&#x6709;JDK&#x4EE3;&#x7406;&#x548C;CGLib&#x4EE3;&#x7406;&#x4E24;&#x79CD;&#x3002;</p>
<h3 class="mume-header" id="512-%E7%BB%93%E6%9E%84">5.1.2 &#x7ED3;&#x6784;</h3>

<p>&#x4EE3;&#x7406;&#xFF08;Proxy&#xFF09;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x4E09;&#x79CD;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#xFF08;Subject&#xFF09;&#x7C7B;&#xFF1A; &#x901A;&#x8FC7;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#x58F0;&#x660E;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x548C;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x7684;&#x4E1A;&#x52A1;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#xFF08;Real Subject&#xFF09;&#x7C7B;&#xFF1A; &#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x4E1A;&#x52A1;&#xFF0C;&#x662F;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x6240;&#x4EE3;&#x8868;&#x7684;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#xFF0C;&#x662F;&#x6700;&#x7EC8;&#x8981;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x4EE3;&#x7406;&#xFF08;Proxy&#xFF09;&#x7C7B; &#xFF1A; &#x63D0;&#x4F9B;&#x4E86;&#x4E0E;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x542B;&#x6709;&#x5BF9;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3001;&#x63A7;&#x5236;&#x6216;&#x6269;&#x5C55;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x7684;&#x529F;&#x80FD;&#x3002;</li>
</ul>
<h3 class="mume-header" id="513-%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86">5.1.3 &#x9759;&#x6001;&#x4EE3;&#x7406;</h3>

<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x6848;&#x4F8B;&#x6765;&#x611F;&#x53D7;&#x4E00;&#x4E0B;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x3002;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x706B;&#x8F66;&#x7AD9;&#x5356;&#x7968;</p>
<p>&#x5982;&#x679C;&#x8981;&#x4E70;&#x706B;&#x8F66;&#x7968;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x53BB;&#x706B;&#x8F66;&#x7AD9;&#x4E70;&#x7968;&#xFF0C;&#x5750;&#x8F66;&#x5230;&#x706B;&#x8F66;&#x7AD9;&#xFF0C;&#x6392;&#x961F;&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x663E;&#x7136;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;&#x800C;&#x706B;&#x8F66;&#x7AD9;&#x5728;&#x591A;&#x4E2A;&#x5730;&#x65B9;&#x90FD;&#x6709;&#x4EE3;&#x552E;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x53BB;&#x4EE3;&#x552E;&#x70B9;&#x4E70;&#x7968;&#x5C31;&#x65B9;&#x4FBF;&#x5F88;&#x591A;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5178;&#x578B;&#x7684;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x706B;&#x8F66;&#x7AD9;&#x662F;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE3;&#x552E;&#x70B9;&#x662F;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img\&#x9759;&#x6001;&#x4EE3;&#x7406;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x5356;&#x7968;&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x706B;&#x8F66;&#x7AD9;  &#x706B;&#x8F66;&#x7AD9;&#x5177;&#x6709;&#x5356;&#x7968;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5B9E;&#x73B0;SellTickets&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x706B;&#x8F66;&#x7AD9;&#x5356;&#x7968;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4EE3;&#x552E;&#x70B9;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EE3;&#x7406;&#x70B9;&#x6536;&#x53D6;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x8D39;&#x7528;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6D4B;&#x8BD5;&#x7C7B;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x7684;&#x662F;ProxyPoint&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;ProxyPoint&#x4F5C;&#x4E3A;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x548C;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x4E2D;&#x4ECB;&#x3002;&#x540C;&#x65F6;&#x4E5F;&#x5BF9;sell&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x589E;&#x5F3A;&#xFF08;&#x4EE3;&#x7406;&#x70B9;&#x6536;&#x53D6;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x8D39;&#x7528;&#xFF09;&#x3002;</p>
<h3 class="mume-header" id="514-jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">5.1.4 JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;</h3>

<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x4E0A;&#x9762;&#x6848;&#x4F8B;&#xFF0C;&#x5148;&#x8BF4;&#x8BF4;JDK&#x63D0;&#x4F9B;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x3002;Java&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;Proxy&#xFF0C;Proxy&#x5E76;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x4E0A;&#x8FF0;&#x6240;&#x8BF4;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#xFF0C;&#x800C;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF08;newProxyInstance&#x65B9;&#x6CD5;&#xFF09;&#x6765;&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x5356;&#x7968;&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x706B;&#x8F66;&#x7AD9;  &#x706B;&#x8F66;&#x7AD9;&#x5177;&#x6709;&#x5356;&#x7968;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5B9E;&#x73B0;SellTickets&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x706B;&#x8F66;&#x7AD9;&#x5356;&#x7968;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4EE3;&#x7406;&#x5DE5;&#x5382;&#xFF0C;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x4F7F;&#x7528;Proxy&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
        <span class="token comment">/*
            newProxyInstance()&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;
                ClassLoader loader &#xFF1A; &#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x52A0;&#x8F7D;&#x4EE3;&#x7406;&#x7C7B;&#xFF0C;&#x4F7F;&#x7528;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x5373;&#x53EF;
                Class&lt;?&gt;[] interfaces &#xFF1A; &#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x6240;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x548C;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;
                InvocationHandler h &#xFF1A; &#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x8C03;&#x7528;&#x5904;&#x7406;&#x7A0B;&#x5E8F;
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler&#x4E2D;invoke&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;
                            proxy &#xFF1A; &#x4EE3;&#x7406;&#x5BF9;&#x8C61;
                            method &#xFF1A; &#x5BF9;&#x5E94;&#x4E8E;&#x5728;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x4E0A;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x7684; Method &#x5B9E;&#x4F8B;
                            args &#xFF1A; &#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x65F6;&#x4F20;&#x9012;&#x7684;&#x5B9E;&#x9645;&#x53C2;&#x6570;
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EE3;&#x7406;&#x70B9;&#x6536;&#x53D6;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x8D39;&#x7528;(JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x65B9;&#x5F0F;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//&#x6267;&#x884C;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><font color="red">&#x4F7F;&#x7528;&#x4E86;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x601D;&#x8003;&#x4E0B;&#x9762;&#x95EE;&#x9898;&#xFF1A;</font></p>
<ul>
<li>
<p>ProxyFactory&#x662F;&#x4EE3;&#x7406;&#x7C7B;&#x5417;&#xFF1F;</p>
<p>ProxyFactory&#x4E0D;&#x662F;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x4E2D;&#x6240;&#x8BF4;&#x7684;&#x4EE3;&#x7406;&#x7C7B;&#xFF0C;&#x800C;&#x4EE3;&#x7406;&#x7C7B;&#x662F;&#x7A0B;&#x5E8F;&#x5728;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x52A8;&#x6001;&#x7684;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x3002;&#x901A;&#x8FC7;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x5F00;&#x6E90;&#x7684; Java &#x8BCA;&#x65AD;&#x5DE5;&#x5177;&#xFF08;Arthas&#x3010;&#x963F;&#x5C14;&#x8428;&#x65AF;&#x3011;&#xFF09;&#x67E5;&#x770B;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x7ED3;&#x6784;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;equals&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.proxy.dynamic.jdk.SellTickets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hashCode&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x7C7B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x4FE1;&#x606F;&#xFF1A;</p>
<ul>
<li>&#x4EE3;&#x7406;&#x7C7B;&#xFF08;$Proxy0&#xFF09;&#x5B9E;&#x73B0;&#x4E86;SellTickets&#x3002;&#x8FD9;&#x4E5F;&#x5C31;&#x5370;&#x8BC1;&#x4E86;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x8BF4;&#x7684;&#x771F;&#x5B9E;&#x7C7B;&#x548C;&#x4EE3;&#x7406;&#x7C7B;&#x5B9E;&#x73B0;&#x540C;&#x6837;&#x7684;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x4EE3;&#x7406;&#x7C7B;&#xFF08;$Proxy0&#xFF09;&#x5C06;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x7684;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#x7ED9;&#x4E86;&#x7236;&#x7C7B;&#x3002;</li>
</ul>
</li>
<li>
<p>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#xFF1F;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x6458;&#x53D6;&#x7684;&#x91CD;&#x70B9;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7406;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.proxy.dynamic.jdk.SellTickets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java&#x63D0;&#x4F9B;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x76F8;&#x5173;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>
	 
	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4EE3;&#x7406;&#x5DE5;&#x5382;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EE3;&#x7406;&#x70B9;&#x6536;&#x53D6;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x8D39;&#x7528;(JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x65B9;&#x5F0F;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
<p>&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-text">1. &#x5728;&#x6D4B;&#x8BD5;&#x7C7B;&#x4E2D;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x8C03;&#x7528;sell()&#x65B9;&#x6CD5;
2. &#x6839;&#x636E;&#x591A;&#x6001;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6267;&#x884C;&#x7684;&#x662F;&#x4EE3;&#x7406;&#x7C7B;&#xFF08;$Proxy0&#xFF09;&#x4E2D;&#x7684;sell()&#x65B9;&#x6CD5;
3. &#x4EE3;&#x7406;&#x7C7B;&#xFF08;$Proxy0&#xFF09;&#x4E2D;&#x7684;sell()&#x65B9;&#x6CD5;&#x4E2D;&#x53C8;&#x8C03;&#x7528;&#x4E86;InvocationHandler&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;invoke&#x65B9;&#x6CD5;
4. invoke&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x6267;&#x884C;&#x4E86;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x6240;&#x5C5E;&#x7C7B;(TrainStation)&#x4E2D;&#x7684;sell()&#x65B9;&#x6CD5;
</pre>
<h3 class="mume-header" id="515-cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">5.1.5 CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406;</h3>

<p>&#x540C;&#x6837;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x6848;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6B21;&#x4F7F;&#x7528;CGLIB&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;SellTickets&#x63A5;&#x53E3;&#xFF0C;&#x53EA;&#x5B9A;&#x4E49;&#x4E86;TrainStation(&#x706B;&#x8F66;&#x7AD9;&#x7C7B;)&#x3002;&#x5F88;&#x663E;&#x7136;JDK&#x4EE3;&#x7406;&#x662F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x8981;&#x6C42;&#x5FC5;&#x987B;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#xFF0C;&#x5BF9;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x4EE3;&#x7406;&#x3002;</p>
<p>CGLIB&#x662F;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5305;&#x3002;&#x5B83;&#x4E3A;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x63D0;&#x4F9B;&#x4EE3;&#x7406;&#xFF0C;&#x4E3A;JDK&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x597D;&#x7684;&#x8865;&#x5145;&#x3002;</p>
<p>CGLIB&#x662F;&#x7B2C;&#x4E09;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x5305;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5F15;&#x5165;jar&#x5305;&#x7684;&#x5750;&#x6807;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</pre><p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x706B;&#x8F66;&#x7AD9;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x706B;&#x8F66;&#x7AD9;&#x5356;&#x7968;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4EE3;&#x7406;&#x5DE5;&#x5382;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x521B;&#x5EFA;Enhancer&#x5BF9;&#x8C61;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7684;Proxy&#x7C7B;&#xFF0C;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x8BBE;&#x7F6E;&#x51E0;&#x4E2A;&#x53C2;&#x6570;</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x8BBE;&#x7F6E;&#x7236;&#x7C7B;&#x7684;&#x5B57;&#x8282;&#x7801;&#x5BF9;&#x8C61;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x8BBE;&#x7F6E;&#x56DE;&#x8C03;&#x51FD;&#x6570;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;
            o &#xFF1A; &#x4EE3;&#x7406;&#x5BF9;&#x8C61;
            method &#xFF1A; &#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x7684;Method&#x5B9E;&#x4F8B;
            args &#xFF1A; &#x5B9E;&#x9645;&#x53C2;&#x6570;
            methodProxy &#xFF1A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x7684;method&#x5B9E;&#x4F8B;
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4EE3;&#x7406;&#x70B9;&#x6536;&#x53D6;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x8D39;&#x7528;(CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x65B9;&#x5F0F;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5DE5;&#x5382;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="516-%E4%B8%89%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AF%B9%E6%AF%94">5.1.6 &#x4E09;&#x79CD;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x6BD4;</h3>

<ul>
<li>
<p>jdk&#x4EE3;&#x7406;&#x548C;CGLIB&#x4EE3;&#x7406;</p>
<p>&#x4F7F;&#x7528;CGLib&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF0C;CGLib&#x5E95;&#x5C42;&#x91C7;&#x7528;ASM&#x5B57;&#x8282;&#x7801;&#x751F;&#x6210;&#x6846;&#x67B6;&#xFF0C;&#x4F7F;&#x7528;&#x5B57;&#x8282;&#x7801;&#x6280;&#x672F;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#xFF0C;&#x5728;JDK1.6&#x4E4B;&#x524D;&#x6BD4;&#x4F7F;&#x7528;Java&#x53CD;&#x5C04;&#x6548;&#x7387;&#x8981;&#x9AD8;&#x3002;&#x552F;&#x4E00;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;CGLib&#x4E0D;&#x80FD;&#x5BF9;&#x58F0;&#x660E;&#x4E3A;final&#x7684;&#x7C7B;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4EE3;&#x7406;&#xFF0C;&#x56E0;&#x4E3A;CGLib&#x539F;&#x7406;&#x662F;&#x52A8;&#x6001;&#x751F;&#x6210;&#x88AB;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
<p>&#x5728;JDK1.6&#x3001;JDK1.7&#x3001;JDK1.8&#x9010;&#x6B65;&#x5BF9;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4F18;&#x5316;&#x4E4B;&#x540E;&#xFF0C;&#x5728;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x8F83;&#x5C11;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;JDK&#x4EE3;&#x7406;&#x6548;&#x7387;&#x9AD8;&#x4E8E;CGLib&#x4EE3;&#x7406;&#x6548;&#x7387;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x8FDB;&#x884C;&#x5927;&#x91CF;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;JDK1.6&#x548C;JDK1.7&#x6BD4;CGLib&#x4EE3;&#x7406;&#x6548;&#x7387;&#x4F4E;&#x4E00;&#x70B9;&#xFF0C;&#x4F46;&#x662F;&#x5230;JDK1.8&#x7684;&#x65F6;&#x5019;&#xFF0C;JDK&#x4EE3;&#x7406;&#x6548;&#x7387;&#x9AD8;&#x4E8E;CGLib&#x4EE3;&#x7406;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6709;&#x63A5;&#x53E3;&#x4F7F;&#x7528;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63A5;&#x53E3;&#x4F7F;&#x7528;CGLIB&#x4EE3;&#x7406;&#x3002;</p>
</li>
<li>
<p>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x548C;&#x9759;&#x6001;&#x4EE3;&#x7406;</p>
<p>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4E0E;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x76F8;&#x6BD4;&#x8F83;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x597D;&#x5904;&#x662F;&#x63A5;&#x53E3;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x88AB;&#x8F6C;&#x79FB;&#x5230;&#x8C03;&#x7528;&#x5904;&#x7406;&#x5668;&#x4E00;&#x4E2A;&#x96C6;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x5904;&#x7406;&#xFF08;InvocationHandler.invoke&#xFF09;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x6570;&#x91CF;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7075;&#x6D3B;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x50CF;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x90A3;&#x6837;&#x6BCF;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E2D;&#x8F6C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x63A5;&#x53E3;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x9759;&#x6001;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x9664;&#x4E86;&#x6240;&#x6709;&#x5B9E;&#x73B0;&#x7C7B;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5916;&#xFF0C;&#x6240;&#x6709;&#x4EE3;&#x7406;&#x7C7B;&#x4E5F;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x6B64;&#x65B9;&#x6CD5;&#x3002;&#x589E;&#x52A0;&#x4E86;&#x4EE3;&#x7801;&#x7EF4;&#x62A4;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x3002;&#x800C;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8BE5;&#x95EE;&#x9898;</p>
</li>
</ul>
<h3 class="mume-header" id="517-%E4%BC%98%E7%BC%BA%E7%82%B9">5.1.7 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x8D77;&#x5230;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x4F5C;&#x7528;&#x548C;&#x4FDD;&#x62A4;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x4F5C;&#x7528;&#xFF1B;</li>
<li>&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x529F;&#x80FD;&#xFF1B;</li>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x80FD;&#x5C06;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x5206;&#x79BB;&#xFF0C;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x964D;&#x4F4E;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x8026;&#x5408;&#x5EA6;&#xFF1B;</li>
</ul>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF1B;</li>
</ul>
<h3 class="mume-header" id="518-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.1.8 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>
<p>&#x8FDC;&#x7A0B;&#xFF08;Remote&#xFF09;&#x4EE3;&#x7406;</p>
<p>&#x672C;&#x5730;&#x670D;&#x52A1;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x672C;&#x5730;&#x5230;&#x8FDC;&#x7A0B;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#xFF0C;&#x5904;&#x7406;&#x5176;&#x4E2D;&#x53EF;&#x80FD;&#x7684;&#x5F02;&#x5E38;&#x3002;&#x4E3A;&#x826F;&#x597D;&#x7684;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x548C;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x90E8;&#x5206;&#x9690;&#x85CF;&#x8D77;&#x6765;&#xFF0C;&#x53EA;&#x66B4;&#x9732;&#x7ED9;&#x672C;&#x5730;&#x670D;&#x52A1;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x63A5;&#x53E3;&#x5373;&#x53EF;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x8FC7;&#x591A;&#x5173;&#x5FC3;&#x901A;&#x4FE1;&#x90E8;&#x5206;&#x7684;&#x7EC6;&#x8282;&#x3002;</p>
</li>
<li>
<p>&#x9632;&#x706B;&#x5899;&#xFF08;Firewall&#xFF09;&#x4EE3;&#x7406;</p>
<p>&#x5F53;&#x4F60;&#x5C06;&#x6D4F;&#x89C8;&#x5668;&#x914D;&#x7F6E;&#x6210;&#x4F7F;&#x7528;&#x4EE3;&#x7406;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x9632;&#x706B;&#x5899;&#x5C31;&#x5C06;&#x4F60;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x7ED9;&#x4E92;&#x8054;&#x7F51;&#xFF1B;&#x5F53;&#x4E92;&#x8054;&#x7F51;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x65F6;&#xFF0C;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x518D;&#x628A;&#x5B83;&#x8F6C;&#x7ED9;&#x4F60;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x3002;</p>
</li>
<li>
<p>&#x4FDD;&#x62A4;&#xFF08;Protect or Access&#xFF09;&#x4EE3;&#x7406;</p>
<p>&#x63A7;&#x5236;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x7EA7;&#x522B;&#x7684;&#x4F7F;&#x7528;&#x6743;&#x9650;&#x3002;</p>
</li>
</ul>
<h2 class="mume-header" id="52-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2 &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="521-%E6%A6%82%E8%BF%B0">5.2.1 &#x6982;&#x8FF0;</h3>

<p>&#x5982;&#x679C;&#x53BB;&#x6B27;&#x6D32;&#x56FD;&#x5BB6;&#x53BB;&#x65C5;&#x6E38;&#x7684;&#x8BDD;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x63D2;&#x5EA7;&#x5982;&#x4E0B;&#x56FE;&#x6700;&#x5DE6;&#x8FB9;&#xFF0C;&#x662F;&#x6B27;&#x6D32;&#x6807;&#x51C6;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x63D2;&#x5934;&#x5982;&#x4E0B;&#x56FE;&#x6700;&#x53F3;&#x8FB9;&#x7684;&#x3002;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x7684;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&#xFF0C;&#x624B;&#x673A;&#x5728;&#x5F53;&#x5730;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x5145;&#x7535;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x63D2;&#x5EA7;&#x8F6C;&#x6362;&#x5668;&#xFF0C;&#x8F6C;&#x6362;&#x5668;&#x7B2C;1&#x9762;&#x63D2;&#x5165;&#x5F53;&#x5730;&#x7684;&#x63D2;&#x5EA7;&#xFF0C;&#x7B2C;2&#x9762;&#x4F9B;&#x6211;&#x4EEC;&#x5145;&#x7535;&#xFF0C;&#x8FD9;&#x6837;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x7684;&#x63D2;&#x5934;&#x5728;&#x5F53;&#x5730;&#x80FD;&#x4F7F;&#x7528;&#x3002;&#x751F;&#x6D3B;&#x4E2D;&#x8FD9;&#x6837;&#x7684;&#x4F8B;&#x5B50;&#x5F88;&#x591A;&#xFF0C;&#x624B;&#x673A;&#x5145;&#x7535;&#x5668;&#xFF08;&#x5C06;220v&#x8F6C;&#x6362;&#x4E3A;5v&#x7684;&#x7535;&#x538B;&#xFF09;&#xFF0C;&#x8BFB;&#x5361;&#x5668;&#x7B49;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x3002;</p>
<p><img src="img%5C%E8%BD%AC%E6%8E%A5%E5%A4%B4.png" alt></p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x5C06;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x8F6C;&#x6362;&#x6210;&#x5BA2;&#x6237;&#x5E0C;&#x671B;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x5F97;&#x539F;&#x672C;&#x7531;&#x4E8E;&#x63A5;&#x53E3;&#x4E0D;&#x517C;&#x5BB9;&#x800C;&#x4E0D;&#x80FD;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x7684;&#x90A3;&#x4E9B;&#x7C7B;&#x80FD;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x200B;	&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x7C7B;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x548C;&#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#xFF0C;&#x524D;&#x8005;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x6BD4;&#x540E;&#x8005;&#x9AD8;&#xFF0C;&#x4E14;&#x8981;&#x6C42;&#x7A0B;&#x5E8F;&#x5458;&#x4E86;&#x89E3;&#x73B0;&#x6709;&#x7EC4;&#x4EF6;&#x5E93;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x7EC4;&#x4EF6;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x7528;&#x76F8;&#x5BF9;&#x8F83;&#x5C11;&#x4E9B;&#x3002;</p>
<h3 class="mume-header" id="522-%E7%BB%93%E6%9E%84">5.2.2 &#x7ED3;&#x6784;</h3>

<p>&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Adapter&#xFF09;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x76EE;&#x6807;&#xFF08;Target&#xFF09;&#x63A5;&#x53E3;&#xFF1A;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x4E1A;&#x52A1;&#x6240;&#x671F;&#x5F85;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x6216;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x9002;&#x914D;&#x8005;&#xFF08;Adaptee&#xFF09;&#x7C7B;&#xFF1A;&#x5B83;&#x662F;&#x88AB;&#x8BBF;&#x95EE;&#x548C;&#x9002;&#x914D;&#x7684;&#x73B0;&#x5B58;&#x7EC4;&#x4EF6;&#x5E93;&#x4E2D;&#x7684;&#x7EC4;&#x4EF6;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x9002;&#x914D;&#x5668;&#xFF08;Adapter&#xFF09;&#x7C7B;&#xFF1A;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x8F6C;&#x6362;&#x5668;&#xFF0C;&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x6216;&#x5F15;&#x7528;&#x9002;&#x914D;&#x8005;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x628A;&#x9002;&#x914D;&#x8005;&#x63A5;&#x53E3;&#x8F6C;&#x6362;&#x6210;&#x76EE;&#x6807;&#x63A5;&#x53E3;&#xFF0C;&#x8BA9;&#x5BA2;&#x6237;&#x6309;&#x76EE;&#x6807;&#x63A5;&#x53E3;&#x7684;&#x683C;&#x5F0F;&#x8BBF;&#x95EE;&#x9002;&#x914D;&#x8005;&#x3002;</li>
</ul>
<h3 class="mume-header" id="523-%E7%B1%BB%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2.3 &#x7C7B;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</h3>

<p>&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x9002;&#x914D;&#x5668;&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7684;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;&#xFF0C;&#x540C;&#x65F6;&#x53C8;&#x7EE7;&#x627F;&#x73B0;&#x6709;&#x7EC4;&#x4EF6;&#x5E93;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x8BFB;&#x5361;&#x5668;</p>
<p>&#x73B0;&#x6709;&#x4E00;&#x53F0;&#x7535;&#x8111;&#x53EA;&#x80FD;&#x8BFB;&#x53D6;SD&#x5361;&#xFF0C;&#x800C;&#x8981;&#x8BFB;&#x53D6;TF&#x5361;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x8BDD;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x3002;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8BFB;&#x5361;&#x5668;&#xFF0C;&#x5C06;TF&#x5361;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img/&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//SD&#x5361;&#x7684;&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x8BFB;&#x53D6;SD&#x5361;&#x65B9;&#x6CD5;</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//&#x5199;&#x5165;SD&#x5361;&#x529F;&#x80FD;</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD&#x5361;&#x5B9E;&#x73B0;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;sd card read a msg :hello word SD&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sd card write msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x7535;&#x8111;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;sd card null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF&#x5361;&#x63A5;&#x53E3;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x8BFB;&#x53D6;TF&#x5361;&#x65B9;&#x6CD5;</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//&#x5199;&#x5165;TF&#x5361;&#x529F;&#x80FD;</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF&#x5361;&#x5B9E;&#x73B0;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">&quot;tf card read msg : hello word tf card&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;tf card write a msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5B9A;&#x4E49;&#x9002;&#x914D;&#x5668;&#x7C7B;&#xFF08;SD&#x517C;&#x5BB9;TF&#xFF09;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x7C7B;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x8FDD;&#x80CC;&#x4E86;&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;&#x3002;&#x7C7B;&#x9002;&#x914D;&#x5668;&#x662F;&#x5BA2;&#x6237;&#x7C7B;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x89C4;&#x8303;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x7528;&#xFF0C;&#x53CD;&#x4E4B;&#x4E0D;&#x53EF;&#x7528;&#x3002;</p>
<h3 class="mume-header" id="524-%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2.4 &#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</h3>

<p>&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;&#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x53EF;&#x91C6;&#x7528;&#x5C06;&#x73B0;&#x6709;&#x7EC4;&#x4EF6;&#x5E93;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x7684;&#x7EC4;&#x4EF6;&#x5F15;&#x5165;&#x9002;&#x914D;&#x5668;&#x7C7B;&#x4E2D;&#xFF0C;&#x8BE5;&#x7C7B;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7684;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x8BFB;&#x5361;&#x5668;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x5C06;&#x8BFB;&#x5361;&#x5668;&#x7684;&#x6848;&#x4F8B;&#x8FDB;&#x884C;&#x6539;&#x5199;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img\&#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x7C7B;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x9002;&#x914D;&#x5668;&#x7C7B;&#xFF08;SDAdapterTF&#xFF09;&#x548C;&#x6D4B;&#x8BD5;&#x7C7B;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x521B;&#x5EFA;&#x9002;&#x914D;&#x5668;&#x5BF9;&#x8C61;&#xFF08;SD&#x517C;&#x5BB9;TF&#xFF09;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x662F;&#x63A5;&#x53E3;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x3002;&#x5F53;&#x4E0D;&#x5E0C;&#x671B;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;Adapter &#xFF0C;&#x5B9E;&#x73B0;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x7EE7;&#x627F;&#x8BE5;&#x62BD;&#x8C61;&#x7C7B;&#x5373;&#x53EF;&#x3002;</p>
</blockquote>
<h3 class="mume-header" id="525-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5.2.5 &#x5E94;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x4EE5;&#x524D;&#x5F00;&#x53D1;&#x7684;&#x7CFB;&#x7EDF;&#x5B58;&#x5728;&#x6EE1;&#x8DB3;&#x65B0;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;&#x9700;&#x6C42;&#x7684;&#x7C7B;&#xFF0C;&#x4F46;&#x5176;&#x63A5;&#x53E3;&#x540C;&#x65B0;&#x7CFB;&#x7EDF;&#x7684;&#x63A5;&#x53E3;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</li>
<li>&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F46;&#x7EC4;&#x4EF6;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x548C;&#x81EA;&#x5DF1;&#x8981;&#x6C42;&#x7684;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x3002;</li>
</ul>
<h3 class="mume-header" id="526-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>Reader&#xFF08;&#x5B57;&#x7B26;&#x6D41;&#xFF09;&#x3001;InputStream&#xFF08;&#x5B57;&#x8282;&#x6D41;&#xFF09;&#x7684;&#x9002;&#x914D;&#x4F7F;&#x7528;&#x7684;&#x662F;InputStreamReader&#x3002;</p>
<p>InputStreamReader&#x7EE7;&#x627F;&#x81EA;java.io&#x5305;&#x4E2D;&#x7684;Reader&#xFF0C;&#x5BF9;&#x4ED6;&#x4E2D;&#x7684;&#x62BD;&#x8C61;&#x7684;&#x672A;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;&#x7ED9;&#x51FA;&#x5B9E;&#x73B0;&#x3002;&#x5982;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</pre><p>&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#x4E2D;&#x7684;sd&#xFF08;StreamDecoder&#x7C7B;&#x5BF9;&#x8C61;&#xFF09;&#xFF0C;&#x5728;Sun&#x7684;JDK&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x662F;&#x5BF9;sun.nio.cs.StreamDecoder&#x7C7B;&#x7684;&#x540C;&#x540D;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x5C01;&#x88C5;&#x3002;&#x7C7B;&#x7ED3;&#x6784;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="img%5C%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.png" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF1A;</p>
<ul>
<li>InputStreamReader&#x662F;&#x5BF9;&#x540C;&#x6837;&#x5B9E;&#x73B0;&#x4E86;Reader&#x7684;StreamDecoder&#x7684;&#x5C01;&#x88C5;&#x3002;</li>
<li>StreamDecoder&#x4E0D;&#x662F;Java SE API&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x662F;Sun  JDK&#x7ED9;&#x51FA;&#x7684;&#x81EA;&#x8EAB;&#x5B9E;&#x73B0;&#x3002;&#x4F46;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4ED6;&#x4EEC;&#x5BF9;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x5B57;&#x8282;&#x6D41;&#x7C7B;&#xFF08;InputStream&#xFF09;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x8BE5;&#x7C7B;&#x8FDB;&#x884C;&#x4E86;&#x5B57;&#x8282;&#x6D41;&#x548C;&#x5B57;&#x7B26;&#x6D41;&#x4E4B;&#x95F4;&#x7684;&#x89E3;&#x7801;&#x8F6C;&#x6362;&#x3002;</li>
</ul>
<p><font color="red">&#x7ED3;&#x8BBA;&#xFF1A;</font></p>
<p>&#x200B;	&#x4ECE;&#x8868;&#x5C42;&#x6765;&#x770B;&#xFF0C;InputStreamReader&#x505A;&#x4E86;InputStream&#x5B57;&#x8282;&#x6D41;&#x7C7B;&#x5230;Reader&#x5B57;&#x7B26;&#x6D41;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x6362;&#x3002;&#x800C;&#x4ECE;&#x5982;&#x4E0A;Sun JDK&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x5173;&#x7CFB;&#x7ED3;&#x6784;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x662F;StreamDecoder&#x7684;&#x8BBE;&#x8BA1;&#x5B9E;&#x73B0;&#x5728;&#x5B9E;&#x9645;&#x4E0A;&#x91C7;&#x7528;&#x4E86;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x3002;</p>
<h2 class="mume-header" id="53-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F">5.3 &#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="531-%E6%A6%82%E8%BF%B0">5.3.1 &#x6982;&#x8FF0;</h3>

<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5FEB;&#x9910;&#x5E97;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p>&#x5FEB;&#x9910;&#x5E97;&#x6709;&#x7092;&#x9762;&#x3001;&#x7092;&#x996D;&#x8FD9;&#x4E9B;&#x5FEB;&#x9910;&#xFF0C;&#x53EF;&#x4EE5;&#x989D;&#x5916;&#x9644;&#x52A0;&#x9E21;&#x86CB;&#x3001;&#x706B;&#x817F;&#x3001;&#x57F9;&#x6839;&#x8FD9;&#x4E9B;&#x914D;&#x83DC;&#xFF0C;&#x5F53;&#x7136;&#x52A0;&#x914D;&#x83DC;&#x9700;&#x8981;&#x989D;&#x5916;&#x52A0;&#x94B1;&#xFF0C;&#x6BCF;&#x4E2A;&#x914D;&#x83DC;&#x7684;&#x4EF7;&#x94B1;&#x901A;&#x5E38;&#x4E0D;&#x592A;&#x4E00;&#x6837;&#xFF0C;&#x90A3;&#x4E48;&#x8BA1;&#x7B97;&#x603B;&#x4EF7;&#x5C31;&#x4F1A;&#x663E;&#x5F97;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;</p>
<img src="D:/&#x4F20;&#x667A;&#x64AD;&#x5BA2;/&#x4E13;&#x9898;/&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;/&#x6210;&#x54C1;/&#x7B14;&#x8BB0;/assets/&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;-&#x4F7F;&#x7528;&#x524D;.png" style="zoom:80%;">
<p>&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x5F0F;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>
<p>&#x6269;&#x5C55;&#x6027;&#x4E0D;&#x597D;</p>
<p>&#x5982;&#x679C;&#x8981;&#x518D;&#x52A0;&#x4E00;&#x79CD;&#x914D;&#x6599;&#xFF08;&#x706B;&#x817F;&#x80A0;&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x7ED9;FriedRice&#x548C;FriedNoodles&#x5206;&#x522B;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#x3002;&#x5982;&#x679C;&#x8981;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5FEB;&#x9910;&#x54C1;&#x7C7B;&#xFF08;&#x7092;&#x6CB3;&#x7C89;&#xFF09;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x66F4;&#x591A;&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
</li>
<li>
<p>&#x4EA7;&#x751F;&#x8FC7;&#x591A;&#x7684;&#x5B50;&#x7C7B;</p>
</li>
</ul>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x6307;&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x73B0;&#x6709;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x52A8;&#x6001;&#x5730;&#x7ED9;&#x8BE5;&#x5BF9;&#x8C61;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x804C;&#x8D23;&#xFF08;&#x5373;&#x589E;&#x52A0;&#x5176;&#x989D;&#x5916;&#x529F;&#x80FD;&#xFF09;&#x7684;&#x6A21;&#x5F0F;&#x3002;</p>
<h3 class="mume-header" id="532-%E7%BB%93%E6%9E%84">5.3.2 &#x7ED3;&#x6784;</h3>

<p>&#x88C5;&#x9970;&#xFF08;Decorator&#xFF09;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#xFF08;Component&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x63A5;&#x53E3;&#x4EE5;&#x89C4;&#x8303;&#x51C6;&#x5907;&#x63A5;&#x6536;&#x9644;&#x52A0;&#x8D23;&#x4EFB;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x6784;&#x4EF6;&#xFF08;Concrete  Component&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x88C5;&#x9970;&#x89D2;&#x8272;&#x4E3A;&#x5176;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x804C;&#x8D23;&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x88C5;&#x9970;&#xFF08;Decorator&#xFF09;&#x89D2;&#x8272; &#xFF1A; &#x7EE7;&#x627F;&#x6216;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#xFF0C;&#x5E76;&#x5305;&#x542B;&#x5177;&#x4F53;&#x6784;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5176;&#x5B50;&#x7C7B;&#x6269;&#x5C55;&#x5177;&#x4F53;&#x6784;&#x4EF6;&#x7684;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x88C5;&#x9970;&#xFF08;ConcreteDecorator&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x88C5;&#x9970;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x7ED9;&#x5177;&#x4F53;&#x6784;&#x4EF6;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x9644;&#x52A0;&#x7684;&#x8D23;&#x4EFB;&#x3002;</li>
</ul>
<h3 class="mume-header" id="533-%E6%A1%88%E4%BE%8B">5.3.3 &#x6848;&#x4F8B;</h3>

<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x5BF9;&#x5FEB;&#x9910;&#x5E97;&#x6848;&#x4F8B;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#xFF0C;&#x4F53;&#x4F1A;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x7CBE;&#x9AD3;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img/&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;.png" style="zoom:75%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x5FEB;&#x9910;&#x63A5;&#x53E3;public abstract class FastFood {    private float price;    private String desc;    public FastFood() {    }    public FastFood(float price, String desc) {        this.price = price;        this.desc = desc;    }    public void setPrice(float price) {        this.price = price;    }    public float getPrice() {        return price;    }    public String getDesc() {        return desc;    }    public void setDesc(String desc) {        this.desc = desc;    }    public abstract float cost();  //&#x83B7;&#x53D6;&#x4EF7;&#x683C;}//&#x7092;&#x996D;public class FriedRice extends FastFood {    public FriedRice() {        super(10, &quot;&#x7092;&#x996D;&quot;);    }    public float cost() {        return getPrice();    }}//&#x7092;&#x9762;public class FriedNoodles extends FastFood {    public FriedNoodles() {        super(12, &quot;&#x7092;&#x9762;&quot;);    }    public float cost() {        return getPrice();    }}//&#x914D;&#x6599;&#x7C7B;public abstract class Garnish extends FastFood {    private FastFood fastFood;    public FastFood getFastFood() {        return fastFood;    }    public void setFastFood(FastFood fastFood) {        this.fastFood = fastFood;    }    public Garnish(FastFood fastFood, float price, String desc) {        super(price,desc);        this.fastFood = fastFood;    }}//&#x9E21;&#x86CB;&#x914D;&#x6599;public class Egg extends Garnish {    public Egg(FastFood fastFood) {        super(fastFood,1,&quot;&#x9E21;&#x86CB;&quot;);    }    public float cost() {        return getPrice() + getFastFood().getPrice();    }    @Override    public String getDesc() {        return super.getDesc() + getFastFood().getDesc();    }}//&#x57F9;&#x6839;&#x914D;&#x6599;public class Bacon extends Garnish {    public Bacon(FastFood fastFood) {        super(fastFood,2,&quot;&#x57F9;&#x6839;&quot;);    }    @Override    public float cost() {        return getPrice() + getFastFood().getPrice();    }    @Override    public String getDesc() {        return super.getDesc() + getFastFood().getDesc();    }}//&#x6D4B;&#x8BD5;&#x7C7B;public class Client {    public static void main(String[] args) {        //&#x70B9;&#x4E00;&#x4EFD;&#x7092;&#x996D;        FastFood food = new FriedRice();        //&#x82B1;&#x8D39;&#x7684;&#x4EF7;&#x683C;        System.out.println(food.getDesc() + &quot; &quot; + food.cost() + &quot;&#x5143;&quot;);        System.out.println(&quot;========&quot;);        //&#x70B9;&#x4E00;&#x4EFD;&#x52A0;&#x9E21;&#x86CB;&#x7684;&#x7092;&#x996D;        FastFood food1 = new FriedRice();        food1 = new Egg(food1);        //&#x82B1;&#x8D39;&#x7684;&#x4EF7;&#x683C;        System.out.println(food1.getDesc() + &quot; &quot; + food1.cost() + &quot;&#x5143;&quot;);        System.out.println(&quot;========&quot;);        //&#x70B9;&#x4E00;&#x4EFD;&#x52A0;&#x57F9;&#x6839;&#x7684;&#x7092;&#x9762;        FastFood food2 = new FriedNoodles();        food2 = new Bacon(food2);        //&#x82B1;&#x8D39;&#x7684;&#x4EF7;&#x683C;        System.out.println(food2.getDesc() + &quot; &quot; + food2.cost() + &quot;&#x5143;&quot;);    }}</span>
</pre><p><strong>&#x597D;&#x5904;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x5E26;&#x6765;&#x6BD4;&#x7EE7;&#x627F;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x6027;&#x7684;&#x6269;&#x5C55;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x7528;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7EC4;&#x5408;&#x4E0D;&#x540C;&#x7684;&#x88C5;&#x9970;&#x8005;&#x5BF9;&#x8C61;&#x6765;&#x83B7;&#x53D6;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x884C;&#x4E3A;&#x72B6;&#x6001;&#x7684;&#x591A;&#x6837;&#x5316;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x6BD4;&#x7EE7;&#x627F;&#x66F4;&#x5177;&#x826F;&#x597D;&#x7684;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x5B8C;&#x7F8E;&#x7684;&#x9075;&#x5FAA;&#x5F00;&#x95ED;&#x539F;&#x5219;&#xFF0C;&#x7EE7;&#x627F;&#x662F;&#x9759;&#x6001;&#x7684;&#x9644;&#x52A0;&#x8D23;&#x4EFB;&#xFF0C;&#x88C5;&#x9970;&#x8005;&#x5219;&#x662F;&#x52A8;&#x6001;&#x7684;&#x9644;&#x52A0;&#x8D23;&#x4EFB;&#x3002;</p>
</li>
<li>
<p>&#x88C5;&#x9970;&#x7C7B;&#x548C;&#x88AB;&#x88C5;&#x9970;&#x7C7B;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x53D1;&#x5C55;&#xFF0C;&#x4E0D;&#x4F1A;&#x76F8;&#x4E92;&#x8026;&#x5408;&#xFF0C;&#x88C5;&#x9970;&#x6A21;&#x5F0F;&#x662F;&#x7EE7;&#x627F;&#x7684;&#x4E00;&#x4E2A;&#x66FF;&#x4EE3;&#x6A21;&#x5F0F;&#xFF0C;&#x88C5;&#x9970;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x6269;&#x5C55;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
</li>
</ul>
<h3 class="mume-header" id="534-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.3.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>
<p>&#x5F53;&#x4E0D;&#x80FD;&#x91C7;&#x7528;&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x6269;&#x5145;&#x6216;&#x8005;&#x91C7;&#x7528;&#x7EE7;&#x627F;&#x4E0D;&#x5229;&#x4E8E;&#x7CFB;&#x7EDF;&#x6269;&#x5C55;&#x548C;&#x7EF4;&#x62A4;&#x65F6;&#x3002;</p>
<p>&#x4E0D;&#x80FD;&#x91C7;&#x7528;&#x7EE7;&#x627F;&#x7684;&#x60C5;&#x51B5;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x7C7B;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x7C7B;&#x662F;&#x7CFB;&#x7EDF;&#x4E2D;&#x5B58;&#x5728;&#x5927;&#x91CF;&#x72EC;&#x7ACB;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x4E3A;&#x652F;&#x6301;&#x6BCF;&#x4E00;&#x79CD;&#x7EC4;&#x5408;&#x5C06;&#x4EA7;&#x751F;&#x5927;&#x91CF;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x4F7F;&#x5F97;&#x5B50;&#x7C7B;&#x6570;&#x76EE;&#x5448;&#x7206;&#x70B8;&#x6027;&#x589E;&#x957F;&#xFF1B;</li>
<li>&#x7B2C;&#x4E8C;&#x7C7B;&#x662F;&#x56E0;&#x4E3A;&#x7C7B;&#x5B9A;&#x4E49;&#x4E0D;&#x80FD;&#x7EE7;&#x627F;&#xFF08;&#x5982;final&#x7C7B;&#xFF09;</li>
</ul>
</li>
<li>
<p>&#x5728;&#x4E0D;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EE5;&#x52A8;&#x6001;&#x3001;&#x900F;&#x660E;&#x7684;&#x65B9;&#x5F0F;&#x7ED9;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x804C;&#x8D23;&#x3002;</p>
</li>
<li>
<p>&#x5F53;&#x5BF9;&#x8C61;&#x7684;&#x529F;&#x80FD;&#x8981;&#x6C42;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x6DFB;&#x52A0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x518D;&#x52A8;&#x6001;&#x5730;&#x64A4;&#x9500;&#x65F6;&#x3002;</p>
</li>
</ul>
<h3 class="mume-header" id="535-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.3.5 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>IO&#x6D41;&#x4E2D;&#x7684;&#x5305;&#x88C5;&#x7C7B;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x3002;BufferedInputStream&#xFF0C;BufferedOutputStream&#xFF0C;BufferedReader&#xFF0C;BufferedWriter&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4EE5;BufferedWriter&#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#x660E;&#xFF0C;&#x5148;&#x770B;&#x770B;&#x5982;&#x4F55;&#x4F7F;&#x7528;BufferedWriter</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">//&#x521B;&#x5EFA;BufferedWriter&#x5BF9;&#x8C61;        //&#x521B;&#x5EFA;FileWriter&#x5BF9;&#x8C61;        FileWriter fw = new FileWriter(&quot;C:\\Users\\Think\\Desktop\\a.txt&quot;);        BufferedWriter bw = new BufferedWriter(fw);        //&#x5199;&#x6570;&#x636E;        bw.write(&quot;hello Buffered&quot;);        bw.close();    }}</span>
</pre><p>&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x611F;&#x89C9;&#x786E;&#x5B9E;&#x50CF;&#x662F;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x5B83;&#x4EEC;&#x7684;&#x7ED3;&#x6784;&#xFF1A;</p>
<img src="img\&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;-jdk&#x6E90;&#x7801;.png" style="zoom:80%;">
<blockquote>
<p><font color="red">&#x5C0F;&#x7ED3;&#xFF1A;</font></p>
<p>&#x200B;	BufferedWriter&#x4F7F;&#x7528;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x5BF9;Writer&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x8FDB;&#x884C;&#x4E86;&#x589E;&#x5F3A;&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x5199;&#x6570;&#x636E;&#x7684;&#x6548;&#x7387;&#x3002;</p>
</blockquote>
<h3 class="mume-header" id="536-%E4%BB%A3%E7%90%86%E5%92%8C%E8%A3%85%E9%A5%B0%E8%80%85%E7%9A%84%E5%8C%BA%E5%88%AB">5.3.6 &#x4EE3;&#x7406;&#x548C;&#x88C5;&#x9970;&#x8005;&#x7684;&#x533A;&#x522B;</h3>

<p>&#x9759;&#x6001;&#x4EE3;&#x7406;&#x548C;&#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x533A;&#x522B;&#xFF1A;</p>
<ul>
<li>&#x76F8;&#x540C;&#x70B9;&#xFF1A;
<ul>
<li>&#x90FD;&#x8981;&#x5B9E;&#x73B0;&#x4E0E;&#x76EE;&#x6807;&#x7C7B;&#x76F8;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;</li>
<li>&#x5728;&#x4E24;&#x4E2A;&#x7C7B;&#x4E2D;&#x90FD;&#x8981;&#x58F0;&#x660E;&#x76EE;&#x6807;&#x5BF9;&#x8C61;</li>
<li>&#x90FD;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x589E;&#x5F3A;&#x76EE;&#x6807;&#x65B9;&#x6CD5;</li>
</ul>
</li>
<li>&#x4E0D;&#x540C;&#x70B9;&#xFF1A;
<ul>
<li>&#x76EE;&#x7684;&#x4E0D;&#x540C;<br>
&#x88C5;&#x9970;&#x8005;&#x662F;&#x4E3A;&#x4E86;&#x589E;&#x5F3A;&#x76EE;&#x6807;&#x5BF9;&#x8C61;<br>
&#x9759;&#x6001;&#x4EE3;&#x7406;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x62A4;&#x548C;&#x9690;&#x85CF;&#x76EE;&#x6807;&#x5BF9;&#x8C61;</li>
<li>&#x83B7;&#x53D6;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x6784;&#x5EFA;&#x7684;&#x5730;&#x65B9;&#x4E0D;&#x540C;<br>
&#x88C5;&#x9970;&#x8005;&#x662F;&#x7531;&#x5916;&#x754C;&#x4F20;&#x9012;&#x8FDB;&#x6765;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4F20;&#x9012;<br>
&#x9759;&#x6001;&#x4EE3;&#x7406;&#x662F;&#x5728;&#x4EE3;&#x7406;&#x7C7B;&#x5185;&#x90E8;&#x521B;&#x5EFA;&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x9690;&#x85CF;&#x76EE;&#x6807;&#x5BF9;&#x8C61;</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="54-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F">5.4 &#x6865;&#x63A5;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="541-%E6%A6%82%E8%BF%B0">5.4.1 &#x6982;&#x8FF0;</h3>

<p>&#x73B0;&#x5728;&#x6709;&#x4E00;&#x4E2A;&#x9700;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x5F62;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E2A;&#x56FE;&#x5F62;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x989C;&#x8272;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8BBE;&#x8BA1;&#x7C7B;&#x7684;&#x5173;&#x7CFB;&#xFF1A;</p>
<p><img src="D:/sjtu/AIR/SYY/JOB/Note/doc/DesignPatterns/img/image-20200207194617620.png" alt></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x6709;&#x5F88;&#x591A;&#x7684;&#x7C7B;&#xFF0C;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x518D;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x5F62;&#x72B6;&#x6216;&#x518D;&#x589E;&#x52A0;&#x4E00;&#x79CD;&#x989C;&#x8272;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x66F4;&#x591A;&#x7684;&#x7C7B;&#x3002;</p>
<p>&#x8BD5;&#x60F3;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x6709;&#x591A;&#x79CD;&#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x5316;&#x7684;&#x7EF4;&#x5EA6;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x7528;&#x7EE7;&#x627F;&#x65B9;&#x5F0F;&#x4F1A;&#x9020;&#x6210;&#x7C7B;&#x7206;&#x70B8;&#xFF0C;&#x6269;&#x5C55;&#x8D77;&#x6765;&#x4E0D;&#x7075;&#x6D3B;&#x3002;&#x6BCF;&#x6B21;&#x5728;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#x4E0A;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x90FD;&#x8981;&#x589E;&#x52A0;&#x591A;&#x4E2A;&#x5B50;&#x7C7B;&#x3002;&#x4E3A;&#x4E86;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x7684;&#x8BBE;&#x8BA1;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x5C06;&#x62BD;&#x8C61;&#x4E0E;&#x5B9E;&#x73B0;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x53D8;&#x5316;&#x3002;&#x5B83;&#x662F;&#x7528;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x4EE3;&#x66FF;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4ECE;&#x800C;&#x964D;&#x4F4E;&#x4E86;&#x62BD;&#x8C61;&#x548C;&#x5B9E;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x53EF;&#x53D8;&#x7EF4;&#x5EA6;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x3002;</p>
<h3 class="mume-header" id="542-%E7%BB%93%E6%9E%84">5.4.2 &#x7ED3;&#x6784;</h3>

<p>&#x6865;&#x63A5;&#xFF08;Bridge&#xFF09;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x5316;&#xFF08;Abstraction&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x5E76;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x5BF9;&#x5B9E;&#x73B0;&#x5316;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x3002;</li>
<li>&#x6269;&#x5C55;&#x62BD;&#x8C61;&#x5316;&#xFF08;Refined  Abstraction&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x662F;&#x62BD;&#x8C61;&#x5316;&#x89D2;&#x8272;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5B9E;&#x73B0;&#x7236;&#x7C7B;&#x4E2D;&#x7684;&#x4E1A;&#x52A1;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x5316;&#x89D2;&#x8272;&#x4E2D;&#x7684;&#x4E1A;&#x52A1;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5B9E;&#x73B0;&#x5316;&#xFF08;Implementor&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B9A;&#x4E49;&#x5B9E;&#x73B0;&#x5316;&#x89D2;&#x8272;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4F9B;&#x6269;&#x5C55;&#x62BD;&#x8C61;&#x5316;&#x89D2;&#x8272;&#x8C03;&#x7528;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5316;&#xFF08;Concrete Implementor&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x7ED9;&#x51FA;&#x5B9E;&#x73B0;&#x5316;&#x89D2;&#x8272;&#x63A5;&#x53E3;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
<h3 class="mume-header" id="543-%E6%A1%88%E4%BE%8B">5.4.3 &#x6848;&#x4F8B;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x89C6;&#x9891;&#x64AD;&#x653E;&#x5668;</p>
<p>&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x8DE8;&#x5E73;&#x53F0;&#x89C6;&#x9891;&#x64AD;&#x653E;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5E73;&#x53F0;&#xFF08;&#x5982;Windows&#x3001;Mac&#x3001;Linux&#x7B49;&#xFF09;&#x4E0A;&#x64AD;&#x653E;&#x591A;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x89C6;&#x9891;&#x6587;&#x4EF6;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x89C6;&#x9891;&#x683C;&#x5F0F;&#x5305;&#x62EC;RMVB&#x3001;AVI&#x3001;WMV&#x7B49;&#x3002;&#x8BE5;&#x64AD;&#x653E;&#x5668;&#x5305;&#x542B;&#x4E86;&#x4E24;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img\&#x6865;&#x63A5;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x89C6;&#x9891;&#x6587;&#x4EF6;public interface VideoFile {    void decode(String fileName);}//avi&#x6587;&#x4EF6;public class AVIFile implements VideoFile {    public void decode(String fileName) {        System.out.println(&quot;avi&#x89C6;&#x9891;&#x6587;&#x4EF6;&#xFF1A;&quot;+ fileName);    }}//rmvb&#x6587;&#x4EF6;public class REVBBFile implements VideoFile {    public void decode(String fileName) {        System.out.println(&quot;rmvb&#x6587;&#x4EF6;&#xFF1A;&quot; + fileName);    }}//&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7248;&#x672C;public abstract class OperatingSystemVersion {    protected VideoFile videoFile;    public OperatingSystemVersion(VideoFile videoFile) {        this.videoFile = videoFile;    }    public abstract void play(String fileName);}//Windows&#x7248;&#x672C;public class Windows extends OperatingSystem {    public Windows(VideoFile videoFile) {        super(videoFile);    }    public void play(String fileName) {        videoFile.decode(fileName);    }}//mac&#x7248;&#x672C;public class Mac extends OperatingSystemVersion {    public Mac(VideoFile videoFile) {        super(videoFile);    }    public void play(String fileName) {		videoFile.decode(fileName);    }}//&#x6D4B;&#x8BD5;&#x7C7B;public class Client {    public static void main(String[] args) {        OperatingSystem os = new Windows(new AVIFile());        os.play(&quot;&#x6218;&#x72FC;3&quot;);    }}</span>
</pre><p><strong>&#x597D;&#x5904;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x63D0;&#x9AD8;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x6269;&#x5145;&#x6027;&#xFF0C;&#x5728;&#x4E24;&#x4E2A;&#x53D8;&#x5316;&#x7EF4;&#x5EA6;&#x4E2D;&#x4EFB;&#x610F;&#x6269;&#x5C55;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x539F;&#x6709;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>&#x5982;&#xFF1A;&#x5982;&#x679C;&#x73B0;&#x5728;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x89C6;&#x9891;&#x6587;&#x4EF6;&#x7C7B;&#x578B;wmv&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x518D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;VideoFile&#x63A5;&#x53E3;&#x5373;&#x53EF;&#xFF0C;&#x5176;&#x4ED6;&#x7C7B;&#x4E0D;&#x9700;&#x8981;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;</p>
</li>
<li>
<p>&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x5BF9;&#x5BA2;&#x6237;&#x900F;&#x660E;</p>
</li>
</ul>
<h3 class="mume-header" id="544-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.4.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x7C7B;&#x5B58;&#x5728;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x53D8;&#x5316;&#x7684;&#x7EF4;&#x5EA6;&#xFF0C;&#x4E14;&#x8FD9;&#x4E24;&#x4E2A;&#x7EF4;&#x5EA6;&#x90FD;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x65F6;&#x3002;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x4E0D;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x6216;&#x56E0;&#x4E3A;&#x591A;&#x5C42;&#x6B21;&#x7EE7;&#x627F;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x7C7B;&#x7684;&#x4E2A;&#x6570;&#x6025;&#x5267;&#x589E;&#x52A0;&#x65F6;&#x3002;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x5728;&#x6784;&#x4EF6;&#x7684;&#x62BD;&#x8C61;&#x5316;&#x89D2;&#x8272;&#x548C;&#x5177;&#x4F53;&#x5316;&#x89D2;&#x8272;&#x4E4B;&#x95F4;&#x589E;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x65F6;&#x3002;&#x907F;&#x514D;&#x5728;&#x4E24;&#x4E2A;&#x5C42;&#x6B21;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x9759;&#x6001;&#x7684;&#x7EE7;&#x627F;&#x8054;&#x7CFB;&#xFF0C;&#x901A;&#x8FC7;&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x4F7F;&#x5B83;&#x4EEC;&#x5728;&#x62BD;&#x8C61;&#x5C42;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x3002;</li>
</ul>
<h2 class="mume-header" id="55-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F">5.5 &#x5916;&#x89C2;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="551-%E6%A6%82%E8%BF%B0">5.5.1 &#x6982;&#x8FF0;</h3>

<p>&#x6709;&#x4E9B;&#x4EBA;&#x53EF;&#x80FD;&#x7092;&#x8FC7;&#x80A1;&#x7968;&#xFF0C;&#x4F46;&#x5176;&#x5B9E;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x90FD;&#x4E0D;&#x592A;&#x61C2;&#xFF0C;&#x8FD9;&#x79CD;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x4E86;&#x89E3;&#x8BC1;&#x5238;&#x77E5;&#x8BC6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x505A;&#x80A1;&#x7968;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x4E8F;&#x94B1;&#x7684;&#xFF0C;&#x521A;&#x5F00;&#x59CB;&#x7092;&#x80A1;&#x80AF;&#x5B9A;&#x90FD;&#x4F1A;&#x60F3;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E2A;&#x61C2;&#x884C;&#x7684;&#x5E2E;&#x5E2E;&#x624B;&#x5C31;&#x597D;&#xFF0C;&#x5176;&#x5B9E;&#x57FA;&#x91D1;&#x5C31;&#x662F;&#x4E2A;&#x597D;&#x5E2E;&#x624B;&#xFF0C;&#x652F;&#x4ED8;&#x5B9D;&#x91CC;&#x5C31;&#x6709;&#x8BB8;&#x591A;&#x7684;&#x57FA;&#x91D1;&#xFF0C;&#x5B83;&#x5C06;&#x6295;&#x8D44;&#x8005;&#x5206;&#x6563;&#x7684;&#x8D44;&#x91D1;&#x96C6;&#x4E2D;&#x8D77;&#x6765;&#xFF0C;&#x4EA4;&#x7531;&#x4E13;&#x4E1A;&#x7684;&#x7ECF;&#x7406;&#x4EBA;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF0C;&#x6295;&#x8D44;&#x4E8E;&#x80A1;&#x7968;&#x3001;&#x503A;&#x5238;&#x3001;&#x5916;&#x6C47;&#x7B49;&#x9886;&#x57DF;&#xFF0C;&#x800C;&#x57FA;&#x91D1;&#x6295;&#x8D44;&#x7684;&#x6536;&#x76CA;&#x5F52;&#x6301;&#x6709;&#x8005;&#x6240;&#x6709;&#xFF0C;&#x7BA1;&#x7406;&#x673A;&#x6784;&#x6536;&#x53D6;&#x4E00;&#x5B9A;&#x6BD4;&#x4F8B;&#x7684;&#x6258;&#x7BA1;&#x7BA1;&#x7406;&#x8D39;&#x7528;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x53C8;&#x540D;&#x95E8;&#x9762;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x901A;&#x8FC7;&#x4E3A;&#x591A;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x4F7F;&#x8FD9;&#x4E9B;&#x5B50;&#x7CFB;&#x7EDF;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x6A21;&#x5F0F;&#x3002;&#x8BE5;&#x6A21;&#x5F0F;&#x5BF9;&#x5916;&#x6709;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x63A5;&#x53E3;&#xFF0C;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0D;&#x7528;&#x5173;&#x5FC3;&#x5185;&#x90E8;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x5177;&#x4F53;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x3002;</p>
<p>&#x200B;	&#x5916;&#x89C2;&#xFF08;Facade&#xFF09;&#x6A21;&#x5F0F;&#x662F;&#x201C;&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x201D;&#x7684;&#x5178;&#x578B;&#x5E94;&#x7528;</p>
<p><img src="img%5C%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%BC%95%E5%85%A5.jpg" alt></p>
<h3 class="mume-header" id="552-%E7%BB%93%E6%9E%84">5.5.2 &#x7ED3;&#x6784;</h3>

<p>&#x5916;&#x89C2;&#xFF08;Facade&#xFF09;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x5916;&#x89C2;&#xFF08;Facade&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x4E3A;&#x591A;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5171;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x5B50;&#x7CFB;&#x7EDF;&#xFF08;Sub System&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x7CFB;&#x7EDF;&#x7684;&#x90E8;&#x5206;&#x529F;&#x80FD;&#xFF0C;&#x5BA2;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5916;&#x89C2;&#x89D2;&#x8272;&#x8BBF;&#x95EE;&#x5B83;&#x3002;</li>
</ul>
<h3 class="mume-header" id="553-%E6%A1%88%E4%BE%8B">5.5.3 &#x6848;&#x4F8B;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x667A;&#x80FD;&#x5BB6;&#x7535;&#x63A7;&#x5236;</p>
<p>&#x5C0F;&#x660E;&#x7684;&#x7237;&#x7237;&#x5DF2;&#x7ECF;60&#x5C81;&#x4E86;&#xFF0C;&#x4E00;&#x4E2A;&#x4EBA;&#x5728;&#x5BB6;&#x751F;&#x6D3B;&#xFF1A;&#x6BCF;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x6253;&#x5F00;&#x706F;&#x3001;&#x6253;&#x5F00;&#x7535;&#x89C6;&#x3001;&#x6253;&#x5F00;&#x7A7A;&#x8C03;&#xFF1B;&#x7761;&#x89C9;&#x65F6;&#x5173;&#x95ED;&#x706F;&#x3001;&#x5173;&#x95ED;&#x7535;&#x89C6;&#x3001;&#x5173;&#x95ED;&#x7A7A;&#x8C03;&#xFF1B;&#x64CD;&#x4F5C;&#x8D77;&#x6765;&#x90FD;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;&#x6240;&#x4EE5;&#x5C0F;&#x660E;&#x7ED9;&#x7237;&#x7237;&#x4E70;&#x4E86;&#x667A;&#x80FD;&#x97F3;&#x7BB1;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BED;&#x97F3;&#x76F4;&#x63A5;&#x63A7;&#x5236;&#x8FD9;&#x4E9B;&#x667A;&#x80FD;&#x5BB6;&#x7535;&#x7684;&#x5F00;&#x542F;&#x548C;&#x5173;&#x95ED;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="img/&#x5916;&#x89C2;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x706F;&#x7C7B;public class Light {    public void on() {        System.out.println(&quot;&#x6253;&#x5F00;&#x4E86;&#x706F;....&quot;);    }    public void off() {        System.out.println(&quot;&#x5173;&#x95ED;&#x4E86;&#x706F;....&quot;);    }}//&#x7535;&#x89C6;&#x7C7B;public class TV {    public void on() {        System.out.println(&quot;&#x6253;&#x5F00;&#x4E86;&#x7535;&#x89C6;....&quot;);    }    public void off() {        System.out.println(&quot;&#x5173;&#x95ED;&#x4E86;&#x7535;&#x89C6;....&quot;);    }}//&#x63A7;&#x5236;&#x7C7B;public class AirCondition {    public void on() {        System.out.println(&quot;&#x6253;&#x5F00;&#x4E86;&#x7A7A;&#x8C03;....&quot;);    }    public void off() {        System.out.println(&quot;&#x5173;&#x95ED;&#x4E86;&#x7A7A;&#x8C03;....&quot;);    }}//&#x667A;&#x80FD;&#x97F3;&#x7BB1;public class SmartAppliancesFacade {    private Light light;    private TV tv;    private AirCondition airCondition;    public SmartAppliancesFacade() {        light = new Light();        tv = new TV();        airCondition = new AirCondition();    }    public void say(String message) {        if(message.contains(&quot;&#x6253;&#x5F00;&quot;)) {            on();        } else if(message.contains(&quot;&#x5173;&#x95ED;&quot;)) {            off();        } else {            System.out.println(&quot;&#x6211;&#x8FD8;&#x542C;&#x4E0D;&#x61C2;&#x4F60;&#x8BF4;&#x7684;&#xFF01;&#xFF01;&#xFF01;&quot;);        }    }    //&#x8D77;&#x5E8A;&#x540E;&#x4E00;&#x952E;&#x5F00;&#x7535;&#x5668;    private void on() {        System.out.println(&quot;&#x8D77;&#x5E8A;&#x4E86;&quot;);        light.on();        tv.on();        airCondition.on();    }    //&#x7761;&#x89C9;&#x4E00;&#x952E;&#x5173;&#x7535;&#x5668;    private void off() {        System.out.println(&quot;&#x7761;&#x89C9;&#x4E86;&quot;);        light.off();        tv.off();        airCondition.off();    }}//&#x6D4B;&#x8BD5;&#x7C7B;public class Client {    public static void main(String[] args) {        //&#x521B;&#x5EFA;&#x5916;&#x89C2;&#x5BF9;&#x8C61;        SmartAppliancesFacade facade = new SmartAppliancesFacade();        //&#x5BA2;&#x6237;&#x7AEF;&#x76F4;&#x63A5;&#x4E0E;&#x5916;&#x89C2;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;        facade.say(&quot;&#x6253;&#x5F00;&#x5BB6;&#x7535;&quot;);        facade.say(&quot;&#x5173;&#x95ED;&#x5BB6;&#x7535;&quot;);    }}</span>
</pre><p><strong>&#x597D;&#x5904;&#xFF1A;</strong></p>
<ul>
<li>&#x964D;&#x4F4E;&#x4E86;&#x5B50;&#x7CFB;&#x7EDF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#xFF0C;&#x4F7F;&#x5F97;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x53D8;&#x5316;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x8C03;&#x7528;&#x5B83;&#x7684;&#x5BA2;&#x6237;&#x7C7B;&#x3002;</li>
<li>&#x5BF9;&#x5BA2;&#x6237;&#x5C4F;&#x853D;&#x4E86;&#x5B50;&#x7CFB;&#x7EDF;&#x7EC4;&#x4EF6;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x5BA2;&#x6237;&#x5904;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x76EE;&#xFF0C;&#x5E76;&#x4F7F;&#x5F97;&#x5B50;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x3002;</li>
</ul>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x4E0D;&#x7B26;&#x5408;&#x5F00;&#x95ED;&#x539F;&#x5219;&#xFF0C;&#x4FEE;&#x6539;&#x5F88;&#x9EBB;&#x70E6;</li>
</ul>
<h3 class="mume-header" id="554-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.5.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x5BF9;&#x5206;&#x5C42;&#x7ED3;&#x6784;&#x7CFB;&#x7EDF;&#x6784;&#x5EFA;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x5B9A;&#x4E49;&#x5B50;&#x7CFB;&#x7EDF;&#x4E2D;&#x6BCF;&#x5C42;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x5B50;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7CFB;&#x7EDF;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x5F88;&#x591A;&#x65F6;&#xFF0C;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x4E3A;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x53E3;&#x4F9B;&#x5916;&#x754C;&#x8BBF;&#x95EE;&#x3002;</li>
<li>&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x591A;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x5F88;&#x5927;&#x7684;&#x8054;&#x7CFB;&#x65F6;&#xFF0C;&#x5F15;&#x5165;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x53EF;&#x5C06;&#x5B83;&#x4EEC;&#x5206;&#x79BB;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x72EC;&#x7ACB;&#x6027;&#x548C;&#x53EF;&#x79FB;&#x690D;&#x6027;&#x3002;</li>
</ul>
<h3 class="mume-header" id="555-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.5.5 &#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>&#x4F7F;&#x7528;tomcat&#x4F5C;&#x4E3A;web&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x63A5;&#x6536;&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;tomcat&#x4F1A;&#x5C06;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x5C01;&#x88C5;&#x6210;ServletRequest&#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x2460;&#x5904;&#x5BF9;&#x8C61;&#x3002;&#x4F46;&#x662F;&#x5927;&#x5BB6;&#x60F3;&#x60F3;ServletRequest&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5B50;&#x63A5;&#x53E3;HttpServletRequest&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x8BE5;request&#x5BF9;&#x8C61;&#x80AF;&#x5B9A;&#x662F;&#x4E00;&#x4E2A;HttpServletRequest&#x5BF9;&#x8C61;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x5230;&#x5E95;&#x662F;&#x54EA;&#x4E2A;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x5462;&#xFF1F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8F93;&#x51FA;request&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x662F;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;RequestFacade&#x7684;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<img src="img/image-20200207234545691.png" style="zoom:60%;">
<p>RequestFacade&#x7C7B;&#x5C31;&#x4F7F;&#x7528;&#x4E86;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x3002;&#x5148;&#x770B;&#x7ED3;&#x6784;&#x56FE;&#xFF1A;</p>
<img src="img/&#x5916;&#x89C2;&#x6A21;&#x5F0F;-jdk&#x6E90;&#x7801;&#x89E3;&#x6790;.png" style="zoom:70%;">
<p><strong>&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x6B64;&#x5904;&#x4F7F;&#x7528;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x5462;&#xFF1F;</strong></p>
<p>&#x200B;	&#x5B9A;&#x4E49; RequestFacade &#x7C7B;&#xFF0C;&#x5206;&#x522B;&#x5B9E;&#x73B0; ServletRequest &#xFF0C;&#x540C;&#x65F6;&#x5B9A;&#x4E49;&#x79C1;&#x6709;&#x6210;&#x5458;&#x53D8;&#x91CF; Request &#xFF0C;&#x5E76;&#x4E14;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x8C03;&#x7528; Request  &#x7684;&#x5B9E;&#x73B0;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5C06; RequestFacade&#x4E0A;&#x8F6C;&#x4E3A; ServletRequest  &#x4F20;&#x7ED9; servlet &#x7684; service &#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x5373;&#x4F7F;&#x5728; servlet &#x4E2D;&#x88AB;&#x4E0B;&#x8F6C;&#x4E3A; RequestFacade &#xFF0C;&#x4E5F;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x79C1;&#x6709;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x65E2;&#x7528;&#x4E86; Request &#xFF0C;&#x53C8;&#x80FD;&#x9632;&#x6B62;&#x5176;&#x4E2D;&#x65B9;&#x6CD5;&#x88AB;&#x4E0D;&#x5408;&#x7406;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<h2 class="mume-header" id="56-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F">5.6 &#x7EC4;&#x5408;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="561-%E6%A6%82%E8%BF%B0">5.6.1 &#x6982;&#x8FF0;</h3>

<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200208180417291.png" style="zoom:60%;">
<p>&#x200B;	&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x56FE;&#x7247;&#x80AF;&#x5B9A;&#x4F1A;&#x975E;&#x5E38;&#x719F;&#x6089;&#xFF0C;&#x4E0A;&#x56FE;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x6784;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x3002;&#x5728;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x6811;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x67D0;&#x4E2A;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x9897;&#x6811;&#x7406;&#x89E3;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x5305;&#x542B;&#x5F88;&#x591A;&#x7684;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E9B;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x5373;&#x53EF;&#x662F;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#x3002;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x548C;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#x5728;&#x529F;&#x80FD;&#x4E0A;&#x9762;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x5FC5;&#x987B;&#x8981;&#x533A;&#x5206;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x548C;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x7ED9;&#x5BA2;&#x6237;&#x5E26;&#x6765;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x9EBB;&#x70E6;&#xFF0C;&#x4F5C;&#x4E3A;&#x5BA2;&#x6237;&#x800C;&#x5DF2;&#xFF0C;&#x5B83;&#x59CB;&#x7EC8;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x4E00;&#x81F4;&#x7684;&#x5BF9;&#x5F85;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x548C;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x53C8;&#x540D;&#x90E8;&#x5206;&#x6574;&#x4F53;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x7528;&#x4E8E;&#x628A;&#x4E00;&#x7EC4;&#x76F8;&#x4F3C;&#x7684;&#x5BF9;&#x8C61;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4F9D;&#x636E;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x6765;&#x7EC4;&#x5408;&#x5BF9;&#x8C61;&#xFF0C;&#x7528;&#x6765;&#x8868;&#x793A;&#x90E8;&#x5206;&#x4EE5;&#x53CA;&#x6574;&#x4F53;&#x5C42;&#x6B21;&#x3002;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5C5E;&#x4E8E;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x521B;&#x5EFA;&#x4E86;&#x5BF9;&#x8C61;&#x7EC4;&#x7684;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x3002;</p>
<h3 class="mume-header" id="562-%E7%BB%93%E6%9E%84">5.6.2 &#x7ED3;&#x6784;</h3>

<p>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x5305;&#x542B;&#x4E09;&#x79CD;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x6839;&#x8282;&#x70B9;&#xFF08;Component&#xFF09;&#xFF1A;&#x5B9A;&#x4E49;&#x7CFB;&#x7EDF;&#x5404;&#x5C42;&#x6B21;&#x5BF9;&#x8C61;&#x7684;&#x5171;&#x6709;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x9884;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x548C;&#x5C5E;&#x6027;&#x3002;</li>
<li>&#x6811;&#x679D;&#x8282;&#x70B9;&#xFF08;Composite&#xFF09;&#xFF1A;&#x5B9A;&#x4E49;&#x6811;&#x679D;&#x8282;&#x70B9;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5B58;&#x50A8;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x7EC4;&#x5408;&#x6811;&#x679D;&#x8282;&#x70B9;&#x548C;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F62;&#x6210;&#x4E00;&#x4E2A;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x3002;</li>
<li>&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF08;Leaf&#xFF09;&#xFF1A;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4E0B;&#x518D;&#x65E0;&#x5206;&#x652F;&#xFF0C;&#x662F;&#x7CFB;&#x7EDF;&#x5C42;&#x6B21;&#x904D;&#x5386;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;&#x3002;</li>
</ul>
<h3 class="mume-header" id="563-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">5.6.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x8F6F;&#x4EF6;&#x83DC;&#x5355;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8BBF;&#x95EE;&#x522B;&#x7684;&#x4E00;&#x4E9B;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x7ECF;&#x5E38;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x83DC;&#x5355;&#x3002;&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x83DC;&#x5355;&#x9879;&#xFF08;&#x83DC;&#x5355;&#x9879;&#x662F;&#x6307;&#x4E0D;&#x518D;&#x5305;&#x542B;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#x7684;&#x83DC;&#x5355;&#x6761;&#x76EE;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5E26;&#x6709;&#x5176;&#x4ED6;&#x83DC;&#x5355;&#x9879;&#x7684;&#x83DC;&#x5355;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x63CF;&#x8FF0;&#x83DC;&#x5355;&#x5C31;&#x5F88;&#x6070;&#x5F53;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#x662F;&#x9488;&#x5BF9;&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#xFF0C;&#x6253;&#x5370;&#x51FA;&#x5176;&#x5305;&#x542B;&#x7684;&#x6240;&#x6709;&#x83DC;&#x5355;&#x4EE5;&#x53CA;&#x83DC;&#x5355;&#x9879;&#x7684;&#x540D;&#x79F0;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200208182322313.png" style="zoom:80%;">
<p>&#x8981;&#x5B9E;&#x73B0;&#x8BE5;&#x6848;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x753B;&#x51FA;&#x7C7B;&#x56FE;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x7EC4;&#x5408;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p><strong>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<p>&#x4E0D;&#x7BA1;&#x662F;&#x83DC;&#x5355;&#x8FD8;&#x662F;&#x83DC;&#x5355;&#x9879;&#xFF0C;&#x90FD;&#x5E94;&#x8BE5;&#x7EE7;&#x627F;&#x81EA;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x91CC;&#x59D1;&#x4E14;&#x5C06;&#x8FD9;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#x79F0;&#x4E3A;&#x83DC;&#x5355;&#x7EC4;&#x4EF6;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x83DC;&#x5355;&#x7EC4;&#x4EF6;  &#x4E0D;&#x7BA1;&#x662F;&#x83DC;&#x5355;&#x8FD8;&#x662F;&#x83DC;&#x5355;&#x9879;&#xFF0C;&#x90FD;&#x5E94;&#x8BE5;&#x7EE7;&#x627F;&#x8BE5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//&#x6DFB;&#x52A0;&#x83DC;&#x5355;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x79FB;&#x9664;&#x83DC;&#x5355;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x5B50;&#x83DC;&#x5355;</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x83B7;&#x53D6;&#x83DC;&#x5355;&#x540D;&#x79F0;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD9;&#x91CC;&#x7684;MenuComponent&#x5B9A;&#x4E49;&#x4E3A;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x4E00;&#x4E9B;&#x5171;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x884C;&#x4E3A;&#x8981;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;Menu&#x548C;MenuItem&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x53EA;&#x8986;&#x76D6;&#x81EA;&#x5DF1;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x642D;&#x7406;&#x4E0D;&#x9700;&#x8981;&#x6216;&#x8005;&#x4E0D;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;Menu&#x7C7B;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5B50;&#x83DC;&#x5355;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8986;&#x76D6;add()&#x3001;remove()&#x3001;getChild()&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;MenuItem&#x5C31;&#x4E0D;&#x5E94;&#x8BE5;&#x6709;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x8981;&#x6539;&#x5199;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Menu&#x7C7B;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x9664;&#x4E86;getName&#x65B9;&#x6CD5;&#x7684;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;Menu&#x7C7B;&#x5177;&#x6709;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#xFF0C;&#x79FB;&#x9664;&#x83DC;&#x5355;&#x548C;&#x83B7;&#x53D6;&#x5B50;&#x83DC;&#x5355;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>MenuItem&#x662F;&#x83DC;&#x5355;&#x9879;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x6709;&#x5B50;&#x83DC;&#x5355;&#xFF0C;&#x6240;&#x4EE5;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#xFF0C;&#x79FB;&#x9664;&#x83DC;&#x5355;&#x548C;&#x83B7;&#x53D6;&#x5B50;&#x83DC;&#x5355;&#x7684;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x80FD;&#x5B9E;&#x73B0;&#x3002;</p>
<h3 class="mume-header" id="564-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%88%86%E7%B1%BB">5.6.4 &#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x5206;&#x7C7B;</h3>

<p>&#x5728;&#x4F7F;&#x7528;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x6839;&#x636E;&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#x5F62;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x5C06;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x548C;&#x5B89;&#x5168;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E24;&#x79CD;&#x5F62;&#x5F0F;&#x3002;</p>
<ul>
<li>
<p>&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;</p>
<p>&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x62BD;&#x8C61;&#x6839;&#x8282;&#x70B9;&#x89D2;&#x8272;&#x4E2D;&#x58F0;&#x660E;&#x4E86;&#x6240;&#x6709;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x793A;&#x4F8B;&#x4E2D; <code>MenuComponent</code> &#x58F0;&#x660E;&#x4E86; <code>add</code>&#x3001;<code>remove</code> &#x3001;<code>getChild</code> &#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x662F;&#x786E;&#x4FDD;&#x6240;&#x6709;&#x7684;&#x6784;&#x4EF6;&#x7C7B;&#x90FD;&#x6709;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E5F;&#x662F;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x6807;&#x51C6;&#x5F62;&#x5F0F;&#x3002;</p>
<p>&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x4E0D;&#x591F;&#x5B89;&#x5168;&#xFF0C;&#x56E0;&#x4E3A;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#x548C;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x5728;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#xFF0C;&#x53F6;&#x5B50;&#x5BF9;&#x8C61;&#x4E0D;&#x53EF;&#x80FD;&#x6709;&#x4E0B;&#x4E00;&#x4E2A;&#x5C42;&#x6B21;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5373;&#x4E0D;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x6B64;&#x4E3A;&#x5176;&#x63D0;&#x4F9B; add()&#x3001;remove() &#x7B49;&#x65B9;&#x6CD5;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#xFF0C;&#x8FD9;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x4E0D;&#x4F1A;&#x51FA;&#x9519;&#xFF0C;&#x4F46;&#x5728;&#x8FD0;&#x884C;&#x9636;&#x6BB5;&#x5982;&#x679C;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x9519;&#xFF08;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x76F8;&#x5E94;&#x7684;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x4EE3;&#x7801;&#xFF09;</p>
</li>
<li>
<p>&#x5B89;&#x5168;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;</p>
<p>&#x5728;&#x5B89;&#x5168;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x5728;&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#x89D2;&#x8272;&#x4E2D;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x4EFB;&#x4F55;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x6811;&#x679D;&#x8282;&#x70B9; <code>Menu</code> &#x7C7B;&#x4E2D;&#x58F0;&#x660E;&#x5E76;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x3002;&#x5B89;&#x5168;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x4E0D;&#x591F;&#x900F;&#x660E;&#xFF0C;&#x56E0;&#x4E3A;&#x53F6;&#x5B50;&#x6784;&#x4EF6;&#x548C;&#x5BB9;&#x5668;&#x6784;&#x4EF6;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E14;&#x5BB9;&#x5668;&#x6784;&#x4EF6;&#x4E2D;&#x90A3;&#x4E9B;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x5728;&#x62BD;&#x8C61;&#x6784;&#x4EF6;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#xFF0C;&#x56E0;&#x6B64;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x9488;&#x5BF9;&#x62BD;&#x8C61;&#x7F16;&#x7A0B;&#xFF0C;&#x5FC5;&#x987B;&#x6709;&#x533A;&#x522B;&#x5730;&#x5BF9;&#x5F85;&#x53F6;&#x5B50;&#x6784;&#x4EF6;&#x548C;&#x5BB9;&#x5668;&#x6784;&#x4EF6;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x7EC4;&#x5408;&#x6A21;&#x5F0F;-&#x5B89;&#x5168;&#x6027;.png" style="zoom:80%;">
</li>
</ul>
<h3 class="mume-header" id="565-%E4%BC%98%E7%82%B9">5.6.5 &#x4F18;&#x70B9;</h3>

<ul>
<li>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x5730;&#x5B9A;&#x4E49;&#x5206;&#x5C42;&#x6B21;&#x7684;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#xFF0C;&#x8868;&#x793A;&#x5BF9;&#x8C61;&#x7684;&#x5168;&#x90E8;&#x6216;&#x90E8;&#x5206;&#x5C42;&#x6B21;&#xFF0C;&#x5B83;&#x8BA9;&#x5BA2;&#x6237;&#x7AEF;&#x5FFD;&#x7565;&#x4E86;&#x5C42;&#x6B21;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x65B9;&#x4FBF;&#x5BF9;&#x6574;&#x4E2A;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x8FDB;&#x884C;&#x63A7;&#x5236;&#x3002;</li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x4E00;&#x81F4;&#x5730;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7EC4;&#x5408;&#x7ED3;&#x6784;&#x6216;&#x5176;&#x4E2D;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0D;&#x5FC5;&#x5173;&#x5FC3;&#x5904;&#x7406;&#x7684;&#x662F;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x8FD8;&#x662F;&#x6574;&#x4E2A;&#x7EC4;&#x5408;&#x7ED3;&#x6784;&#xFF0C;&#x7B80;&#x5316;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;&#x3002;</li>
<li>&#x5728;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E2D;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x6811;&#x679D;&#x8282;&#x70B9;&#x548C;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5F88;&#x65B9;&#x4FBF;&#xFF0C;&#x65E0;&#x987B;&#x5BF9;&#x73B0;&#x6709;&#x7C7B;&#x5E93;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x7B26;&#x5408;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D;&#x3002;</li>
<li>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E3A;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x7684;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x901A;&#x8FC7;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x548C;&#x6811;&#x679D;&#x8282;&#x70B9;&#x7684;&#x9012;&#x5F52;&#x7EC4;&#x5408;&#xFF0C;&#x53EF;&#x4EE5;&#x5F62;&#x6210;&#x590D;&#x6742;&#x7684;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#xFF0C;&#x4F46;&#x5BF9;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x7684;&#x63A7;&#x5236;&#x5374;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</li>
</ul>
<h3 class="mume-header" id="566-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.6.6 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<p>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x6B63;&#x662F;&#x5E94;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x800C;&#x751F;&#xFF0C;&#x6240;&#x4EE5;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x5C31;&#x662F;&#x51FA;&#x73B0;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x7684;&#x5730;&#x65B9;&#x3002;&#x6BD4;&#x5982;&#xFF1A;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x663E;&#x793A;&#xFF0C;&#x591A;&#x7EA7;&#x76EE;&#x5F55;&#x5448;&#x73B0;&#x7B49;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h2 class="mume-header" id="57-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F">5.7 &#x4EAB;&#x5143;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="571-%E6%A6%82%E8%BF%B0">5.7.1 &#x6982;&#x8FF0;</h3>

<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x8FD0;&#x7528;&#x5171;&#x4EAB;&#x6280;&#x672F;&#x6765;&#x6709;&#x6548;&#x5730;&#x652F;&#x6301;&#x5927;&#x91CF;&#x7EC6;&#x7C92;&#x5EA6;&#x5BF9;&#x8C61;&#x7684;&#x590D;&#x7528;&#x3002;&#x5B83;&#x901A;&#x8FC7;&#x5171;&#x4EAB;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x5BF9;&#x8C61;&#x6765;&#x5927;&#x5E45;&#x5EA6;&#x51CF;&#x5C11;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#x3001;&#x907F;&#x514D;&#x5927;&#x91CF;&#x76F8;&#x4F3C;&#x5BF9;&#x8C61;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x5229;&#x7528;&#x7387;&#x3002;</p>
<h3 class="mume-header" id="572-%E7%BB%93%E6%9E%84">5.7.2 &#x7ED3;&#x6784;</h3>

<p>&#x4EAB;&#x5143;&#xFF08;Flyweight &#xFF09;&#x6A21;&#x5F0F;&#x4E2D;&#x5B58;&#x5728;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x72B6;&#x6001;&#xFF1A;</p>
<ol>
<li>&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x5373;&#x4E0D;&#x4F1A;&#x968F;&#x7740;&#x73AF;&#x5883;&#x7684;&#x6539;&#x53D8;&#x800C;&#x6539;&#x53D8;&#x7684;&#x53EF;&#x5171;&#x4EAB;&#x90E8;&#x5206;&#x3002;</li>
<li>&#x5916;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x6307;&#x968F;&#x73AF;&#x5883;&#x6539;&#x53D8;&#x800C;&#x6539;&#x53D8;&#x7684;&#x4E0D;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x7684;&#x90E8;&#x5206;&#x3002;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;&#x8981;&#x9886;&#x5C31;&#x662F;&#x533A;&#x5206;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x8FD9;&#x4E24;&#x79CD;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5C06;&#x5916;&#x90E8;&#x72B6;&#x6001;&#x5916;&#x90E8;&#x5316;&#x3002;</li>
</ol>
<p>&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x4EAB;&#x5143;&#x89D2;&#x8272;&#xFF08;Flyweight&#xFF09;&#xFF1A;&#x901A;&#x5E38;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x5728;&#x62BD;&#x8C61;&#x4EAB;&#x5143;&#x7C7B;&#x4E2D;&#x58F0;&#x660E;&#x4E86;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#x516C;&#x5171;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5411;&#x5916;&#x754C;&#x63D0;&#x4F9B;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x6570;&#x636E;&#xFF08;&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF09;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x6765;&#x8BBE;&#x7F6E;&#x5916;&#x90E8;&#x6570;&#x636E;&#xFF08;&#x5916;&#x90E8;&#x72B6;&#x6001;&#xFF09;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x4EAB;&#x5143;&#xFF08;Concrete Flyweight&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x4EAB;&#x5143;&#x7C7B;&#xFF0C;&#x79F0;&#x4E3A;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#xFF1B;&#x5728;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#x4E2D;&#x4E3A;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x63D0;&#x4F9B;&#x4E86;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x6765;&#x8BBE;&#x8BA1;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#x63D0;&#x4F9B;&#x552F;&#x4E00;&#x7684;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x975E;&#x4EAB;&#x5143;&#xFF08;Unsharable Flyweight)&#x89D2;&#x8272; &#xFF1A;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;&#x62BD;&#x8C61;&#x4EAB;&#x5143;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x90FD;&#x9700;&#x8981;&#x88AB;&#x5171;&#x4EAB;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x5171;&#x4EAB;&#x7684;&#x5B50;&#x7C7B;&#x53EF;&#x8BBE;&#x8BA1;&#x4E3A;&#x975E;&#x5171;&#x4EAB;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#xFF1B;&#x5F53;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x975E;&#x5171;&#x4EAB;&#x5177;&#x4F53;&#x4EAB;&#x5143;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x5B9E;&#x4F8B;&#x5316;&#x521B;&#x5EFA;&#x3002;</li>
<li>&#x4EAB;&#x5143;&#x5DE5;&#x5382;&#xFF08;Flyweight Factory&#xFF09;&#x89D2;&#x8272; &#xFF1A;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;&#x4EAB;&#x5143;&#x89D2;&#x8272;&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x5BF9;&#x8C61;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4EAB;&#x5143;&#x5DE5;&#x5382;&#x68C0;&#x67FB;&#x7CFB;&#x7EDF;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x5219;&#x63D0;&#x4F9B;&#x7ED9;&#x5BA2;&#x6237;&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<h3 class="mume-header" id="573-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">5.7.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x4FC4;&#x7F57;&#x65AF;&#x65B9;&#x5757;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x7247;&#x662F;&#x4F17;&#x6240;&#x5468;&#x77E5;&#x7684;&#x4FC4;&#x7F57;&#x65AF;&#x65B9;&#x5757;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x4E2A;&#x65B9;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4FC4;&#x7F57;&#x65AF;&#x65B9;&#x5757;&#x8FD9;&#x4E2A;&#x6E38;&#x620F;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5757;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x5C31;&#x8981;&#x5360;&#x7528;&#x5F88;&#x591A;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x4E0B;&#x9762;&#x5229;&#x7528;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x4FC4;&#x7F57;&#x65AF;&#x65B9;&#x5757;.jpeg" style="zoom:60%;">
<p><strong>&#x5148;&#x6765;&#x770B;&#x7C7B;&#x56FE;&#xFF1A;</strong></p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x4EAB;&#x5143;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p><strong>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<p>&#x4FC4;&#x7F57;&#x65AF;&#x65B9;&#x5757;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5F62;&#x72B6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5BF9;&#x8FD9;&#x4E9B;&#x5F62;&#x72B6;&#x5411;&#x4E0A;&#x62BD;&#x53D6;&#x51FA;AbstractBox&#xFF0C;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x5171;&#x6027;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x884C;&#x4E3A;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x65B9;&#x5757;&#x5F62;&#x72B6;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &#x989C;&#x8272;&#xFF1A;&quot;</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x7684;&#x5F62;&#x72B6;&#x4E86;&#xFF0C;IBox&#x7C7B;&#x3001;LBox&#x7C7B;&#x3001;OBox&#x7C7B;&#x7B49;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;I&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;L&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x7C7B;&#xFF08;BoxFactory&#xFF09;&#xFF0C;&#x7528;&#x6765;&#x7BA1;&#x7406;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#xFF08;&#x4E5F;&#x5C31;&#x662F;AbstractBox&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;&#xFF09;&#xFF0C;&#x8BE5;&#x5DE5;&#x5382;&#x7C7B;&#x5BF9;&#x8C61;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x3002;&#x5E76;&#x7ED9;&#x5DE5;&#x5382;&#x7C7B;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x83B7;&#x53D6;&#x5F62;&#x72B6;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;L&quot;</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;O&quot;</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="575-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.7.5 &#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<p><strong>1&#xFF0C;&#x4F18;&#x70B9;</strong></p>
<ul>
<li>&#x6781;&#x5927;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x4E2D;&#x76F8;&#x4F3C;&#x6216;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#xFF0C;&#x8282;&#x7EA6;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x63D0;&#x4F9B;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;</li>
<li>&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x5916;&#x90E8;&#x72B6;&#x6001;&#x76F8;&#x5BF9;&#x72EC;&#x7ACB;&#xFF0C;&#x4E14;&#x4E0D;&#x5F71;&#x54CD;&#x5185;&#x90E8;&#x72B6;&#x6001;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x4E3A;&#x4E86;&#x4F7F;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x7684;&#x90E8;&#x5206;&#x72B6;&#x6001;&#x5916;&#x90E8;&#x5316;&#xFF0C;&#x5206;&#x79BB;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x548C;&#x5916;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x4F7F;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x590D;&#x6742;</p>
<p><strong>3&#xFF0C;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;</strong></p>
<ul>
<li>&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x6709;&#x5927;&#x91CF;&#x76F8;&#x540C;&#x6216;&#x8005;&#x76F8;&#x4F3C;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x9020;&#x6210;&#x5185;&#x5B58;&#x7684;&#x5927;&#x91CF;&#x8017;&#x8D39;&#x3002;</li>
<li>&#x5BF9;&#x8C61;&#x7684;&#x5927;&#x90E8;&#x5206;&#x72B6;&#x6001;&#x90FD;&#x53EF;&#x4EE5;&#x5916;&#x90E8;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x5916;&#x90E8;&#x72B6;&#x6001;&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x4E2D;&#x3002;</li>
<li>&#x5728;&#x4F7F;&#x7528;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x65F6;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x5B58;&#x50A8;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x7684;&#x4EAB;&#x5143;&#x6C60;&#xFF0C;&#x800C;&#x8FD9;&#x9700;&#x8981;&#x8017;&#x8D39;&#x4E00;&#x5B9A;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5E94;&#x5F53;&#x5728;&#x9700;&#x8981;&#x591A;&#x6B21;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4EAB;&#x5143;&#x5BF9;&#x8C61;&#x65F6;&#x624D;&#x503C;&#x5F97;&#x4F7F;&#x7528;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x3002;</li>
</ul>
<h3 class="mume-header" id="576-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.7.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>Integer&#x7C7B;&#x4F7F;&#x7528;&#x4E86;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i1&#x548C;i2&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1F;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i3&#x548C;i4&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1F;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD0;&#x884C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#xFF0C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200208212930857.png" style="zoom:80%;">
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x7B2C;&#x4E00;&#x4E2A;&#x8F93;&#x51FA;&#x8BED;&#x53E5;&#x8F93;&#x51FA;&#x7684;&#x662F;true&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x8F93;&#x51FA;&#x8BED;&#x53E5;&#x8F93;&#x51FA;&#x7684;&#x662F;false&#xFF1F;&#x901A;&#x8FC7;&#x53CD;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;&#x8FDB;&#x884C;&#x53CD;&#x7F16;&#x8BD1;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">&quot;i1\u548ci2\u5bf9\u8c61\u662f\u5426\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\uff1f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">&quot;i3\u548ci4\u5bf9\u8c61\u662f\u5426\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\uff1f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x76F4;&#x63A5;&#x7ED9;Integer&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x5E95;&#x5C42;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>valueOf()</code> &#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x9700;&#x8981;&#x770B;&#x8BE5;&#x65B9;&#x6CD5;&#x5373;&#x53EF;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Integer.IntegerCache.high&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">&gt;=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230; <code>Integer</code> &#x9ED8;&#x8BA4;&#x5148;&#x521B;&#x5EFA;&#x5E76;&#x7F13;&#x5B58; <code>-128 ~ 127</code> &#x4E4B;&#x95F4;&#x6570;&#x7684; <code>Integer</code> &#x5BF9;&#x8C61;&#xFF0C;&#x5F53;&#x8C03;&#x7528; <code>valueOf</code> &#x65F6;&#x5982;&#x679C;&#x53C2;&#x6570;&#x5728; <code>-128 ~ 127</code> &#x4E4B;&#x95F4;&#x5219;&#x8BA1;&#x7B97;&#x4E0B;&#x6807;&#x5E76;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; <code>Integer</code> &#x5BF9;&#x8C61;&#x3002;</p>
<h1 class="mume-header" id="6%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F">6&#xFF0C;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;</h1>

<p>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x7A0B;&#x5E8F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x590D;&#x6742;&#x7684;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#xFF0C;&#x5373;&#x63CF;&#x8FF0;&#x591A;&#x4E2A;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x600E;&#x6837;&#x76F8;&#x4E92;&#x534F;&#x4F5C;&#x5171;&#x540C;&#x5B8C;&#x6210;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x65E0;&#x6CD5;&#x5355;&#x72EC;&#x5B8C;&#x6210;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x5B83;&#x6D89;&#x53CA;&#x7B97;&#x6CD5;&#x4E0E;&#x5BF9;&#x8C61;&#x95F4;&#x804C;&#x8D23;&#x7684;&#x5206;&#x914D;&#x3002;</p>
<p>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x7C7B;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#x548C;&#x5BF9;&#x8C61;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#xFF0C;&#x524D;&#x8005;&#x91C7;&#x7528;&#x7EE7;&#x627F;&#x673A;&#x5236;&#x6765;&#x5728;&#x7C7B;&#x95F4;&#x5206;&#x6D3E;&#x884C;&#x4E3A;&#xFF0C;&#x540E;&#x8005;&#x91C7;&#x7528;&#x7EC4;&#x5408;&#x6216;&#x805A;&#x5408;&#x5728;&#x5BF9;&#x8C61;&#x95F4;&#x5206;&#x914D;&#x884C;&#x4E3A;&#x3002;&#x7531;&#x4E8E;&#x7EC4;&#x5408;&#x5173;&#x7CFB;&#x6216;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x6BD4;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x8026;&#x5408;&#x5EA6;&#x4F4E;&#xFF0C;&#x6EE1;&#x8DB3;&#x201C;&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;&#x201D;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x8C61;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#x6BD4;&#x7C7B;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#x5177;&#x6709;&#x66F4;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002;</p>
<p>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#xFF1A;</p>
<ul>
<li>&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</li>
<li>&#x7B56;&#x7565;&#x6A21;&#x5F0F;</li>
<li>&#x547D;&#x4EE4;&#x6A21;&#x5F0F;</li>
<li>&#x804C;&#x8D23;&#x94FE;&#x6A21;&#x5F0F;</li>
<li>&#x72B6;&#x6001;&#x6A21;&#x5F0F;</li>
<li>&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;</li>
<li>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;</li>
<li>&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;</li>
<li>&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;</li>
<li>&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</li>
<li>&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;</li>
</ul>
<p>&#x4EE5;&#x4E0A; 11 &#x79CD;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#xFF0C;&#x9664;&#x4E86;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x548C;&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;&#x662F;&#x7C7B;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x5168;&#x90E8;&#x5C5E;&#x4E8E;&#x5BF9;&#x8C61;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x3002;</p>
<h2 class="mume-header" id="61-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">6.1 &#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="611-%E6%A6%82%E8%BF%B0">6.1.1 &#x6982;&#x8FF0;</h3>

<p>&#x5728;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x5E38;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x65F6;&#x77E5;&#x9053;&#x4E86;&#x7B97;&#x6CD5;&#x6240;&#x9700;&#x7684;&#x5173;&#x952E;&#x6B65;&#x9AA4;&#xFF0C;&#x800C;&#x4E14;&#x786E;&#x5B9A;&#x4E86;&#x8FD9;&#x4E9B;&#x6B65;&#x9AA4;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF0C;&#x4F46;&#x67D0;&#x4E9B;&#x6B65;&#x9AA4;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x8FD8;&#x672A;&#x77E5;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x67D0;&#x4E9B;&#x6B65;&#x9AA4;&#x7684;&#x5B9E;&#x73B0;&#x4E0E;&#x5177;&#x4F53;&#x7684;&#x73AF;&#x5883;&#x76F8;&#x5173;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x53BB;&#x94F6;&#x884C;&#x529E;&#x7406;&#x4E1A;&#x52A1;&#x4E00;&#x822C;&#x8981;&#x7ECF;&#x8FC7;&#x4EE5;&#x4E0B;4&#x4E2A;&#x6D41;&#x7A0B;&#xFF1A;&#x53D6;&#x53F7;&#x3001;&#x6392;&#x961F;&#x3001;&#x529E;&#x7406;&#x5177;&#x4F53;&#x4E1A;&#x52A1;&#x3001;&#x5BF9;&#x94F6;&#x884C;&#x5DE5;&#x4F5C;&#x4EBA;&#x5458;&#x8FDB;&#x884C;&#x8BC4;&#x5206;&#x7B49;&#xFF0C;&#x5176;&#x4E2D;&#x53D6;&#x53F7;&#x3001;&#x6392;&#x961F;&#x548C;&#x5BF9;&#x94F6;&#x884C;&#x5DE5;&#x4F5C;&#x4EBA;&#x5458;&#x8FDB;&#x884C;&#x8BC4;&#x5206;&#x7684;&#x4E1A;&#x52A1;&#x5BF9;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7236;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x529E;&#x7406;&#x5177;&#x4F53;&#x4E1A;&#x52A1;&#x5374;&#x56E0;&#x4EBA;&#x800C;&#x5F02;&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x662F;&#x5B58;&#x6B3E;&#x3001;&#x53D6;&#x6B3E;&#x6216;&#x8005;&#x8F6C;&#x8D26;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x5EF6;&#x8FDF;&#x5230;&#x5B50;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x4E2D;&#x7684;&#x7B97;&#x6CD5;&#x9AA8;&#x67B6;&#xFF0C;&#x800C;&#x5C06;&#x7B97;&#x6CD5;&#x7684;&#x4E00;&#x4E9B;&#x6B65;&#x9AA4;&#x5EF6;&#x8FDF;&#x5230;&#x5B50;&#x7C7B;&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x4E0D;&#x6539;&#x53D8;&#x8BE5;&#x7B97;&#x6CD5;&#x7ED3;&#x6784;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x91CD;&#x5B9A;&#x4E49;&#x8BE5;&#x7B97;&#x6CD5;&#x7684;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x6B65;&#x9AA4;&#x3002;</p>
<h3 class="mume-header" id="612-%E7%BB%93%E6%9E%84">6.1.2 &#x7ED3;&#x6784;</h3>

<p>&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#xFF08;Template Method&#xFF09;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>
<p>&#x62BD;&#x8C61;&#x7C7B;&#xFF08;Abstract Class&#xFF09;&#xFF1A;&#x8D1F;&#x8D23;&#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x8F6E;&#x5ED3;&#x548C;&#x9AA8;&#x67B6;&#x3002;&#x5B83;&#x7531;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x548C;&#x82E5;&#x5E72;&#x4E2A;&#x57FA;&#x672C;&#x65B9;&#x6CD5;&#x6784;&#x6210;&#x3002;</p>
<ul>
<li>
<p>&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x7B97;&#x6CD5;&#x7684;&#x9AA8;&#x67B6;&#xFF0C;&#x6309;&#x67D0;&#x79CD;&#x987A;&#x5E8F;&#x8C03;&#x7528;&#x5176;&#x5305;&#x542B;&#x7684;&#x57FA;&#x672C;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li>
<p>&#x57FA;&#x672C;&#x65B9;&#x6CD5;&#xFF1A;&#x662F;&#x5B9E;&#x73B0;&#x7B97;&#x6CD5;&#x5404;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x662F;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x7684;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x3002;&#x57FA;&#x672C;&#x65B9;&#x6CD5;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E09;&#x79CD;&#xFF1A;</p>
<ul>
<li>
<p>&#x62BD;&#x8C61;&#x65B9;&#x6CD5;(Abstract Method) &#xFF1A;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x7531;&#x62BD;&#x8C61;&#x7C7B;&#x58F0;&#x660E;&#x3001;&#x7531;&#x5176;&#x5177;&#x4F53;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x65B9;&#x6CD5;(Concrete Method) &#xFF1A;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x7531;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#x6216;&#x5177;&#x4F53;&#x7C7B;&#x58F0;&#x660E;&#x5E76;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7EE7;&#x627F;&#x3002;</p>
</li>
<li>
<p>&#x94A9;&#x5B50;&#x65B9;&#x6CD5;(Hook Method) &#xFF1A;&#x5728;&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#xFF0C;&#x5305;&#x62EC;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x7684;&#x903B;&#x8F91;&#x65B9;&#x6CD5;&#x548C;&#x9700;&#x8981;&#x5B50;&#x7C7B;&#x91CD;&#x5199;&#x7684;&#x7A7A;&#x65B9;&#x6CD5;&#x4E24;&#x79CD;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x94A9;&#x5B50;&#x65B9;&#x6CD5;&#x662F;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x7684;&#x903B;&#x8F91;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x7C7B;&#x65B9;&#x6CD5;&#x540D;&#x4E00;&#x822C;&#x4E3A;isXxx&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E3A;boolean&#x7C7B;&#x578B;&#x3002;</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>&#x5177;&#x4F53;&#x5B50;&#x7C7B;&#xFF08;Concrete Class&#xFF09;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x548C;&#x94A9;&#x5B50;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4EEC;&#x662F;&#x4E00;&#x4E2A;&#x9876;&#x7EA7;&#x903B;&#x8F91;&#x7684;&#x7EC4;&#x6210;&#x6B65;&#x9AA4;&#x3002;</p>
</li>
</ul>
<h3 class="mume-header" id="613-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.1.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x7092;&#x83DC;</p>
<p>&#x7092;&#x83DC;&#x7684;&#x6B65;&#x9AA4;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5206;&#x4E3A;&#x5012;&#x6CB9;&#x3001;&#x70ED;&#x6CB9;&#x3001;&#x5012;&#x852C;&#x83DC;&#x3001;&#x5012;&#x8C03;&#x6599;&#x54C1;&#x3001;&#x7FFB;&#x7092;&#x7B49;&#x6B65;&#x9AA4;&#x3002;&#x73B0;&#x901A;&#x8FC7;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x6765;&#x7528;&#x4EE3;&#x7801;&#x6A21;&#x62DF;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5012;&#x6CB9;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x70ED;&#x6CB9;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x5012;&#x852C;&#x83DC;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x5012;&#x8C03;&#x5473;&#x6599;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x7FFB;&#x7092;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5012;&#x6CB9;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x70ED;&#x6CB9;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x70ED;&#x6CB9;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x5012;&#x852C;&#x83DC;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF08;&#x4E00;&#x4E2A;&#x4E0B;&#x5305;&#x83DC;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x4E0B;&#x83DC;&#x5FC3;&#xFF09;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x5012;&#x8C03;&#x5473;&#x6599;&#x662F;&#x4E0D;&#x4E00;&#x6837;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x7FFB;&#x7092;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7092;&#x554A;&#x7092;&#x554A;&#x7092;&#x5230;&#x719F;&#x554A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E0B;&#x9505;&#x7684;&#x852C;&#x83DC;&#x662F;&#x5305;&#x83DC;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E0B;&#x9505;&#x7684;&#x9171;&#x6599;&#x662F;&#x8FA3;&#x6912;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E0B;&#x9505;&#x7684;&#x852C;&#x83DC;&#x662F;&#x83DC;&#x5FC3;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E0B;&#x9505;&#x7684;&#x9171;&#x6599;&#x662F;&#x849C;&#x84C9;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x7092;&#x624B;&#x6495;&#x5305;&#x83DC;</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x7092;&#x849C;&#x84C9;&#x83DC;&#x5FC3;</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x4E3A;&#x9632;&#x6B62;&#x6076;&#x610F;&#x64CD;&#x4F5C;&#xFF0C;&#x4E00;&#x822C;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x90FD;&#x52A0;&#x4E0A; final &#x5173;&#x952E;&#x8BCD;&#x3002;</p>
</blockquote>
<h3 class="mume-header" id="613-%E4%BC%98%E7%BC%BA%E7%82%B9">6.1.3 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x590D;&#x7528;&#x6027;</p>
<p>&#x5C06;&#x76F8;&#x540C;&#x90E8;&#x5206;&#x7684;&#x4EE3;&#x7801;&#x653E;&#x5728;&#x62BD;&#x8C61;&#x7684;&#x7236;&#x7C7B;&#x4E2D;&#xFF0C;&#x800C;&#x5C06;&#x4E0D;&#x540C;&#x7684;&#x4EE3;&#x7801;&#x653E;&#x5165;&#x4E0D;&#x540C;&#x7684;&#x5B50;&#x7C7B;&#x4E2D;&#x3002;</p>
</li>
<li>
<p>&#x5B9E;&#x73B0;&#x4E86;&#x53CD;&#x5411;&#x63A7;&#x5236;</p>
<p>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x8C03;&#x7528;&#x5176;&#x5B50;&#x7C7B;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x5B50;&#x7C7B;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x6269;&#x5C55;&#x4E0D;&#x540C;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x53CD;&#x5411;&#x63A7;&#x5236; &#xFF0C;&#x5E76;&#x7B26;&#x5408;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D;&#x3002;</p>
</li>
</ul>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5BF9;&#x6BCF;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#x90FD;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#xFF0C;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x7C7B;&#x7684;&#x4E2A;&#x6570;&#x589E;&#x52A0;&#xFF0C;&#x7CFB;&#x7EDF;&#x66F4;&#x52A0;&#x5E9E;&#x5927;&#xFF0C;&#x8BBE;&#x8BA1;&#x4E5F;&#x66F4;&#x52A0;&#x62BD;&#x8C61;&#x3002;</li>
<li>&#x7236;&#x7C7B;&#x4E2D;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x5B50;&#x7C7B;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4F1A;&#x5F71;&#x54CD;&#x7236;&#x7C7B;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x8FD9;&#x5BFC;&#x81F4;&#x4E00;&#x79CD;&#x53CD;&#x5411;&#x7684;&#x63A7;&#x5236;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x63D0;&#x9AD8;&#x4E86;&#x4EE3;&#x7801;&#x9605;&#x8BFB;&#x7684;&#x96BE;&#x5EA6;&#x3002;</li>
</ul>
<h3 class="mume-header" id="614-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">6.1.4 &#x9002;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x7B97;&#x6CD5;&#x7684;&#x6574;&#x4F53;&#x6B65;&#x9AA4;&#x5F88;&#x56FA;&#x5B9A;&#xFF0C;&#x4F46;&#x5176;&#x4E2D;&#x4E2A;&#x522B;&#x90E8;&#x5206;&#x6613;&#x53D8;&#x65F6;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#xFF0C;&#x5C06;&#x5BB9;&#x6613;&#x53D8;&#x7684;&#x90E8;&#x5206;&#x62BD;&#x8C61;&#x51FA;&#x6765;&#xFF0C;&#x4F9B;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</li>
<li>&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5B50;&#x7C7B;&#x6765;&#x51B3;&#x5B9A;&#x7236;&#x7C7B;&#x7B97;&#x6CD5;&#x4E2D;&#x67D0;&#x4E2A;&#x6B65;&#x9AA4;&#x662F;&#x5426;&#x6267;&#x884C;&#xFF0C;&#x5B9E;&#x73B0;&#x5B50;&#x7C7B;&#x5BF9;&#x7236;&#x7C7B;&#x7684;&#x53CD;&#x5411;&#x63A7;&#x5236;&#x3002;</li>
</ul>
<h3 class="mume-header" id="615-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.1.5 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>InputStream&#x7C7B;&#x5C31;&#x4F7F;&#x7528;&#x4E86;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x3002;&#x5728;InputStream&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x591A;&#x4E2A; <code>read()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x8981;&#x6C42;&#x5B50;&#x7C7B;&#x5FC5;&#x987B;&#x91CD;&#x5199;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#x8C03;&#x7528;&#x4E86;&#x65E0;&#x53C2;&#x7684;read&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x662F;&#x6BCF;&#x6B21;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x6570;&#x636E;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x65E0;&#x53C2;&#x7684; <code>read()</code> &#x65B9;&#x6CD5;&#x662F;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x8981;&#x6C42;&#x5B50;&#x7C7B;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x3002;&#x800C; <code>read(byte b[])</code> &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4E86; <code>read(byte b[], int off, int len)</code> &#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6B64;&#x5904;&#x91CD;&#x70B9;&#x770B;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5E26;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x7B2C;18&#x884C;&#x3001;27&#x884C;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8C03;&#x7528;&#x4E86;&#x65E0;&#x53C2;&#x7684;&#x62BD;&#x8C61;&#x7684; <code>read()</code> &#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A; &#x5728;InputStream&#x7236;&#x7C7B;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x4E86;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x6BCF;&#x6B21;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5230;&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#xFF0C;&#x8BFB;&#x53D6;len&#x4E2A;&#x5B57;&#x8282;&#x6570;&#x636E;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4F55;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x6570;&#x636E;&#x5462;&#xFF1F;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</p>
<h2 class="mume-header" id="62-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F">6.2 &#x7B56;&#x7565;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="621-%E6%A6%82%E8%BF%B0">6.2.1 &#x6982;&#x8FF0;</h3>

<p>&#x5148;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x6211;&#x4EEC;&#x53BB;&#x65C5;&#x6E38;&#x9009;&#x62E9;&#x51FA;&#x884C;&#x6A21;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#xFF0C;&#x53EF;&#x4EE5;&#x9A91;&#x81EA;&#x884C;&#x8F66;&#x3001;&#x53EF;&#x4EE5;&#x5750;&#x6C7D;&#x8F66;&#x3001;&#x53EF;&#x4EE5;&#x5750;&#x706B;&#x8F66;&#x3001;&#x53EF;&#x4EE5;&#x5750;&#x98DE;&#x673A;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200210143039168.png" style="zoom:80%;">
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x733F;&#xFF0C;&#x5F00;&#x53D1;&#x9700;&#x8981;&#x9009;&#x62E9;&#x4E00;&#x6B3E;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x5F00;&#x53D1;&#x7684;&#x5DE5;&#x5177;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;Idea&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;eclipse&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200210144457478.png" style="zoom:70%;">
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x200B;	&#x8BE5;&#x6A21;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7B97;&#x6CD5;&#xFF0C;&#x5E76;&#x5C06;&#x6BCF;&#x4E2A;&#x7B97;&#x6CD5;&#x5C01;&#x88C5;&#x8D77;&#x6765;&#xFF0C;&#x4F7F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x66FF;&#x6362;&#xFF0C;&#x4E14;&#x7B97;&#x6CD5;&#x7684;&#x53D8;&#x5316;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x4F7F;&#x7528;&#x7B97;&#x6CD5;&#x7684;&#x5BA2;&#x6237;&#x3002;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x5C5E;&#x4E8E;&#x5BF9;&#x8C61;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x901A;&#x8FC7;&#x5BF9;&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x628A;&#x4F7F;&#x7528;&#x7B97;&#x6CD5;&#x7684;&#x8D23;&#x4EFB;&#x548C;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x5206;&#x5272;&#x5F00;&#x6765;&#xFF0C;&#x5E76;&#x59D4;&#x6D3E;&#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x5BF9;&#x8FD9;&#x4E9B;&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;</p>
<h3 class="mume-header" id="622-%E7%BB%93%E6%9E%84">6.2.2 &#x7ED3;&#x6784;</h3>

<p>&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x7B56;&#x7565;&#xFF08;Strategy&#xFF09;&#x7C7B;&#xFF1A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x89D2;&#x8272;&#xFF0C;&#x901A;&#x5E38;&#x7531;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;&#x6B64;&#x89D2;&#x8272;&#x7ED9;&#x51FA;&#x6240;&#x6709;&#x7684;&#x5177;&#x4F53;&#x7B56;&#x7565;&#x7C7B;&#x6240;&#x9700;&#x7684;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x7B56;&#x7565;&#xFF08;Concrete Strategy&#xFF09;&#x7C7B;&#xFF1A;&#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x7B56;&#x7565;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x63D0;&#x4F9B;&#x5177;&#x4F53;&#x7684;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x6216;&#x884C;&#x4E3A;&#x3002;</li>
<li>&#x73AF;&#x5883;&#xFF08;Context&#xFF09;&#x7C7B;&#xFF1A;&#x6301;&#x6709;&#x4E00;&#x4E2A;&#x7B56;&#x7565;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x6700;&#x7EC8;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<h3 class="mume-header" id="623-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.2.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x3010;&#x4F8B;&#x3011;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;</p>
<p>&#x4E00;&#x5BB6;&#x767E;&#x8D27;&#x516C;&#x53F8;&#x5728;&#x5B9A;&#x5E74;&#x5EA6;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;&#x3002;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x8282;&#x65E5;&#xFF08;&#x6625;&#x8282;&#x3001;&#x4E2D;&#x79CB;&#x8282;&#x3001;&#x5723;&#x8BDE;&#x8282;&#xFF09;&#x63A8;&#x51FA;&#x4E0D;&#x540C;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;&#xFF0C;&#x7531;&#x4FC3;&#x9500;&#x5458;&#x5C06;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;&#x5C55;&#x793A;&#x7ED9;&#x5BA2;&#x6237;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x7B56;&#x7565;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5B9A;&#x4E49;&#x767E;&#x8D27;&#x516C;&#x53F8;&#x6240;&#x6709;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;&#x7684;&#x5171;&#x540C;&#x63A5;&#x53E3;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x7B56;&#x7565;&#x89D2;&#x8272;&#xFF08;Concrete Strategy&#xFF09;&#xFF1A;&#x6BCF;&#x4E2A;&#x8282;&#x65E5;&#x5177;&#x4F53;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x4E3A;&#x6625;&#x8282;&#x51C6;&#x5907;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E70;&#x4E00;&#x9001;&#x4E00;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4E3A;&#x4E2D;&#x79CB;&#x51C6;&#x5907;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6EE1;200&#x5143;&#x51CF;50&#x5143;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4E3A;&#x5723;&#x8BDE;&#x51C6;&#x5907;&#x7684;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6EE1;1000&#x5143;&#x52A0;&#x4E00;&#x5143;&#x6362;&#x8D2D;&#x4EFB;&#x610F;200&#x5143;&#x4EE5;&#x4E0B;&#x5546;&#x54C1;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x73AF;&#x5883;&#x89D2;&#x8272;&#xFF08;Context&#xFF09;&#xFF1A;&#x7528;&#x4E8E;&#x8FDE;&#x63A5;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5373;&#x628A;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;&#x63A8;&#x9500;&#x7ED9;&#x5BA2;&#x6237;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x9500;&#x552E;&#x5458;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>                        
    <span class="token comment">//&#x6301;&#x6709;&#x62BD;&#x8C61;&#x7B56;&#x7565;&#x89D2;&#x8272;&#x7684;&#x5F15;&#x7528;                              </span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>                 
                                               
    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>       
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>              
    <span class="token punctuation">}</span>                                          
                                               
    <span class="token comment">//&#x5411;&#x5BA2;&#x6237;&#x5C55;&#x793A;&#x4FC3;&#x9500;&#x6D3B;&#x52A8;                                </span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       
    <span class="token punctuation">}</span>                                          
<span class="token punctuation">}</span>                                              
</pre><h3 class="mume-header" id="624-%E4%BC%98%E7%BC%BA%E7%82%B9">6.2.4 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x7B56;&#x7565;&#x7C7B;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x5207;&#x6362;</p>
<p>&#x7531;&#x4E8E;&#x7B56;&#x7565;&#x7C7B;&#x90FD;&#x5B9E;&#x73B0;&#x540C;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x5207;&#x6362;&#x3002;</p>
</li>
<li>
<p>&#x6613;&#x4E8E;&#x6269;&#x5C55;</p>
<p>&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7B56;&#x7565;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x7B56;&#x7565;&#x7C7B;&#x5373;&#x53EF;&#xFF0C;&#x57FA;&#x672C;&#x4E0D;&#x9700;&#x8981;&#x6539;&#x53D8;&#x539F;&#x6709;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7B26;&#x5408;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201C;</p>
</li>
<li>
<p>&#x907F;&#x514D;&#x4F7F;&#x7528;&#x591A;&#x91CD;&#x6761;&#x4EF6;&#x9009;&#x62E9;&#x8BED;&#x53E5;&#xFF08;if else&#xFF09;&#xFF0C;&#x5145;&#x5206;&#x4F53;&#x73B0;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#x3002;</p>
</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x6240;&#x6709;&#x7684;&#x7B56;&#x7565;&#x7C7B;&#xFF0C;&#x5E76;&#x81EA;&#x884C;&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x54EA;&#x4E00;&#x4E2A;&#x7B56;&#x7565;&#x7C7B;&#x3002;</li>
<li>&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x5C06;&#x9020;&#x6210;&#x4EA7;&#x751F;&#x5F88;&#x591A;&#x7B56;&#x7565;&#x7C7B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x51CF;&#x5C11;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x91CF;&#x3002;</li>
</ul>
<h3 class="mume-header" id="625-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">6.2.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x52A8;&#x6001;&#x5730;&#x5728;&#x51E0;&#x79CD;&#x7B97;&#x6CD5;&#x4E2D;&#x9009;&#x62E9;&#x4E00;&#x79CD;&#x65F6;&#xFF0C;&#x53EF;&#x5C06;&#x6BCF;&#x4E2A;&#x7B97;&#x6CD5;&#x5C01;&#x88C5;&#x5230;&#x7B56;&#x7565;&#x7C7B;&#x4E2D;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x7C7B;&#x5B9A;&#x4E49;&#x4E86;&#x591A;&#x79CD;&#x884C;&#x4E3A;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E9B;&#x884C;&#x4E3A;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x4EE5;&#x591A;&#x4E2A;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x5F62;&#x5F0F;&#x51FA;&#x73B0;&#xFF0C;&#x53EF;&#x5C06;&#x6BCF;&#x4E2A;&#x6761;&#x4EF6;&#x5206;&#x652F;&#x79FB;&#x5165;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x7B56;&#x7565;&#x7C7B;&#x4E2D;&#x4EE5;&#x4EE3;&#x66FF;&#x8FD9;&#x4E9B;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x4E2D;&#x5404;&#x7B97;&#x6CD5;&#x5F7C;&#x6B64;&#x5B8C;&#x5168;&#x72EC;&#x7ACB;&#xFF0C;&#x4E14;&#x8981;&#x6C42;&#x5BF9;&#x5BA2;&#x6237;&#x9690;&#x85CF;&#x5177;&#x4F53;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x65F6;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x8981;&#x6C42;&#x4F7F;&#x7528;&#x7B97;&#x6CD5;&#x7684;&#x5BA2;&#x6237;&#x4E0D;&#x5E94;&#x8BE5;&#x77E5;&#x9053;&#x5176;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x6765;&#x9690;&#x85CF;&#x4E0E;&#x7B97;&#x6CD5;&#x76F8;&#x5173;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</li>
<li>&#x591A;&#x4E2A;&#x7C7B;&#x53EA;&#x533A;&#x522B;&#x5728;&#x8868;&#x73B0;&#x884C;&#x4E3A;&#x4E0D;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x9009;&#x62E9;&#x5177;&#x4F53;&#x8981;&#x6267;&#x884C;&#x7684;&#x884C;&#x4E3A;&#x3002;</li>
</ul>
<h3 class="mume-header" id="626-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p><code>Comparator</code> &#x4E2D;&#x7684;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x3002;&#x5728;Arrays&#x7C7B;&#x4E2D;&#x6709;&#x4E00;&#x4E2A; <code>sort()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Arrays&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x89D2;&#x8272;&#x7C7B;&#xFF0C;&#x8FD9;&#x4E2A;sort&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4F20;&#x4E00;&#x4E2A;&#x65B0;&#x7B56;&#x7565;&#x8BA9;Arrays&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x7B56;&#x7565;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x5C31;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x7C7B;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x5B9E;&#x73B0;&#x964D;&#x5E8F;&#x6392;&#x5E8F;</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5728;&#x8C03;&#x7528;Arrays&#x7684;sort&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7684;&#x662F;Comparator&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#x3002;&#x6240;&#x4EE5;Comparator&#x5145;&#x5F53;&#x7684;&#x662F;&#x62BD;&#x8C61;&#x7B56;&#x7565;&#x89D2;&#x8272;&#xFF0C;&#x800C;&#x5177;&#x4F53;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5145;&#x5F53;&#x7684;&#x662F;&#x5177;&#x4F53;&#x7B56;&#x7565;&#x89D2;&#x8272;&#x3002;&#x73AF;&#x5883;&#x89D2;&#x8272;&#x7C7B;&#xFF08;Arrays&#xFF09;&#x5E94;&#x8BE5;&#x6301;&#x6709;&#x62BD;&#x8C61;&#x7B56;&#x7565;&#x7684;&#x5F15;&#x7528;&#x6765;&#x8C03;&#x7528;&#x3002;&#x90A3;&#x4E48;&#xFF0C;Arrays&#x7C7B;&#x7684;sort&#x65B9;&#x6CD5;&#x5230;&#x5E95;&#x6709;&#x6CA1;&#x6709;&#x4F7F;&#x7528;Comparator&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;&#x7684; <code>compare()</code> &#x65B9;&#x6CD5;&#x5417;&#xFF1F;&#x8BA9;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x67E5;&#x770B;TimSort&#x7C7B;&#x7684; <code>sort()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a &quot;mini-TimSort&quot; with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> MIN_MERGE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>   
        
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x6700;&#x7EC8;&#x4F1A;&#x8DD1;&#x5230; <code>countRunAndMakeAscending()</code> &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#xFF0C;&#x53EA;&#x7528;&#x4E86;compare&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8C03;&#x7528;Arrays.sort&#x65B9;&#x6CD5;&#x53EA;&#x4F20;&#x5177;&#x4F53;compare&#x91CD;&#x5199;&#x65B9;&#x6CD5;&#x7684;&#x7C7B;&#x5BF9;&#x8C61;&#x5C31;&#x884C;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;Comparator&#x63A5;&#x53E3;&#x4E2D;&#x5FC5;&#x987B;&#x8981;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<h2 class="mume-header" id="63-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F">6.3 &#x547D;&#x4EE4;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="631-%E6%A6%82%E8%BF%B0">6.3.1 &#x6982;&#x8FF0;</h3>

<p>&#x65E5;&#x5E38;&#x751F;&#x6D3B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x51FA;&#x53BB;&#x5403;&#x996D;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200211130313251.png" style="zoom:60%;">
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x5C06;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4F7F;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x7684;&#x8D23;&#x4EFB;&#x548C;&#x6267;&#x884C;&#x8BF7;&#x6C42;&#x7684;&#x8D23;&#x4EFB;&#x5206;&#x5272;&#x5F00;&#x3002;&#x8FD9;&#x6837;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x6C9F;&#x901A;&#xFF0C;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x5C06;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x3001;&#x4F20;&#x9012;&#x3001;&#x8C03;&#x7528;&#x3001;&#x589E;&#x52A0;&#x4E0E;&#x7BA1;&#x7406;&#x3002;</p>
<h3 class="mume-header" id="632-%E7%BB%93%E6%9E%84">6.3.2 &#x7ED3;&#x6784;</h3>

<p>&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x62BD;&#x8C61;&#x547D;&#x4EE4;&#x7C7B;&#xFF08;Command&#xFF09;&#x89D2;&#x8272;&#xFF1A; &#x5B9A;&#x4E49;&#x547D;&#x4EE4;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x58F0;&#x660E;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x547D;&#x4EE4;&#xFF08;Concrete  Command&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5177;&#x4F53;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5B9E;&#x73B0;&#x547D;&#x4EE4;&#x63A5;&#x53E3;&#xFF1B;&#x901A;&#x5E38;&#x4F1A;&#x6301;&#x6709;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x5E76;&#x8C03;&#x7528;&#x63A5;&#x6536;&#x8005;&#x7684;&#x529F;&#x80FD;&#x6765;&#x5B8C;&#x6210;&#x547D;&#x4EE4;&#x8981;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x5B9E;&#x73B0;&#x8005;/&#x63A5;&#x6536;&#x8005;&#xFF08;Receiver&#xFF09;&#x89D2;&#x8272;&#xFF1A; &#x63A5;&#x6536;&#x8005;&#xFF0C;&#x771F;&#x6B63;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x4EFB;&#x4F55;&#x7C7B;&#x90FD;&#x53EF;&#x80FD;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x547D;&#x4EE4;&#x8981;&#x6C42;&#x5B9E;&#x73B0;&#x7684;&#x76F8;&#x5E94;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x8C03;&#x7528;&#x8005;/&#x8BF7;&#x6C42;&#x8005;&#xFF08;Invoker&#xFF09;&#x89D2;&#x8272;&#xFF1A; &#x8981;&#x6C42;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x8BF7;&#x6C42;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x6301;&#x6709;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x6301;&#x6709;&#x5F88;&#x591A;&#x7684;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x771F;&#x6B63;&#x89E6;&#x53D1;&#x547D;&#x4EE4;&#x5E76;&#x8981;&#x6C42;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x64CD;&#x4F5C;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x76F8;&#x5F53;&#x4E8E;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x7684;&#x5165;&#x53E3;&#x3002;</li>
</ul>
<h3 class="mume-header" id="633-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.3.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x5C06;&#x4E0A;&#x9762;&#x7684;&#x6848;&#x4F8B;&#x7528;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x5206;&#x6790;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x7684;&#x89D2;&#x8272;&#x5728;&#x8BE5;&#x6848;&#x4F8B;&#x4E2D;&#x7531;&#x8C01;&#x6765;&#x5145;&#x5F53;&#x3002;</p>
<p>&#x670D;&#x52A1;&#x5458;&#xFF1A; &#x5C31;&#x662F;&#x8C03;&#x7528;&#x8005;&#x89D2;&#x8272;&#xFF0C;&#x7531;&#x5979;&#x6765;&#x53D1;&#x8D77;&#x547D;&#x4EE4;&#x3002;</p>
<p>&#x8D44;&#x6DF1;&#x5927;&#x53A8;&#xFF1A; &#x5C31;&#x662F;&#x63A5;&#x6536;&#x8005;&#x89D2;&#x8272;&#xFF0C;&#x771F;&#x6B63;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8BA2;&#x5355;&#xFF1A; &#x547D;&#x4EE4;&#x4E2D;&#x5305;&#x542B;&#x8BA2;&#x5355;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x547D;&#x4EE4;&#x6A21;&#x5F0F;.png" style="zoom:75%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x53EA;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x6267;&#x884C;&#x65B9;&#x6CD5;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//&#x6301;&#x6709;&#x63A5;&#x53D7;&#x8005;&#x5BF9;&#x8C61;</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x684C;&#x7684;&#x8BA2;&#x5355;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x505C;&#x987F;&#x4E00;&#x4E0B; &#x6A21;&#x62DF;&#x505A;&#x996D;&#x7684;&#x8FC7;&#x7A0B;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x684C;&#x7684;&#x996D;&#x5F04;&#x597D;&#x4E86;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x9910;&#x684C;&#x53F7;&#x7801;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// &#x7528;&#x6765;&#x5B58;&#x50A8;&#x9910;&#x540D;&#x5E76;&#x8BB0;&#x5F55;&#x4EFD;&#x6570;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x8D44;&#x6DF1;&#x5927;&#x53A8;&#x7C7B; &#x662F;&#x547D;&#x4EE4;&#x7684;Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;&#x4EFD;&quot;</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span> commands<span class="token punctuation">;</span><span class="token comment">//&#x53EF;&#x4EE5;&#x6301;&#x6709;&#x5F88;&#x591A;&#x7684;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x53D1;&#x51FA;&#x547D;&#x4EE4; &#x558A; &#x8BA2;&#x5355;&#x6765;&#x4E86;&#xFF0C;&#x53A8;&#x5E08;&#x5F00;&#x59CB;&#x6267;&#x884C;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7F8E;&#x5973;&#x670D;&#x52A1;&#x5458;&#xFF1A;&#x53EE;&#x549A;&#xFF0C;&#x5927;&#x53A8;&#xFF0C;&#x65B0;&#x8BA2;&#x5355;&#x6765;&#x4E86;.......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x521B;&#x5EFA;2&#x4E2A;order</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;&#x897F;&#x7EA2;&#x67FF;&#x9E21;&#x86CB;&#x9762;&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x676F;&#x53EF;&#x4E50;&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C16;&#x6912;&#x8089;&#x4E1D;&#x76D6;&#x996D;&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x676F;&#x96EA;&#x78A7;&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x521B;&#x5EFA;&#x63A5;&#x6536;&#x8005;</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5C06;&#x8BA2;&#x5355;&#x548C;&#x63A5;&#x6536;&#x8005;&#x5C01;&#x88C5;&#x6210;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x8C03;&#x7528;&#x8005; waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x5C06;&#x8BA2;&#x5355;&#x5E26;&#x5230;&#x67DC;&#x53F0; &#x5E76;&#x5411;&#x53A8;&#x5E08;&#x558A; &#x8BA2;&#x5355;&#x6765;&#x4E86;</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="634-%E4%BC%98%E7%BC%BA%E7%82%B9">6.3.4 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x964D;&#x4F4E;&#x7CFB;&#x7EDF;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x3002;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x80FD;&#x5C06;&#x8C03;&#x7528;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;&#x4E0E;&#x5B9E;&#x73B0;&#x8BE5;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;&#x89E3;&#x8026;&#x3002;</li>
<li>&#x589E;&#x52A0;&#x6216;&#x5220;&#x9664;&#x547D;&#x4EE4;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;&#x91C7;&#x7528;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x589E;&#x52A0;&#x4E0E;&#x5220;&#x9664;&#x547D;&#x4EE4;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x7C7B;&#xFF0C;&#x5B83;&#x6EE1;&#x8DB3;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D;&#xFF0C;&#x5BF9;&#x6269;&#x5C55;&#x6BD4;&#x8F83;&#x7075;&#x6D3B;&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5B8F;&#x547D;&#x4EE4;&#x3002;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x4E0E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7ED3;&#x5408;&#xFF0C;&#x5C06;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x88C5;&#x914D;&#x6210;&#x4E00;&#x4E2A;&#x7EC4;&#x5408;&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x5B8F;&#x547D;&#x4EE4;&#x3002;</li>
<li>&#x65B9;&#x4FBF;&#x5B9E;&#x73B0; Undo &#x548C; Redo &#x64CD;&#x4F5C;&#x3002;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x4E0E;&#x540E;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#x7ED3;&#x5408;&#xFF0C;&#x5B9E;&#x73B0;&#x547D;&#x4EE4;&#x7684;&#x64A4;&#x9500;&#x4E0E;&#x6062;&#x590D;&#x3002;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x67D0;&#x4E9B;&#x7CFB;&#x7EDF;&#x6709;&#x8FC7;&#x591A;&#x7684;&#x5177;&#x4F53;&#x547D;&#x4EE4;&#x7C7B;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x7ED3;&#x6784;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x3002;</li>
</ul>
<h3 class="mume-header" id="635-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">6.3.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>

<ul>
<li>&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x5C06;&#x8BF7;&#x6C42;&#x8C03;&#x7528;&#x8005;&#x548C;&#x8BF7;&#x6C42;&#x63A5;&#x6536;&#x8005;&#x89E3;&#x8026;&#xFF0C;&#x4F7F;&#x5F97;&#x8C03;&#x7528;&#x8005;&#x548C;&#x63A5;&#x6536;&#x8005;&#x4E0D;&#x76F4;&#x63A5;&#x4EA4;&#x4E92;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x95F4;&#x6307;&#x5B9A;&#x8BF7;&#x6C42;&#x3001;&#x5C06;&#x8BF7;&#x6C42;&#x6392;&#x961F;&#x548C;&#x6267;&#x884C;&#x8BF7;&#x6C42;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x652F;&#x6301;&#x547D;&#x4EE4;&#x7684;&#x64A4;&#x9500;(Undo)&#x64CD;&#x4F5C;&#x548C;&#x6062;&#x590D;(Redo)&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<h3 class="mume-header" id="636-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.3.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>Runable&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#xFF0C;Runnable&#x62C5;&#x5F53;&#x547D;&#x4EE4;&#x7684;&#x89D2;&#x8272;&#xFF0C;Thread&#x5145;&#x5F53;&#x7684;&#x662F;&#x8C03;&#x7528;&#x8005;&#xFF0C;start&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x5176;&#x6267;&#x884C;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x547D;&#x4EE4;&#x63A5;&#x53E3;(&#x62BD;&#x8C61;&#x547D;&#x4EE4;&#x89D2;&#x8272;)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x8C03;&#x7528;&#x8005;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x4E2A;native&#x65B9;&#x6CD5;start0(),&#x8C03;&#x7528;&#x7CFB;&#x7EDF;&#x65B9;&#x6CD5;&#xFF0C;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x800C;&#x63A5;&#x6536;&#x8005;&#x662F;&#x5BF9;&#x7A0B;&#x5E8F;&#x5458;&#x5F00;&#x653E;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x63A5;&#x6536;&#x8005;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/**
 * jdk Runnable &#x547D;&#x4EE4;&#x6A21;&#x5F0F;
 *		TurnOffThread &#xFF1A; &#x5C5E;&#x4E8E;&#x5177;&#x4F53;
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>
    
     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><pre data-role="codeBlock" data-info="java" class="language-java"><span class="token doc-comment comment">/**
 * &#x6D4B;&#x8BD5;&#x7C7B;
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="64-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F">6.4 &#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;</h2>

<h3 class="mume-header" id="641-%E6%A6%82%E8%BF%B0">6.4.1 &#x6982;&#x8FF0;</h3>

<p>&#x5728;&#x73B0;&#x5B9E;&#x751F;&#x6D3B;&#x4E2D;&#xFF0C;&#x5E38;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x6837;&#x7684;&#x4E8B;&#x4F8B;&#xFF1A;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6709;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#x6216;&#x6743;&#x9650;&#x4E0D;&#x540C;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x516C;&#x53F8;&#x5458;&#x5DE5;&#x8BF7;&#x5047;&#xFF0C;&#x53EF;&#x6279;&#x5047;&#x7684;&#x9886;&#x5BFC;&#x6709;&#x90E8;&#x95E8;&#x8D1F;&#x8D23;&#x4EBA;&#x3001;&#x526F;&#x603B;&#x7ECF;&#x7406;&#x3001;&#x603B;&#x7ECF;&#x7406;&#x7B49;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x9886;&#x5BFC;&#x80FD;&#x6279;&#x51C6;&#x7684;&#x5929;&#x6570;&#x4E0D;&#x540C;&#xFF0C;&#x5458;&#x5DE5;&#x5FC5;&#x987B;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x8981;&#x8BF7;&#x5047;&#x7684;&#x5929;&#x6570;&#x53BB;&#x627E;&#x4E0D;&#x540C;&#x7684;&#x9886;&#x5BFC;&#x7B7E;&#x540D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5458;&#x5DE5;&#x5FC5;&#x987B;&#x8BB0;&#x4F4F;&#x6BCF;&#x4E2A;&#x9886;&#x5BFC;&#x7684;&#x59D3;&#x540D;&#x3001;&#x7535;&#x8BDD;&#x548C;&#x5730;&#x5740;&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x589E;&#x52A0;&#x4E86;&#x96BE;&#x5EA6;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x4F8B;&#x5B50;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5982;&#x627E;&#x9886;&#x5BFC;&#x51FA;&#x5DEE;&#x62A5;&#x9500;&#x3001;&#x751F;&#x6D3B;&#x4E2D;&#x7684;&#x201C;&#x51FB;&#x9F13;&#x4F20;&#x82B1;&#x201D;&#x6E38;&#x620F;&#x7B49;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x53C8;&#x540D;&#x804C;&#x8D23;&#x94FE;&#x6A21;&#x5F0F;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x8005;&#x4E0E;&#x591A;&#x4E2A;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x8005;&#x8026;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#x8005;&#x901A;&#x8FC7;&#x524D;&#x4E00;&#x5BF9;&#x8C61;&#x8BB0;&#x4F4F;&#x5176;&#x4E0B;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x800C;&#x8FDE;&#x6210;&#x4E00;&#x6761;&#x94FE;&#xFF1B;&#x5F53;&#x6709;&#x8BF7;&#x6C42;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x53EF;&#x5C06;&#x8BF7;&#x6C42;&#x6CBF;&#x7740;&#x8FD9;&#x6761;&#x94FE;&#x4F20;&#x9012;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x5BF9;&#x8C61;&#x5904;&#x7406;&#x5B83;&#x4E3A;&#x6B62;&#x3002;</p>
<h3 class="mume-header" id="642-%E7%BB%93%E6%9E%84">6.4.2 &#x7ED3;&#x6784;</h3>

<p>&#x804C;&#x8D23;&#x94FE;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;:</p>
<ul>
<li>&#x62BD;&#x8C61;&#x5904;&#x7406;&#x8005;&#xFF08;Handler&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5305;&#x542B;&#x62BD;&#x8C61;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#x548C;&#x4E00;&#x4E2A;&#x540E;&#x7EE7;&#x8FDE;&#x63A5;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x5904;&#x7406;&#x8005;&#xFF08;Concrete Handler&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x5904;&#x7406;&#x8005;&#x7684;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x5224;&#x65AD;&#x80FD;&#x5426;&#x5904;&#x7406;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x5219;&#x5904;&#x7406;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x8BE5;&#x8BF7;&#x6C42;&#x8F6C;&#x7ED9;&#x5B83;&#x7684;&#x540E;&#x7EE7;&#x8005;&#x3002;</li>
<li>&#x5BA2;&#x6237;&#x7C7B;&#xFF08;Client&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x521B;&#x5EFA;&#x5904;&#x7406;&#x94FE;&#xFF0C;&#x5E76;&#x5411;&#x94FE;&#x5934;&#x7684;&#x5177;&#x4F53;&#x5904;&#x7406;&#x8005;&#x5BF9;&#x8C61;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;&#xFF0C;&#x5B83;&#x4E0D;&#x5173;&#x5FC3;&#x5904;&#x7406;&#x7EC6;&#x8282;&#x548C;&#x8BF7;&#x6C42;&#x7684;&#x4F20;&#x9012;&#x8FC7;&#x7A0B;&#x3002;</li>
</ul>
<h3 class="mume-header" id="643-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.4.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>

<p>&#x73B0;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x8BF7;&#x5047;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#x3002;&#x8BF7;&#x5047;&#x4E00;&#x5929;&#x4EE5;&#x4E0B;&#x7684;&#x5047;&#x53EA;&#x9700;&#x8981;&#x5C0F;&#x7EC4;&#x957F;&#x540C;&#x610F;&#x5373;&#x53EF;&#xFF1B;&#x8BF7;&#x5047;1&#x5929;&#x5230;3&#x5929;&#x7684;&#x5047;&#x8FD8;&#x9700;&#x8981;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x540C;&#x610F;&#xFF1B;&#x8BF7;&#x6C42;3&#x5929;&#x5230;7&#x5929;&#x8FD8;&#x9700;&#x8981;&#x603B;&#x7ECF;&#x7406;&#x540C;&#x610F;&#x624D;&#x884C;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x8BF7;&#x5047;&#x6761;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//&#x59D3;&#x540D;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//&#x8BF7;&#x5047;&#x5929;&#x6570;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//&#x8BF7;&#x5047;&#x5185;&#x5BB9;</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5904;&#x7406;&#x8005;&#x62BD;&#x8C61;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_ONE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_THREE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_SEVEN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x8BE5;&#x9886;&#x5BFC;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x5047;&#x5929;&#x6570;&#x533A;&#x95F4;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//&#x9886;&#x5BFC;&#x4E0A;&#x9762;&#x8FD8;&#x6709;&#x9886;&#x5BFC;</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//&#x8BBE;&#x7F6E;&#x8BF7;&#x5047;&#x5929;&#x6570;&#x8303;&#x56F4; &#x4E0A;&#x4E0D;&#x5C01;&#x9876;</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x8BBE;&#x7F6E;&#x8BF7;&#x5047;&#x5929;&#x6570;&#x8303;&#x56F4;</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x8BBE;&#x7F6E;&#x4E0A;&#x7EA7;&#x9886;&#x5BFC;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x63D0;&#x4EA4;&#x8BF7;&#x5047;&#x6761;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//&#x5982;&#x679C;&#x8BF7;&#x5047;&#x5929;&#x6570;&#x8FBE;&#x5230;&#x8BE5;&#x9886;&#x5BFC;&#x8005;&#x7684;&#x5904;&#x7406;&#x8981;&#x6C42;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//&#x5982;&#x679C;&#x8FD8;&#x6709;&#x4E0A;&#x7EA7; &#x5E76;&#x4E14;&#x8BF7;&#x5047;&#x5929;&#x6570;&#x8D85;&#x8FC7;&#x4E86;&#x5F53;&#x524D;&#x9886;&#x5BFC;&#x7684;&#x5904;&#x7406;&#x8303;&#x56F4;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x7EE7;&#x7EED;&#x63D0;&#x4EA4;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6D41;&#x7A0B;&#x7ED3;&#x675F;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x5404;&#x7EA7;&#x9886;&#x5BFC;&#x5904;&#x7406;&#x8BF7;&#x5047;&#x6761;&#x65B9;&#x6CD5;</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5C0F;&#x7EC4;&#x957F;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x5C0F;&#x7EC4;&#x957F;&#x5904;&#x7406;1-3&#x5929;&#x7684;&#x8BF7;&#x5047;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8BF7;&#x5047;&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x5929;,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x7EC4;&#x957F;&#x5BA1;&#x6279;&#xFF1A;&#x540C;&#x610F;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x90E8;&#x95E8;&#x7ECF;&#x7406;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x5904;&#x7406;3-7&#x5929;&#x7684;&#x8BF7;&#x5047;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8BF7;&#x5047;&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x5929;,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x5BA1;&#x6279;&#xFF1A;&#x540C;&#x610F;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x603B;&#x7ECF;&#x7406;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x5904;&#x7406;7&#x5929;&#x4EE5;&#x4E0A;&#x7684;&#x8BF7;&#x5047;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8BF7;&#x5047;&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x5929;,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x603B;&#x7ECF;&#x7406;&#x5BA1;&#x6279;&#xFF1A;&#x540C;&#x610F;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x8BF7;&#x5047;&#x6761;&#x6765;&#x4E00;&#x5F20;</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x82B1;&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;&#x8EAB;&#x4F53;&#x4E0D;&#x9002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x5404;&#x4F4D;&#x9886;&#x5BFC;</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5C0F;&#x7EC4;&#x957F;&#x7684;&#x9886;&#x5BFC;&#x662F;&#x90E8;&#x95E8;&#x7ECF;&#x7406;</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x7684;&#x9886;&#x5BFC;&#x662F;&#x603B;&#x7ECF;&#x7406;</span>
        <span class="token comment">//&#x4E4B;&#x6240;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x4E0A;&#x7EA7;&#x9886;&#x5BFC;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x6765;&#x66F4;&#x6539;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x5B9E;&#x6218;&#x4E2D;&#x4E0A;&#x7EA7;&#x9886;&#x5BFC;&#x4EBA;&#x90FD;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x79FB;&#x5230;&#x9886;&#x5BFC;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;&#x3002;</span>

        <span class="token comment">//&#x63D0;&#x4EA4;&#x7533;&#x8BF7;</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="644-%E4%BC%98%E7%BC%BA%E7%82%B9">6.4.4 &#x4F18;&#x7F3A;&#x70B9;</h3>

<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x964D;&#x4F4E;&#x4E86;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;</p>
<p>&#x8BE5;&#x6A21;&#x5F0F;&#x964D;&#x4F4E;&#x4E86;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x8005;&#x548C;&#x63A5;&#x6536;&#x8005;&#x7684;&#x8026;&#x5408;&#x5EA6;&#x3002;</p>
</li>
<li>
<p>&#x589E;&#x5F3A;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;</p>
<p>&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7C7B;&#xFF0C;&#x6EE1;&#x8DB3;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;</p>
</li>
<li>
<p>&#x589E;&#x5F3A;&#x4E86;&#x7ED9;&#x5BF9;&#x8C61;&#x6307;&#x6D3E;&#x804C;&#x8D23;&#x7684;&#x7075;&#x6D3B;&#x6027;</p>
<p>&#x5F53;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x6539;&#x53D8;&#x94FE;&#x5185;&#x7684;&#x6210;&#x5458;&#x6216;&#x8005;&#x4FEE;&#x6539;&#x5B83;&#x4EEC;&#x7684;&#x6B21;&#x5E8F;&#xFF0C;&#x4E5F;&#x53EF;&#x52A8;&#x6001;&#x5730;&#x65B0;&#x589E;&#x6216;&#x8005;&#x5220;&#x9664;&#x8D23;&#x4EFB;&#x3002;</p>
</li>
<li>
<p>&#x8D23;&#x4EFB;&#x94FE;&#x7B80;&#x5316;&#x4E86;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;</p>
<p>&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53EA;&#x9700;&#x4FDD;&#x6301;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x5176;&#x540E;&#x7EE7;&#x8005;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x4FDD;&#x6301;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x5904;&#x7406;&#x8005;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8FD9;&#x907F;&#x514D;&#x4E86;&#x4F7F;&#x7528;&#x4F17;&#x591A;&#x7684; if &#x6216;&#x8005; if&#xB7;&#xB7;&#xB7;else &#x8BED;&#x53E5;&#x3002;</p>
</li>
<li>
<p>&#x8D23;&#x4EFB;&#x5206;&#x62C5;</p>
<p>&#x6BCF;&#x4E2A;&#x7C7B;&#x53EA;&#x9700;&#x8981;&#x5904;&#x7406;&#x81EA;&#x5DF1;&#x8BE5;&#x5904;&#x7406;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E0D;&#x80FD;&#x5904;&#x7406;&#x7684;&#x4F20;&#x9012;&#x7ED9;&#x4E0B;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B8C;&#x6210;&#xFF0C;&#x660E;&#x786E;&#x5404;&#x7C7B;&#x7684;&#x8D23;&#x4EFB;&#x8303;&#x56F4;&#xFF0C;&#x7B26;&#x5408;&#x7C7B;&#x7684;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#x3002;</p>
</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x4E00;&#x5B9A;&#x88AB;&#x5904;&#x7406;&#x3002;&#x7531;&#x4E8E;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x660E;&#x786E;&#x7684;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5B83;&#x4E00;&#x5B9A;&#x4F1A;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x8BE5;&#x8BF7;&#x6C42;&#x53EF;&#x80FD;&#x4E00;&#x76F4;&#x4F20;&#x5230;&#x94FE;&#x7684;&#x672B;&#x7AEF;&#x90FD;&#x5F97;&#x4E0D;&#x5230;&#x5904;&#x7406;&#x3002;</li>
<li>&#x5BF9;&#x6BD4;&#x8F83;&#x957F;&#x7684;&#x804C;&#x8D23;&#x94FE;&#xFF0C;&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#x53EF;&#x80FD;&#x6D89;&#x53CA;&#x591A;&#x4E2A;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x5C06;&#x53D7;&#x5230;&#x4E00;&#x5B9A;&#x5F71;&#x54CD;&#x3002;</li>
<li>&#x804C;&#x8D23;&#x94FE;&#x5EFA;&#x7ACB;&#x7684;&#x5408;&#x7406;&#x6027;&#x8981;&#x9760;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x4FDD;&#x8BC1;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x590D;&#x6742;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x7531;&#x4E8E;&#x804C;&#x8D23;&#x94FE;&#x7684;&#x9519;&#x8BEF;&#x8BBE;&#x7F6E;&#x800C;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x51FA;&#x9519;&#xFF0C;&#x5982;&#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;&#x5FAA;&#x73AF;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<h3 class="mume-header" id="645-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.4.5 &#x6E90;&#x7801;&#x89E3;&#x6790;</h3>

<p>&#x5728;javaWeb&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;FilterChain&#x662F;&#x804C;&#x8D23;&#x94FE;&#xFF08;&#x8FC7;&#x6EE4;&#x5668;&#xFF09;&#x6A21;&#x5F0F;&#x7684;&#x5178;&#x578B;&#x5E94;&#x7528;&#xFF0C;&#x4EE5;&#x4E0B;&#x662F;Filter&#x7684;&#x6A21;&#x62DF;&#x5B9E;&#x73B0;&#x5206;&#x6790;:</p>
<ul>
<li>
<p>&#x6A21;&#x62DF;web&#x8BF7;&#x6C42;Request&#x4EE5;&#x53CA;web&#x54CD;&#x5E94;Response</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>
 
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>
 
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>&#x6A21;&#x62DF;web&#x8FC7;&#x6EE4;&#x5668;Filter</p>
<pre data-role="codeBlock" data-info="java" class="language-java"> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</pre></li>
<li>
<p>&#x6A21;&#x62DF;&#x5B9E;&#x73B0;&#x5177;&#x4F53;&#x8FC7;&#x6EE4;&#x5668;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8FC7;&#x6EE4;&#x5668;1 &#x524D;&#x7F6E;&#x5904;&#x7406;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x5148;&#x6267;&#x884C;&#x6240;&#x6709;request&#x518D;&#x5012;&#x5E8F;&#x6267;&#x884C;&#x6240;&#x6709;response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8FC7;&#x6EE4;&#x5668;1 &#x540E;&#x7F6E;&#x5904;&#x7406;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8FC7;&#x6EE4;&#x5668;2 &#x524D;&#x7F6E;&#x5904;&#x7406;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x5148;&#x6267;&#x884C;&#x6240;&#x6709;request&#x518D;&#x5012;&#x5E8F;&#x6267;&#x884C;&#x6240;&#x6709;response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8FC7;&#x6EE4;&#x5668;2 &#x540E;&#x7F6E;&#x5904;&#x7406;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>&#x6A21;&#x62DF;&#x5B9E;&#x73B0;&#x8FC7;&#x6EE4;&#x5668;&#x94FE;FilterChain</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x94FE;&#x5F0F;&#x8C03;&#x7528;</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>&#x6D4B;&#x8BD5;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2>6.5 &#x72B6;&#x6001;&#x6A21;&#x5F0F;</h2>
<h3>6.5.1 &#x6982;&#x8FF0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x901A;&#x8FC7;&#x6309;&#x94AE;&#x6765;&#x63A7;&#x5236;&#x4E00;&#x4E2A;&#x7535;&#x68AF;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x4E00;&#x4E2A;&#x7535;&#x68AF;&#x6709;&#x5F00;&#x95E8;&#x72B6;&#x6001;&#xFF0C;&#x5173;&#x95E8;&#x72B6;&#x6001;&#xFF0C;&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;&#x6BCF;&#x4E00;&#x79CD;&#x72B6;&#x6001;&#x6539;&#x53D8;&#xFF0C;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x8981;&#x6839;&#x636E;&#x5176;&#x4ED6;&#x72B6;&#x6001;&#x6765;&#x66F4;&#x65B0;&#x5904;&#x7406;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x7535;&#x68AF;&#x95E8;&#x73B0;&#x5728;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x65F6;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5F00;&#x95E8;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x5982;&#x679C;&#x7535;&#x68AF;&#x95E8;&#x662F;&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x5F00;&#x95E8;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x524D;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x7535;&#x68AF;&#x7684;4&#x4E2A;&#x72B6;&#x6001;</span>
    <span class="token comment">//&#x5F00;&#x95E8;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//&#x5173;&#x95E8;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//&#x8FD0;&#x884C;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x8BBE;&#x7F6E;&#x7535;&#x68AF;&#x7684;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x7684;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6267;&#x884C;&#x5173;&#x95E8;&#x52A8;&#x4F5C;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x5173;&#x95E8;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x53EA;&#x6709;&#x5F00;&#x95E8;&#x72B6;&#x6001;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x7535;&#x68AF;&#x95E8;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5E94;&#x7535;&#x68AF;&#x72B6;&#x6001;&#x8868;&#x6765;&#x770B;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5173;&#x95E8;&#x4E4B;&#x540E;&#x7535;&#x68AF;&#x5C31;&#x662F;&#x5173;&#x95ED;&#x72B6;&#x6001;&#x4E86;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //&#x5DF2;&#x7ECF;&#x662F;&#x5173;&#x95E8;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x80FD;&#x5173;&#x95E8;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //&#x8FD0;&#x884C;&#x65F6;&#x7535;&#x68AF;&#x95E8;&#x662F;&#x5173;&#x7740;&#x7684;&#xFF0C;&#x4E0D;&#x80FD;&#x5173;&#x95E8;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //&#x505C;&#x6B62;&#x65F6;&#x7535;&#x68AF;&#x4E5F;&#x662F;&#x5173;&#x7740;&#x7684;&#xFF0C;&#x4E0D;&#x80FD;&#x5173;&#x95E8;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6267;&#x884C;&#x5F00;&#x95E8;&#x52A8;&#x4F5C;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x95E8;&#x5DF2;&#x7ECF;&#x5F00;&#x4E86;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x5F00;&#x95E8;&#x4E86;
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x5173;&#x95E8;&#x72B6;&#x6001;&#xFF0C;&#x95E8;&#x6253;&#x5F00;<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x6253;&#x5F00;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing &#x8FD0;&#x884C;&#x65F6;&#x7535;&#x68AF;&#x4E0D;&#x80FD;&#x5F00;&#x95E8;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x7535;&#x68AF;&#x505C;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5F00;&#x95E8;&#x4E86;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6267;&#x884C;&#x8FD0;&#x884C;&#x52A8;&#x4F5C;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x7535;&#x68AF;&#x4E0D;&#x80FD;&#x5F00;&#x7740;&#x95E8;&#x5C31;&#x8D70;
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x95E8;&#x5173;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4E86;
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x73B0;&#x5728;&#x662F;&#x8FD0;&#x884C;&#x72B6;&#x6001;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing &#x5DF2;&#x7ECF;&#x662F;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x4E86;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6267;&#x884C;&#x505C;&#x6B62;&#x52A8;&#x4F5C;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span> <span class="token comment">//&#x5F00;&#x95E8;&#x7684;&#x7535;&#x68AF;&#x5DF2;&#x7ECF;&#x662F;&#x662F;&#x505C;&#x6B62;&#x7684;&#x4E86;(&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x5173;&#x95E8;&#x65F6;&#x624D;&#x53EF;&#x4EE5;&#x505C;&#x6B62;
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>&#x8FD0;&#x884C;&#x65F6;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x505C;&#x6B62;&#x4E86;
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;&#x3002;&#x3002;&#x3002;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x7535;&#x68AF;&#x662F;&#x505C;&#x6B62;&#x7684;</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5F00;&#x95E8;</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5173;&#x95E8;</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x8FD0;&#x884C;</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x505C;&#x6B62;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x95EE;&#x9898;&#x5206;&#x6790;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528;&#x4E86;&#x5927;&#x91CF;&#x7684;switch&#x2026;case&#x8FD9;&#x6837;&#x7684;&#x5224;&#x65AD;&#xFF08;if&#x2026;else&#x4E5F;&#x662F;&#x4E00;&#x6837;)&#xFF0C;&#x4F7F;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x9605;&#x8BFB;&#x6027;&#x53D8;&#x5DEE;&#x3002;</li>
<li>&#x6269;&#x5C55;&#x6027;&#x5F88;&#x5DEE;&#x3002;&#x5982;&#x679C;&#x65B0;&#x52A0;&#x4E86;&#x65AD;&#x7535;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E0A;&#x9762;&#x5224;&#x65AD;&#x903B;&#x8F91;</li>
</ul>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x5BF9;&#x6709;&#x72B6;&#x6001;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x628A;&#x590D;&#x6742;&#x7684;&#x201C;&#x5224;&#x65AD;&#x903B;&#x8F91;&#x201D;&#x63D0;&#x53D6;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x5141;&#x8BB8;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x5728;&#x5176;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x6539;&#x53D8;&#x5176;&#x884C;&#x4E3A;&#x3002;</p>
<h3>6.5.2 &#x7ED3;&#x6784;</h3>
<p>&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#x3002;</p>
<ul>
<li>&#x73AF;&#x5883;&#xFF08;Context&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x4E5F;&#x79F0;&#x4E3A;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x5BA2;&#x6237;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x5F53;&#x524D;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5C06;&#x4E0E;&#x72B6;&#x6001;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x59D4;&#x6258;&#x7ED9;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x6765;&#x5904;&#x7406;&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x72B6;&#x6001;&#xFF08;State&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x4EE5;&#x5C01;&#x88C5;&#x73AF;&#x5883;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x72B6;&#x6001;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x884C;&#x4E3A;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x72B6;&#x6001;&#xFF08;Concrete  State&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x72B6;&#x6001;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x884C;&#x4E3A;&#x3002;</li>
</ul>
<h3>6.5.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x5BF9;&#x4E0A;&#x8FF0;&#x7535;&#x68AF;&#x7684;&#x6848;&#x4F8B;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x72B6;&#x6001;&#x6A21;&#x5F0F;.png" style="zoom:70%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x62BD;&#x8C61;&#x72B6;&#x6001;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x89D2;&#x8272;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C01;&#x88C5;&#x72B6;&#x6001;&#x7684;&#x53D8;&#x5316;&#x5F15;&#x8D77;&#x7684;&#x529F;&#x80FD;&#x53D8;&#x5316;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x5F00;&#x95E8;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x5173;&#x95E8;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x8FD0;&#x884C;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x505C;&#x6B62;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5F00;&#x542F;&#x72B6;&#x6001;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//&#x5F00;&#x542F;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x4E86;&#xFF0C;&#x6211;&#x5C31;&#x60F3;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x5173;&#x529F;&#x80FD;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x72B6;&#x6001;&#x4FEE;&#x6539;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x52A8;&#x4F5C;&#x59D4;&#x6258;&#x4E3A;CloseState&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x59D4;&#x6258;&#x7ED9;&#x4E86;ClosingState&#x5B50;&#x7C7B;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x4E0D;&#x80FD;&#x5F00;&#x7740;&#x5C31;&#x8DD1;&#xFF0C;&#x8FD9;&#x91CC;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x5F00;&#x95E8;&#x72B6;&#x6001;&#x5DF2;&#x7ECF;&#x662F;&#x505C;&#x6B62;&#x7684;&#x4E86;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x8FD0;&#x884C;&#x72B6;&#x6001;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#x5F00;&#x7535;&#x68AF;&#x95E8;&#xFF1F;&#x4F60;&#x75AF;&#x4E86;&#xFF01;&#x7535;&#x68AF;&#x4E0D;&#x4F1A;&#x7ED9;&#x4F60;&#x5F00;&#x7684;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;&#xFF1F;&#x8FD9;&#x662F;&#x80AF;&#x5B9A;&#x4E86;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x5173;&#x95E8;&#xFF0C;&#x4F46;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x4E0D;&#x5F52;&#x6211;&#x6267;&#x884C;</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x8FD9;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x4E0B;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x6B63;&#x5728;&#x8FD0;&#x884C;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x8FD9;&#x4E2A;&#x4E8B;&#x7EDD;&#x5BF9;&#x662F;&#x5408;&#x7406;&#x7684;&#xFF0C;&#x5149;&#x8FD0;&#x884C;&#x4E0D;&#x505C;&#x6B62;&#x8FD8;&#x6709;&#x8C01;&#x6562;&#x505A;&#x8FD9;&#x4E2A;&#x7535;&#x68AF;&#xFF1F;&#xFF01;&#x4F30;&#x8BA1;&#x53EA;&#x6709;&#x4E0A;&#x5E1D;&#x4E86;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x95E8;&#xFF0C;&#x90A3;&#x662F;&#x8981;&#x7684;&#xFF01;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x72B6;&#x6001;&#x4FEE;&#x6539;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x52A8;&#x4F5C;&#x59D4;&#x6258;&#x4E3A;CloseState&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x59D4;&#x6258;&#x7ED9;&#x4E86;ClosingState&#x5B50;&#x7C7B;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x5173;&#x95E8;&#xFF0C;&#x4F46;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x4E0D;&#x5F52;&#x6211;&#x6267;&#x884C;</span>
        <span class="token comment">//&#x72B6;&#x6001;&#x4FEE;&#x6539;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x52A8;&#x4F5C;&#x59D4;&#x6258;&#x4E3A;CloseState&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x59D4;&#x6258;&#x7ED9;&#x4E86;ClosingState&#x5B50;&#x7C7B;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;&#x518D;&#x8DD1;&#x8D77;&#x6765;&#xFF0C;&#x6B63;&#x5E38;&#x7684;&#x5F88;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x72B6;&#x6001;&#x4FEE;&#x6539;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x52A8;&#x4F5C;&#x59D4;&#x6258;&#x4E3A;CloseState&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x59D4;&#x6258;&#x7ED9;&#x4E86;ClosingState&#x5B50;&#x7C7B;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;&#x662F;&#x600E;&#x4E48;&#x53D1;&#x751F;&#x7684;&#x5462;&#xFF1F;&#x5F53;&#x7136;&#x662F;&#x505C;&#x6B62;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x4E86;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5173;&#x95ED;&#x72B6;&#x6001;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;&#xFF0C;&#x8FD9;&#x662F;&#x5173;&#x95ED;&#x72B6;&#x6001;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x52A8;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x5173;&#x4E86;&#x518D;&#x6253;&#x5F00;&#xFF0C;&#x9017;&#x4F60;&#x73A9;&#x5462;&#xFF0C;&#x90A3;&#x8FD9;&#x4E2A;&#x5141;&#x8BB8;&#x5440;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x5173;&#x4E86;&#x5C31;&#x8DD1;&#xFF0C;&#x8FD9;&#x662F;&#x518D;&#x6B63;&#x5E38;&#x4E0D;&#x8FC7;&#x4E86;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x7535;&#x68AF;&#x95E8;&#x5173;&#x7740;&#xFF0C;&#x6211;&#x5C31;&#x4E0D;&#x6309;&#x697C;&#x5C42;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x73AF;&#x5883;&#x89D2;&#x8272;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x5B9A;&#x4E49;&#x51FA;&#x6240;&#x6709;&#x7684;&#x7535;&#x68AF;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5F00;&#x95E8;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7535;&#x68AF;&#x53EA;&#x80FD;&#x5173;&#x95ED;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x5173;&#x95ED;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7535;&#x68AF;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x3001;&#x505C;&#x6B62;&#x548C;&#x5F00;&#x95E8;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7535;&#x68AF;&#x53EA;&#x80FD;&#x505C;&#x6B62;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7535;&#x68AF;&#x53EF;&#x4EE5;&#x5F00;&#x95E8;&#x3001;&#x8FD0;&#x884C;</span>


    <span class="token comment">//&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5F53;&#x524D;&#x7535;&#x68AF;&#x72B6;&#x6001;</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x5F53;&#x524D;&#x73AF;&#x5883;&#x6539;&#x53D8;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//&#x628A;&#x5F53;&#x524D;&#x7684;&#x73AF;&#x5883;&#x901A;&#x77E5;&#x5230;&#x5404;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3>6.5.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5C06;&#x6240;&#x6709;&#x4E0E;&#x67D0;&#x4E2A;&#x72B6;&#x6001;&#x6709;&#x5173;&#x7684;&#x884C;&#x4E3A;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x7C7B;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x72B6;&#x6001;&#x5373;&#x53EF;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x7684;&#x884C;&#x4E3A;&#x3002;</li>
<li>&#x5141;&#x8BB8;&#x72B6;&#x6001;&#x8F6C;&#x6362;&#x903B;&#x8F91;&#x4E0E;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x5408;&#x6210;&#x4E00;&#x4F53;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x67D0;&#x4E00;&#x4E2A;&#x5DE8;&#x5927;&#x7684;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x5757;&#x3002;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x7684;&#x4F7F;&#x7528;&#x5FC5;&#x7136;&#x4F1A;&#x589E;&#x52A0;&#x7CFB;&#x7EDF;&#x7C7B;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x4E2A;&#x6570;&#x3002;</li>
<li>&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x6784;&#x4E0E;&#x5B9E;&#x73B0;&#x90FD;&#x8F83;&#x4E3A;&#x590D;&#x6742;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E0D;&#x5F53;&#x5C06;&#x5BFC;&#x81F4;&#x7A0B;&#x5E8F;&#x7ED3;&#x6784;&#x548C;&#x4EE3;&#x7801;&#x7684;&#x6DF7;&#x4E71;&#x3002;</li>
<li>&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x5BF9;&quot;&#x5F00;&#x95ED;&#x539F;&#x5219;&quot;&#x7684;&#x652F;&#x6301;&#x5E76;&#x4E0D;&#x592A;&#x597D;&#x3002;</li>
</ul>
<h3>6.5.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x884C;&#x4E3A;&#x53D6;&#x51B3;&#x4E8E;&#x5B83;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x5FC5;&#x987B;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x6839;&#x636E;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x5B83;&#x7684;&#x884C;&#x4E3A;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x4E2D;&#x542B;&#x6709;&#x5E9E;&#x5927;&#x7684;&#x5206;&#x652F;&#x7ED3;&#x6784;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E9B;&#x5206;&#x652F;&#x51B3;&#x5B9A;&#x4E8E;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x65F6;&#x3002;</li>
</ul>
<h2>6.6 &#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;</h2>
<h3>6.6.1 &#x6982;&#x8FF0;</h3>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x53C8;&#x88AB;&#x79F0;&#x4E3A;&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#xFF08;Publish/Subscribe&#xFF09;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x8BA9;&#x591A;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x67D0;&#x4E00;&#x4E2A;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x5728;&#x72B6;&#x6001;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4F1A;&#x901A;&#x77E5;&#x6240;&#x6709;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x4F7F;&#x4ED6;&#x4EEC;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;&#x3002;</p>
<h3>6.6.2 &#x7ED3;&#x6784;</h3>
<p>&#x5728;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#x6709;&#x5982;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>Subject&#xFF1A;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#xFF08;&#x62BD;&#x8C61;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF09;&#xFF0C;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x89D2;&#x8272;&#x628A;&#x6240;&#x6709;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x4FDD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x91CC;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E3B;&#x9898;&#x90FD;&#x53EF;&#x4EE5;&#x6709;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x548C;&#x5220;&#x9664;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x3002;</li>
<li>ConcreteSubject&#xFF1A;&#x5177;&#x4F53;&#x4E3B;&#x9898;&#xFF08;&#x5177;&#x4F53;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF09;&#xFF0C;&#x8BE5;&#x89D2;&#x8272;&#x5C06;&#x6709;&#x5173;&#x72B6;&#x6001;&#x5B58;&#x5165;&#x5177;&#x4F53;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x5177;&#x4F53;&#x4E3B;&#x9898;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x7ED9;&#x6240;&#x6709;&#x6CE8;&#x518C;&#x8FC7;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x3002;</li>
<li>Observer&#xFF1A;&#x62BD;&#x8C61;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#x7684;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x66F4;&#x65B0;&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x5F97;&#x5728;&#x5F97;&#x5230;&#x4E3B;&#x9898;&#x66F4;&#x6539;&#x901A;&#x77E5;&#x65F6;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;&#x3002;</li>
<li>ConcrereObserver&#xFF1A;&#x5177;&#x4F53;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x89C2;&#x5BDF;&#x8005;&#x5B9A;&#x4E49;&#x7684;&#x66F4;&#x65B0;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x5F97;&#x5230;&#x4E3B;&#x9898;&#x66F4;&#x6539;&#x901A;&#x77E5;&#x65F6;&#x66F4;&#x65B0;&#x81EA;&#x8EAB;&#x7684;&#x72B6;&#x6001;&#x3002;</li>
</ul>
<h3>6.6.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;</p>
<p>&#x5728;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x65F6;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x4F53;&#x9A8C;&#xFF0C;&#x5F53;&#x4F60;&#x5173;&#x6CE8;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x4E2D;&#x6709;&#x65B0;&#x5185;&#x5BB9;&#x66F4;&#x65B0;&#x7684;&#x8BDD;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x63A8;&#x9001;&#x7ED9;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x7AEF;&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x6765;&#x6A21;&#x62DF;&#x8FD9;&#x6837;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x5C31;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x662F;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x6709;&#x591A;&#x4E2A;&#x7684;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x5173;&#x6CE8;&#x4E86;&#x7A0B;&#x5E8F;&#x733F;&#x8FD9;&#x4E2A;&#x516C;&#x4F17;&#x53F7;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x89C2;&#x5BDF;&#x8005;&#x7C7B;&#xFF0C;&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x89C2;&#x5BDF;&#x8005;&#x7C7B;&#xFF0C;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x91CC;&#x9762;&#x5B9E;&#x73B0;&#x4E86;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x540D;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x7C7B;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;attach&#x3001;detach&#x3001;notify&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x589E;&#x52A0;&#x8BA2;&#x9605;&#x8005;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//&#x5220;&#x9664;&#x8BA2;&#x9605;&#x8005;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//&#x901A;&#x77E5;&#x8BA2;&#x9605;&#x8005;&#x66F4;&#x65B0;&#x6D88;&#x606F;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><p>&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x662F;&#x5177;&#x4F53;&#x4E3B;&#x9898;&#xFF08;&#x5177;&#x4F53;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF09;&#xFF0C;&#x91CC;&#x9762;&#x5B58;&#x50A8;&#x4E86;&#x8BA2;&#x9605;&#x8BE5;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x50A8;&#x5B58;&#x8BA2;&#x9605;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x5FAE;&#x4FE1;&#x7528;&#x6237;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x7A0B;&#x5E8F;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x5FAE;&#x4FE1;&#x7528;&#x6237;</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5B59;&#x609F;&#x7A7A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;&#x732A;&#x609F;&#x80FD;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6C99;&#x609F;&#x51C0;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x8BA2;&#x9605;&#x516C;&#x4F17;&#x53F7;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x516C;&#x4F17;&#x53F7;&#x66F4;&#x65B0;&#x53D1;&#x51FA;&#x6D88;&#x606F;&#x7ED9;&#x8BA2;&#x9605;&#x7684;&#x5FAE;&#x4FE1;&#x7528;&#x6237;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4F20;&#x667A;&#x9ED1;&#x9A6C;&#x7684;&#x4E13;&#x680F;&#x66F4;&#x65B0;&#x4E86;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><h3>6.6.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x964D;&#x4F4E;&#x4E86;&#x76EE;&#x6807;&#x4E0E;&#x89C2;&#x5BDF;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5173;&#x7CFB;&#xFF0C;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x662F;&#x62BD;&#x8C61;&#x8026;&#x5408;&#x5173;&#x7CFB;&#x3002;</li>
<li>&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x53D1;&#x9001;&#x901A;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x6CE8;&#x518C;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x4FE1;&#x606F;&#x3010;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5E7F;&#x64AD;&#x673A;&#x5236;&#x3011;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5982;&#x679C;&#x89C2;&#x5BDF;&#x8005;&#x975E;&#x5E38;&#x591A;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x6240;&#x6709;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x6536;&#x5230;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x53D1;&#x9001;&#x7684;&#x901A;&#x77E5;&#x4F1A;&#x8017;&#x65F6;</li>
<li>&#x5982;&#x679C;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x6709;&#x5FAA;&#x73AF;&#x4F9D;&#x8D56;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x4F1A;&#x4F7F;&#x89C2;&#x5BDF;&#x8005;&#x5FAA;&#x73AF;&#x8C03;&#x7528;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;</li>
</ul>
<h3>6.6.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>&#x5BF9;&#x8C61;&#x95F4;&#x5B58;&#x5728;&#x4E00;&#x5BF9;&#x591A;&#x5173;&#x7CFB;&#xFF0C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x6A21;&#x578B;&#x6709;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x65B9;&#x9762;&#x4F9D;&#x8D56;&#x4E8E;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x65F6;&#x3002;</li>
</ul>
<h3>6.6.6 JDK&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x5B9E;&#x73B0;</h3>
<p>&#x5728; Java &#x4E2D;&#xFF0C;&#x901A;&#x8FC7; java.util.Observable &#x7C7B;&#x548C; java.util.Observer &#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E86;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x5B83;&#x4EEC;&#x7684;&#x5B50;&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x5B9E;&#x4F8B;&#x3002;</p>
<p><strong>1&#xFF0C;Observable&#x7C7B;</strong></p>
<p>Observable &#x7C7B;&#x662F;&#x62BD;&#x8C61;&#x76EE;&#x6807;&#x7C7B;&#xFF08;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF09;&#xFF0C;&#x5B83;&#x6709;&#x4E00;&#x4E2A; Vector &#x96C6;&#x5408;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x6240;&#x6709;&#x8981;&#x901A;&#x77E5;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x4ECB;&#x7ECD;&#x5B83;&#x6700;&#x91CD;&#x8981;&#x7684; 3 &#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<ul>
<li>
<p>void addObserver(Observer o) &#x65B9;&#x6CD5;&#xFF1A;&#x7528;&#x4E8E;&#x5C06;&#x65B0;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x5230;&#x96C6;&#x5408;&#x4E2D;&#x3002;</p>
</li>
<li>
<p>void notifyObservers(Object arg) &#x65B9;&#x6CD5;&#xFF1A;&#x8C03;&#x7528;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x7684; update&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x77E5;&#x5B83;&#x4EEC;&#x6570;&#x636E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x3002;&#x901A;&#x5E38;&#x8D8A;&#x665A;&#x52A0;&#x5165;&#x96C6;&#x5408;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x8D8A;&#x5148;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x3002;</p>
</li>
<li>
<p>void setChange() &#x65B9;&#x6CD5;&#xFF1A;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A; boolean &#x7C7B;&#x578B;&#x7684;&#x5185;&#x90E8;&#x6807;&#x5FD7;&#xFF0C;&#x6CE8;&#x660E;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x3002;&#x5F53;&#x5B83;&#x4E3A;true&#x65F6;&#xFF0C;notifyObservers() &#x624D;&#x4F1A;&#x901A;&#x77E5;&#x89C2;&#x5BDF;&#x8005;&#x3002;</p>
</li>
</ul>
<p><strong>2&#xFF0C;Observer &#x63A5;&#x53E3;</strong></p>
<p>Observer &#x63A5;&#x53E3;&#x662F;&#x62BD;&#x8C61;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5B83;&#x76D1;&#x89C6;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x5F53;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x89C2;&#x5BDF;&#x8005;&#x5F97;&#x5230;&#x901A;&#x77E5;&#xFF0C;&#x5E76;&#x8C03;&#x7528; update &#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x3010;&#x4F8B;&#x3011;&#x8B66;&#x5BDF;&#x6293;&#x5C0F;&#x5077;</p>
<p>&#x8B66;&#x5BDF;&#x6293;&#x5C0F;&#x5077;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x8B66;&#x5BDF;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5C0F;&#x5077;&#x662F;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5C0F;&#x5077;&#x662F;&#x4E00;&#x4E2A;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x7EE7;&#x627F;Observable&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x5077;&#xFF1A;&#x6211;&#x5077;&#x4E1C;&#x897F;&#x4E86;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x4EBA;&#x6765;&#x6293;&#x6211;&#xFF01;&#xFF01;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>&#x8B66;&#x5BDF;&#x662F;&#x4E00;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8BA9;&#x5176;&#x5B9E;&#x73B0;Observer&#x63A5;&#x53E3;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8B66;&#x5BDF;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x76EF;&#x4F60;&#x5F88;&#x4E45;&#x4E86;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4FDD;&#x6301;&#x6C89;&#x9ED8;&#xFF0C;&#x4F46;&#x4F60;&#x6240;&#x8BF4;&#x7684;&#x5C06;&#x6210;&#x4E3A;&#x5448;&#x5802;&#x8BC1;&#x4F9B;&#xFF01;&#xFF01;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x5C0F;&#x5077;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9694;&#x58C1;&#x8001;&#x738B;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x521B;&#x5EFA;&#x8B66;&#x5BDF;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5C0F;&#x674E;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x8BA9;&#x8B66;&#x5BDF;&#x76EF;&#x7740;&#x5C0F;&#x5077;</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5C0F;&#x5077;&#x5077;&#x4E1C;&#x897F;</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2>6.7 &#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;</h2>
<h3>6.7.1 &#x6982;&#x8FF0;</h3>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x540C;&#x4E8B;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x662F;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#xFF0C;&#x591A;&#x4E2A;&#x540C;&#x4E8B;&#x7C7B;&#x4E4B;&#x95F4;&#x4E92;&#x76F8;&#x5173;&#x8054;&#x65F6;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x4F1A;&#x5448;&#x73B0;&#x4E3A;&#x590D;&#x6742;&#x7684;&#x7F51;&#x72B6;&#x7ED3;&#x6784;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x8FC7;&#x5EA6;&#x8026;&#x5408;&#x7684;&#x67B6;&#x6784;&#xFF0C;&#x5373;&#x4E0D;&#x5229;&#x4E8E;&#x7C7B;&#x7684;&#x590D;&#x7528;&#xFF0C;&#x4E5F;&#x4E0D;&#x7A33;&#x5B9A;&#x3002;&#x4F8B;&#x5982;&#x5728;&#x4E0B;&#x5DE6;&#x56FE;&#x4E2D;&#xFF0C;&#x6709;&#x516D;&#x4E2A;&#x540C;&#x4E8B;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x5047;&#x5982;&#x5BF9;&#x8C61;1&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x4F1A;&#x6709;4&#x4E2A;&#x5BF9;&#x8C61;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;&#x5982;&#x679C;&#x5BF9;&#x8C61;2&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x4F1A;&#x6709;5&#x4E2A;&#x5BF9;&#x8C61;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x540C;&#x4E8B;&#x7C7B;&#x4E4B;&#x95F4;&#x76F4;&#x63A5;&#x5173;&#x8054;&#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x4E0D;&#x597D;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5F15;&#x5165;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;&#x540C;&#x4E8B;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x5C06;&#x53D8;&#x4E3A;&#x661F;&#x578B;&#x7ED3;&#x6784;&#xFF0C;&#x4ECE;&#x4E0B;&#x53F3;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x53D8;&#x52A8;&#xFF0C;&#x53EA;&#x4F1A;&#x5F71;&#x54CD;&#x7684;&#x7C7B;&#x672C;&#x8EAB;&#xFF0C;&#x4EE5;&#x53CA;&#x4E2D;&#x4ECB;&#x8005;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x51CF;&#x5C0F;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x8026;&#x5408;&#x3002;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x5FC5;&#x5B9A;&#x4E0D;&#x4F1A;&#x628A;&#x6240;&#x6709;&#x7684;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x5904;&#x7406;&#x903B;&#x8F91;&#x5C01;&#x88C5;&#x5728;&#x672C;&#x7C7B;&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7684;&#x7C7B;&#x6765;&#x7BA1;&#x7406;&#x90A3;&#x4E9B;&#x4E0D;&#x5C5E;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200214110924010.png" style="zoom:60%;">
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x53C8;&#x53EB;&#x8C03;&#x505C;&#x6A21;&#x5F0F;&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x89D2;&#x8272;&#x6765;&#x5C01;&#x88C5;&#x4E00;&#x7CFB;&#x5217;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x4F7F;&#x539F;&#x6709;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x677E;&#x6563;&#xFF0C;&#x4E14;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x6539;&#x53D8;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x3002;</p>
<h3>6.7.2 &#x7ED3;&#x6784;</h3>
<p>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>
<p>&#x62BD;&#x8C61;&#x4E2D;&#x4ECB;&#x8005;&#xFF08;Mediator&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B83;&#x662F;&#x4E2D;&#x4ECB;&#x8005;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x6CE8;&#x518C;&#x4E0E;&#x8F6C;&#x53D1;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4FE1;&#x606F;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x4E2D;&#x4ECB;&#x8005;&#xFF08;ConcreteMediator&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x4E2D;&#x4ECB;&#x8005;&#x63A5;&#x53E3;&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A; List &#x6765;&#x7BA1;&#x7406;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#xFF0C;&#x534F;&#x8C03;&#x5404;&#x4E2A;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x5173;&#x7CFB;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4F9D;&#x8D56;&#x4E8E;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x3002;</p>
</li>
<li>
<p>&#x62BD;&#x8C61;&#x540C;&#x4E8B;&#x7C7B;&#xFF08;Colleague&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x540C;&#x4E8B;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4FDD;&#x5B58;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x63D0;&#x4F9B;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4EA4;&#x4E92;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x5B9E;&#x73B0;&#x6240;&#x6709;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#x7684;&#x540C;&#x4E8B;&#x7C7B;&#x7684;&#x516C;&#x5171;&#x529F;&#x80FD;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x540C;&#x4E8B;&#x7C7B;&#xFF08;Concrete Colleague&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x662F;&#x62BD;&#x8C61;&#x540C;&#x4E8B;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;&#x8005;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x4E0E;&#x5176;&#x4ED6;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x7531;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x8D1F;&#x8D23;&#x540E;&#x7EED;&#x7684;&#x4EA4;&#x4E92;&#x3002;</p>
</li>
</ul>
<h3>6.7.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x79DF;&#x623F;</p>
<p>&#x73B0;&#x5728;&#x79DF;&#x623F;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x623F;&#x5C4B;&#x4E2D;&#x4ECB;&#xFF0C;&#x623F;&#x4E3B;&#x5C06;&#x623F;&#x5C4B;&#x6258;&#x7BA1;&#x7ED9;&#x623F;&#x5C4B;&#x4E2D;&#x4ECB;&#xFF0C;&#x800C;&#x79DF;&#x623F;&#x8005;&#x4ECE;&#x623F;&#x5C4B;&#x4E2D;&#x4ECB;&#x83B7;&#x53D6;&#x623F;&#x5C4B;&#x4FE1;&#x606F;&#x3002;&#x623F;&#x5C4B;&#x4E2D;&#x4ECB;&#x5145;&#x5F53;&#x79DF;&#x623F;&#x8005;&#x4E0E;&#x623F;&#x5C4B;&#x6240;&#x6709;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x4E2D;&#x4ECB;&#x8005;&#x3002;</p>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;.png" style="zoom:70%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x62BD;&#x8C61;&#x4E2D;&#x4ECB;&#x8005;</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x7533;&#x660E;&#x4E00;&#x4E2A;&#x8054;&#x7EDC;&#x65B9;&#x6CD5;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x62BD;&#x8C61;&#x540C;&#x4E8B;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5177;&#x4F53;&#x540C;&#x4E8B;&#x7C7B; &#x623F;&#x5C4B;&#x62E5;&#x6709;&#x8005;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x4E0E;&#x4E2D;&#x4ECB;&#x8005;&#x8054;&#x7CFB;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x83B7;&#x53D6;&#x4FE1;&#x606F;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x623F;&#x4E3B;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x4FE1;&#x606F;&#xFF1A;&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x5177;&#x4F53;&#x540C;&#x4E8B;&#x7C7B; &#x627F;&#x79DF;&#x4EBA;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x4E0E;&#x4E2D;&#x4ECB;&#x8005;&#x8054;&#x7CFB;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x83B7;&#x53D6;&#x4FE1;&#x606F;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x79DF;&#x623F;&#x8005;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x4FE1;&#x606F;&#xFF1A;&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x4E2D;&#x4ECB;&#x673A;&#x6784;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//&#x9996;&#x5148;&#x4E2D;&#x4ECB;&#x7ED3;&#x6784;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x6240;&#x6709;&#x623F;&#x4E3B;&#x548C;&#x79DF;&#x623F;&#x8005;&#x7684;&#x4FE1;&#x606F;</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//&#x5982;&#x679C;&#x662F;&#x623F;&#x4E3B;&#xFF0C;&#x5219;&#x79DF;&#x623F;&#x8005;&#x83B7;&#x5F97;&#x4FE1;&#x606F;</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//&#x53CD;&#x6B63;&#x5219;&#x662F;&#x623F;&#x4E3B;&#x83B7;&#x5F97;&#x4FE1;&#x606F;</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x4E00;&#x4E2A;&#x623F;&#x4E3B;&#x3001;&#x4E00;&#x4E2A;&#x79DF;&#x623F;&#x8005;&#x3001;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x673A;&#x6784;</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x623F;&#x4E3B;&#x548C;&#x79DF;&#x623F;&#x8005;&#x53EA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x4E2D;&#x4ECB;&#x673A;&#x6784;&#x5373;&#x53EF;</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5F20;&#x4E09;&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">&quot;&#x674E;&#x56DB;&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x4E2D;&#x4ECB;&#x7ED3;&#x6784;&#x8981;&#x77E5;&#x9053;&#x623F;&#x4E3B;&#x548C;&#x79DF;&#x623F;&#x8005;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9700;&#x8981;&#x79DF;&#x4E09;&#x5BA4;&#x7684;&#x623F;&#x5B50;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6211;&#x8FD9;&#x6709;&#x4E09;&#x5BA4;&#x7684;&#x623F;&#x5B50;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x79DF;&#x5417;&#xFF1F;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3>6.7.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x677E;&#x6563;&#x8026;&#x5408;</p>
<p>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x901A;&#x8FC7;&#x628A;&#x591A;&#x4E2A;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x5C01;&#x88C5;&#x5230;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x677E;&#x6563;&#x8026;&#x5408;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x4E92;&#x8865;&#x4F9D;&#x8D56;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#xFF0C;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x5C31;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x53D8;&#x5316;&#x548C;&#x590D;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x518D;&#x50CF;&#x4EE5;&#x524D;&#x90A3;&#x6837;&#x201C;&#x7275;&#x4E00;&#x5904;&#x800C;&#x52A8;&#x5168;&#x8EAB;&#x201D;&#x4E86;&#x3002;</p>
</li>
<li>
<p>&#x96C6;&#x4E2D;&#x63A7;&#x5236;&#x4EA4;&#x4E92;</p>
<p>&#x591A;&#x4E2A;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x88AB;&#x5C01;&#x88C5;&#x5728;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#xFF0C;&#x4F7F;&#x5F97;&#x8FD9;&#x4E9B;&#x4EA4;&#x4E92;&#x884C;&#x4E3A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x662F;&#x5DF2;&#x7ECF;&#x505A;&#x597D;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6269;&#x5C55;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x5404;&#x4E2A;&#x540C;&#x4E8B;&#x7C7B;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x4FEE;&#x6539;&#x3002;</p>
</li>
<li>
<p>&#x4E00;&#x5BF9;&#x591A;&#x5173;&#x8054;&#x8F6C;&#x53D8;&#x4E3A;&#x4E00;&#x5BF9;&#x4E00;&#x7684;&#x5173;&#x8054;</p>
<p>&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x901A;&#x5E38;&#x662F;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#xFF0C;&#x5F15;&#x5165;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x4EE5;&#x540E;&#xFF0C;&#x4E2D;&#x4ECB;&#x8005;&#x5BF9;&#x8C61;&#x548C;&#x540C;&#x4E8B;&#x5BF9;&#x8C61;&#x7684;&#x5173;&#x7CFB;&#x901A;&#x5E38;&#x53D8;&#x6210;&#x53CC;&#x5411;&#x7684;&#x4E00;&#x5BF9;&#x4E00;&#xFF0C;&#x8FD9;&#x4F1A;&#x8BA9;&#x5BF9;&#x8C61;&#x7684;&#x5173;&#x7CFB;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x548C;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x5F53;&#x540C;&#x4E8B;&#x7C7B;&#x592A;&#x591A;&#x65F6;&#xFF0C;&#x4E2D;&#x4ECB;&#x8005;&#x7684;&#x804C;&#x8D23;&#x5C06;&#x5F88;&#x5927;&#xFF0C;&#x5B83;&#x4F1A;&#x53D8;&#x5F97;&#x590D;&#x6742;&#x800C;&#x5E9E;&#x5927;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x7CFB;&#x7EDF;&#x96BE;&#x4EE5;&#x7EF4;&#x62A4;&#x3002;</p>
<h3>6.7.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>&#x7CFB;&#x7EDF;&#x4E2D;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x590D;&#x6742;&#x7684;&#x5F15;&#x7528;&#x5173;&#x7CFB;&#xFF0C;&#x7CFB;&#x7EDF;&#x7ED3;&#x6784;&#x6DF7;&#x4E71;&#x4E14;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x3002;</li>
<li>&#x5F53;&#x60F3;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x4E8E;&#x591A;&#x4E2A;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x53C8;&#x4E0D;&#x60F3;&#x751F;&#x6210;&#x65B0;&#x7684;&#x5B50;&#x7C7B;&#x65F6;&#x3002;</li>
</ul>
<h2>6.8 &#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;</h2>
<h3>6.8.1 &#x6982;&#x8FF0;</h3>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6765;&#x987A;&#x5E8F;&#x8BBF;&#x95EE;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x66B4;&#x9732;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x8868;&#x793A;&#x3002;</p>
<h3>6.8.2 &#x7ED3;&#x6784;</h3>
<p>&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul>
<li>
<p>&#x62BD;&#x8C61;&#x805A;&#x5408;&#xFF08;Aggregate&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x5B58;&#x50A8;&#x3001;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x805A;&#x5408;&#x5143;&#x7D20;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x805A;&#x5408;&#xFF08;ConcreteAggregate&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x805A;&#x5408;&#x7C7B;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
</li>
<li>
<p>&#x62BD;&#x8C61;&#x8FED;&#x4EE3;&#x5668;&#xFF08;Iterator&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x8BBF;&#x95EE;&#x548C;&#x904D;&#x5386;&#x805A;&#x5408;&#x5143;&#x7D20;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x901A;&#x5E38;&#x5305;&#x542B; hasNext()&#x3001;next() &#x7B49;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li>
<p>&#x5177;&#x4F53;&#x8FED;&#x4EE3;&#x5668;&#xFF08;Concretelterator&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x8FED;&#x4EE3;&#x5668;&#x63A5;&#x53E3;&#x4E2D;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5B8C;&#x6210;&#x5BF9;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x8BB0;&#x5F55;&#x904D;&#x5386;&#x7684;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x3002;</p>
</li>
</ul>
<h3>6.8.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x5B66;&#x751F;&#x5BF9;&#x8C61;&#x7684;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x904D;&#x5386;&#x8BE5;&#x5BB9;&#x5668;&#x7684;&#x529F;&#x80FD;&#x4EA4;&#x7531;&#x8FED;&#x4EE3;&#x5668;&#x5B9E;&#x73B0;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x7C7B;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;.png" style="zoom:90%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5B9A;&#x4E49;&#x8FED;&#x4EE3;&#x5668;&#x63A5;&#x53E3;&#xFF0C;&#x58F0;&#x660E;hasNext&#x3001;next&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x7C7B;&#xFF0C;&#x91CD;&#x5199;&#x6240;&#x6709;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x5BB9;&#x5668;&#x7C7B;&#xFF0C;&#x5305;&#x542B;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C;&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x83B7;&#x53D6;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x7684;&#x5BB9;&#x5668;&#x7C7B;&#xFF0C;&#x91CD;&#x5199;&#x6240;&#x6709;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &#x5B66;&#x751F;&#x5217;&#x8868;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3>6.8.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x5B83;&#x652F;&#x6301;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x904D;&#x5386;&#x4E00;&#x4E2A;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x4E0A;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x79CD;&#x904D;&#x5386;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x4E2D;&#x53EA;&#x9700;&#x8981;&#x7528;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x6765;&#x66FF;&#x6362;&#x539F;&#x6709;&#x8FED;&#x4EE3;&#x5668;&#x5373;&#x53EF;&#x6539;&#x53D8;&#x904D;&#x5386;&#x7B97;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x5B50;&#x7C7B;&#x4EE5;&#x652F;&#x6301;&#x65B0;&#x7684;&#x904D;&#x5386;&#x65B9;&#x5F0F;&#x3002;</li>
<li>&#x8FED;&#x4EE3;&#x5668;&#x7B80;&#x5316;&#x4E86;&#x805A;&#x5408;&#x7C7B;&#x3002;&#x7531;&#x4E8E;&#x5F15;&#x5165;&#x4E86;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x5728;&#x539F;&#x6709;&#x7684;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x4E2D;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x81EA;&#x884C;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x904D;&#x5386;&#x7B49;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x805A;&#x5408;&#x7C7B;&#x7684;&#x8BBE;&#x8BA1;&#x3002;</li>
<li>&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x5F15;&#x5165;&#x4E86;&#x62BD;&#x8C61;&#x5C42;&#xFF0C;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x805A;&#x5408;&#x7C7B;&#x548C;&#x8FED;&#x4EE3;&#x5668;&#x7C7B;&#x90FD;&#x5F88;&#x65B9;&#x4FBF;&#xFF0C;&#x65E0;&#x987B;&#x4FEE;&#x6539;&#x539F;&#x6709;&#x4EE3;&#x7801;&#xFF0C;&#x6EE1;&#x8DB3; &#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D; &#x7684;&#x8981;&#x6C42;&#x3002;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<p>&#x589E;&#x52A0;&#x4E86;&#x7C7B;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x8FD9;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;</p>
<h3>6.8.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>&#x5F53;&#x9700;&#x8981;&#x4E3A;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x591A;&#x79CD;&#x904D;&#x5386;&#x65B9;&#x5F0F;&#x65F6;&#x3002;</li>
<li>&#x5F53;&#x9700;&#x8981;&#x4E3A;&#x904D;&#x5386;&#x4E0D;&#x540C;&#x7684;&#x805A;&#x5408;&#x7ED3;&#x6784;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#x65F6;&#x3002;</li>
<li>&#x5F53;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5BB9;&#x800C;&#x65E0;&#x987B;&#x66B4;&#x9732;&#x5176;&#x5185;&#x90E8;&#x7EC6;&#x8282;&#x7684;&#x8868;&#x793A;&#x65F6;&#x3002;</li>
</ul>
<h3>6.8.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</h3>
<p>&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x5728;JAVA&#x7684;&#x5F88;&#x591A;&#x96C6;&#x5408;&#x7C7B;&#x4E2D;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x770B;JAVA&#x6E90;&#x7801;&#x4E2D;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x7684;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x80AF;&#x5B9A;&#x662F;Iterator&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x770B;&#x5B8C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x4E0E;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#x3002;&#x5355;&#x5217;&#x96C6;&#x5408;&#x90FD;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x4EE5;ArrayList&#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#x660E;</p>
<ul>
<li>List&#xFF1A;&#x62BD;&#x8C61;&#x805A;&#x5408;&#x7C7B;</li>
<li>ArrayList&#xFF1A;&#x5177;&#x4F53;&#x7684;&#x805A;&#x5408;&#x7C7B;</li>
<li>Iterator&#xFF1A;&#x62BD;&#x8C61;&#x8FED;&#x4EE3;&#x5668;</li>
<li>list.iterator()&#xFF1A;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x5B9E;&#x73B0;&#x4E86; <code>Iterator</code> &#x63A5;&#x53E3;&#x7684;&#x5177;&#x4F53;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;</li>
</ul>
<p>&#x5177;&#x4F53;&#x7684;&#x6765;&#x770B;&#x770B; ArrayList&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// &#x4E0B;&#x4E00;&#x4E2A;&#x8981;&#x8FD4;&#x56DE;&#x5143;&#x7D20;&#x7684;&#x7D22;&#x5F15;</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// &#x4E0A;&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x5143;&#x7D20;&#x7684;&#x7D22;&#x5F15;</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
		
        <span class="token comment">//&#x5224;&#x65AD;&#x662F;&#x5426;&#x8FD8;&#x6709;&#x5143;&#x7D20;</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//&#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD9;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5927;&#x81F4;&#x5C31;&#x662F;&#x5728; <code>iterator</code> &#x65B9;&#x6CD5;&#x4E2D;&#x8FD4;&#x56DE;&#x4E86;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5316;&#x7684; <code>Iterator</code> &#x5BF9;&#x8C61;&#x3002;Itr&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5B83;&#x5B9E;&#x73B0;&#x4E86; <code>Iterator</code> &#x63A5;&#x53E3;&#x5E76;&#x91CD;&#x5199;&#x4E86;&#x5176;&#x4E2D;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>&#x200B;	&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;JAVA&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x60F3;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x7684;&#x8BDD;&#xFF0C;&#x53EA;&#x8981;&#x8BA9;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x5BB9;&#x5668;&#x7C7B;&#x5B9E;&#x73B0;<code>java.util.Iterable</code>&#x5E76;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;iterator()&#x65B9;&#x6CD5;&#x4F7F;&#x5176;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; <code>java.util.Iterator</code> &#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
</blockquote>
<h2>6.9 &#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;</h2>
<h3>6.9.1 &#x6982;&#x8FF0;</h3>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x5C01;&#x88C5;&#x4E00;&#x4E9B;&#x4F5C;&#x7528;&#x4E8E;&#x67D0;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5404;&#x5143;&#x7D20;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x5B9A;&#x4E49;&#x4F5C;&#x7528;&#x4E8E;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x7684;&#x65B0;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h3>6.9.2 &#x7ED3;&#x6784;</h3>
<p>&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x89D2;&#x8272;:</p>
<ul>
<li>&#x62BD;&#x8C61;&#x8BBF;&#x95EE;&#x8005;&#xFF08;Visitor&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;<code>&#xFF08;Element&#xFF09;</code>&#x8BBF;&#x95EE;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5B83;&#x7684;&#x65B9;&#x6CD5;&#x4E2A;&#x6570;&#x7406;&#x8BBA;&#x4E0A;&#x6765;&#x8BB2;&#x4E0E;&#x5143;&#x7D20;&#x7C7B;&#x4E2A;&#x6570;&#xFF08;Element&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2A;&#x6570;&#xFF09;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x4ECE;&#x8FD9;&#x70B9;&#x4E0D;&#x96BE;&#x770B;&#x51FA;&#xFF0C;&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x8981;&#x6C42;&#x5143;&#x7D20;&#x7C7B;&#x7684;&#x4E2A;&#x6570;&#x4E0D;&#x80FD;&#x6539;&#x53D8;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x8BBF;&#x95EE;&#x8005;&#xFF08;ConcreteVisitor&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x7ED9;&#x51FA;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7C7B;&#x8BBF;&#x95EE;&#x65F6;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x5177;&#x4F53;&#x884C;&#x4E3A;&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x5143;&#x7D20;&#xFF08;Element&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x63A5;&#x53D7;&#x8BBF;&#x95EE;&#x8005;&#x7684;&#x65B9;&#x6CD5;&#xFF08;<code>accept</code>&#xFF09;&#xFF0C;&#x5176;&#x610F;&#x4E49;&#x662F;&#x6307;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x8981;&#x53EF;&#x4EE5;&#x88AB;&#x8BBF;&#x95EE;&#x8005;&#x8BBF;&#x95EE;&#x3002;</li>
<li>&#x5177;&#x4F53;&#x5143;&#x7D20;&#xFF08;ConcreteElement&#xFF09;&#x89D2;&#x8272;&#xFF1A; &#x63D0;&#x4F9B;&#x63A5;&#x53D7;&#x8BBF;&#x95EE;&#x65B9;&#x6CD5;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x4F7F;&#x7528;&#x8BBF;&#x95EE;&#x8005;&#x63D0;&#x4F9B;&#x7684;&#x8BBF;&#x95EE;&#x8BE5;&#x5143;&#x7D20;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#xFF08;Object Structure&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x5F53;&#x4E2D;&#x6240;&#x63D0;&#x5230;&#x7684;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#xFF0C;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x8868;&#x8FF0;&#xFF0C;&#x5177;&#x4F53;&#x70B9;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x5BB9;&#x5668;&#x6027;&#x8D28;&#x6216;&#x8005;&#x590D;&#x5408;&#x5BF9;&#x8C61;&#x7279;&#x6027;&#x7684;&#x7C7B;&#xFF0C;&#x5B83;&#x4F1A;&#x542B;&#x6709;&#x4E00;&#x7EC4;&#x5143;&#x7D20;&#xFF08;<code>Element</code>&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x8FED;&#x4EE3;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#xFF0C;&#x4F9B;&#x8BBF;&#x95EE;&#x8005;&#x8BBF;&#x95EE;&#x3002;</li>
</ul>
<h3>6.9.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x7ED9;&#x5BA0;&#x7269;&#x5582;&#x98DF;</p>
<p>&#x73B0;&#x5728;&#x517B;&#x5BA0;&#x7269;&#x7684;&#x4EBA;&#x7279;&#x522B;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4EE5;&#x8FD9;&#x4E2A;&#x4E3A;&#x4F8B;&#xFF0C;&#x5F53;&#x7136;&#x5BA0;&#x7269;&#x8FD8;&#x5206;&#x4E3A;&#x72D7;&#xFF0C;&#x732B;&#x7B49;&#xFF0C;&#x8981;&#x7ED9;&#x5BA0;&#x7269;&#x5582;&#x98DF;&#x7684;&#x8BDD;&#xFF0C;&#x4E3B;&#x4EBA;&#x53EF;&#x4EE5;&#x5582;&#xFF0C;&#x5176;&#x4ED6;&#x4EBA;&#x4E5F;&#x53EF;&#x4EE5;&#x5582;&#x98DF;&#x3002;</p>
<ul>
<li>&#x8BBF;&#x95EE;&#x8005;&#x89D2;&#x8272;&#xFF1A;&#x7ED9;&#x5BA0;&#x7269;&#x5582;&#x98DF;&#x7684;&#x4EBA;</li>
<li>&#x5177;&#x4F53;&#x8BBF;&#x95EE;&#x8005;&#x89D2;&#x8272;&#xFF1A;&#x4E3B;&#x4EBA;&#x3001;&#x5176;&#x4ED6;&#x4EBA;</li>
<li>&#x62BD;&#x8C61;&#x5143;&#x7D20;&#x89D2;&#x8272;&#xFF1A;&#x52A8;&#x7269;&#x62BD;&#x8C61;&#x7C7B;</li>
<li>&#x5177;&#x4F53;&#x5143;&#x7D20;&#x89D2;&#x8272;&#xFF1A;&#x5BA0;&#x7269;&#x72D7;&#x3001;&#x5BA0;&#x7269;&#x732B;</li>
<li>&#x7ED3;&#x6784;&#x5BF9;&#x8C61;&#x89D2;&#x8272;&#xFF1A;&#x4E3B;&#x4EBA;&#x5BB6;</li>
</ul>
<p>&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="D:%5Csjtu%5CAIR%5CSYY%5CJOB%5CNote%5Cdoc%5CDesignPatterns%5Cimg%5C%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F.png" alt></p>
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x521B;&#x5EFA;&#x62BD;&#x8C61;&#x8BBF;&#x95EE;&#x8005;&#x63A5;&#x53E3;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x5177;&#x4F53;&#x8BBF;&#x95EE;&#x8005;&#x89D2;&#x8272;&#xFF08;&#x4E3B;&#x4EBA;&#x548C;&#x5176;&#x4ED6;&#x4EBA;&#xFF09;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x5B9E;&#x73B0; <code>Person</code>&#x63A5;&#x53E3;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E3B;&#x4EBA;&#x5582;&#x98DF;&#x732B;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E3B;&#x4EBA;&#x5582;&#x98DF;&#x72D7;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5176;&#x4ED6;&#x4EBA;&#x5582;&#x98DF;&#x732B;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5176;&#x4ED6;&#x4EBA;&#x5582;&#x98DF;&#x72D7;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x8282;&#x70B9; -- &#x5BA0;&#x7269;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5B9E;&#x73B0;<code>Animal</code>&#x63A5;&#x53E3;&#x7684; &#x5177;&#x4F53;&#x8282;&#x70B9;&#xFF08;&#x5143;&#x7D20;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x597D;&#x597D;&#x5403;&#xFF0C;&#x6C6A;&#x6C6A;&#x6C6A;&#xFF01;&#xFF01;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x597D;&#x597D;&#x5403;&#xFF0C;&#x55B5;&#x55B5;&#x55B5;&#xFF01;&#xFF01;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#xFF0C;&#x6B64;&#x6848;&#x4F8B;&#x4E2D;&#x5C31;&#x662F;&#x4E3B;&#x4EBA;&#x7684;&#x5BB6;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>&#x6D4B;&#x8BD5;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3>6.9.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x6269;&#x5C55;&#x6027;&#x597D;</p>
<p>&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E3A;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
</li>
<li>
<p>&#x590D;&#x7528;&#x6027;&#x597D;</p>
<p>&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x8005;&#x6765;&#x5B9A;&#x4E49;&#x6574;&#x4E2A;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x901A;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x590D;&#x7528;&#x7A0B;&#x5EA6;&#x3002;</p>
</li>
<li>
<p>&#x5206;&#x79BB;&#x65E0;&#x5173;&#x884C;&#x4E3A;</p>
<p>&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x8005;&#x6765;&#x5206;&#x79BB;&#x65E0;&#x5173;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x628A;&#x76F8;&#x5173;&#x7684;&#x884C;&#x4E3A;&#x5C01;&#x88C5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x8005;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x8005;&#x7684;&#x529F;&#x80FD;&#x90FD;&#x6BD4;&#x8F83;&#x5355;&#x4E00;&#x3002;</p>
</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>
<p>&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x53D8;&#x5316;&#x5F88;&#x56F0;&#x96BE;</p>
<p>&#x5728;&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x6BCF;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5143;&#x7D20;&#x7C7B;&#xFF0C;&#x90FD;&#x8981;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x8BBF;&#x95EE;&#x8005;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x76F8;&#x5E94;&#x7684;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x8FDD;&#x80CC;&#x4E86;&#x201C;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x201D;&#x3002;</p>
</li>
<li>
<p>&#x8FDD;&#x53CD;&#x4E86;&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;</p>
<p>&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x4F9D;&#x8D56;&#x4E86;&#x5177;&#x4F53;&#x7C7B;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</p>
</li>
</ul>
<h3>6.9.5  &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>
<p>&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x76F8;&#x5BF9;&#x7A33;&#x5B9A;&#xFF0C;&#x4F46;&#x5176;&#x64CD;&#x4F5C;&#x7B97;&#x6CD5;&#x7ECF;&#x5E38;&#x53D8;&#x5316;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p>
</li>
<li>
<p>&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x4E14;&#x4E0D;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x8981;&#x907F;&#x514D;&#x8BA9;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;&#x53D8;&#x5316;&#x5F71;&#x54CD;&#x5BF9;&#x8C61;&#x7684;&#x7ED3;&#x6784;&#x3002;</p>
</li>
</ul>
<h3>6.9.6 &#x6269;&#x5C55;</h3>
<p>&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x79CD;&#x53CC;&#x5206;&#x6D3E;&#x7684;&#x6280;&#x672F;&#x3002;</p>
<p><strong>1&#xFF0C;&#x5206;&#x6D3E;&#xFF1A;</strong></p>
<p>&#x53D8;&#x91CF;&#x88AB;&#x58F0;&#x660E;&#x65F6;&#x7684;&#x7C7B;&#x578B;&#x53EB;&#x505A;&#x53D8;&#x91CF;&#x7684;&#x9759;&#x6001;&#x7C7B;&#x578B;&#xFF0C;&#x6709;&#x4E9B;&#x4EBA;&#x53C8;&#x628A;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x53EB;&#x505A;&#x660E;&#x663E;&#x7C7B;&#x578B;&#xFF1B;&#x800C;&#x53D8;&#x91CF;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x771F;&#x5B9E;&#x7C7B;&#x578B;&#x53C8;&#x53EB;&#x505A;&#x53D8;&#x91CF;&#x7684;&#x5B9E;&#x9645;&#x7C7B;&#x578B;&#x3002;&#x6BD4;&#x5982; <code>Map map = new HashMap()</code> &#xFF0C;map&#x53D8;&#x91CF;&#x7684;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x662F; <code>Map</code> &#xFF0C;&#x5B9E;&#x9645;&#x7C7B;&#x578B;&#x662F; <code>HashMap</code> &#x3002;&#x6839;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x578B;&#x800C;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x5C31;&#x662F;&#x5206;&#x6D3E;(Dispatch)&#xFF0C;&#x5206;&#x6D3E;(Dispatch)&#x53C8;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF0C;&#x5373;&#x9759;&#x6001;&#x5206;&#x6D3E;&#x548C;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#x3002;</p>
<p><strong>&#x9759;&#x6001;&#x5206;&#x6D3E;(Static Dispatch)</strong> &#x53D1;&#x751F;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x671F;&#xFF0C;&#x5206;&#x6D3E;&#x6839;&#x636E;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x4FE1;&#x606F;&#x53D1;&#x751F;&#x3002;&#x9759;&#x6001;&#x5206;&#x6D3E;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x5E76;&#x4E0D;&#x964C;&#x751F;&#xFF0C;&#x65B9;&#x6CD5;&#x91CD;&#x8F7D;&#x5C31;&#x662F;&#x9759;&#x6001;&#x5206;&#x6D3E;&#x3002;</p>
<p><strong>&#x52A8;&#x6001;&#x5206;&#x6D3E;(Dynamic Dispatch)</strong> &#x53D1;&#x751F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x671F;&#xFF0C;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#x52A8;&#x6001;&#x5730;&#x7F6E;&#x6362;&#x6389;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;Java&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x7684;&#x91CD;&#x5199;&#x652F;&#x6301;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#x3002;</p>
<p><strong>2&#xFF0C;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#xFF1A;</strong></p>
<p>&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x7684;&#x91CD;&#x5199;&#x652F;&#x6301;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x7684;&#x7ED3;&#x679C;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x76F4;&#x63A5;&#x53EF;&#x4EE5;&#x8BF4;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x4E0D;&#x5C31;&#x662F;&#x591A;&#x6001;&#x5417;&#xFF01;&#x8FD0;&#x884C;&#x6267;&#x884C;&#x7684;&#x662F;&#x5B50;&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>Java&#x7F16;&#x8BD1;&#x5668;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x671F;&#x5E76;&#x4E0D;&#x603B;&#x662F;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#x4EE3;&#x7801;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x7F16;&#x8BD1;&#x5668;&#x4EC5;&#x4EC5;&#x77E5;&#x9053;&#x5BF9;&#x8C61;&#x7684;&#x9759;&#x6001;&#x7C7B;&#x578B;&#xFF0C;&#x800C;&#x4E0D;&#x77E5;&#x9053;&#x5BF9;&#x8C61;&#x7684;&#x771F;&#x5B9E;&#x7C7B;&#x578B;&#xFF1B;&#x800C;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x5219;&#x662F;&#x6839;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x771F;&#x5B9E;&#x7C7B;&#x578B;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x3002;</p>
<p><strong>3&#xFF0C;&#x9759;&#x6001;&#x5206;&#x6D3E;&#xFF1A;</strong></p>
<p>&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x91CD;&#x8F7D;&#x652F;&#x6301;&#x9759;&#x6001;&#x5206;&#x6D3E;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200214215446638.png" style="zoom:70%;">
<p>&#x8FD9;&#x4E2A;&#x7ED3;&#x679C;&#x53EF;&#x80FD;&#x51FA;&#x4E4E;&#x4E00;&#x4E9B;&#x4EBA;&#x7684;&#x610F;&#x6599;&#x4E86;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<p><strong>&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#x7684;&#x5206;&#x6D3E;&#x662F;&#x6839;&#x636E;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x5206;&#x6D3E;&#x8FC7;&#x7A0B;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x671F;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;</strong></p>
<p><strong>4&#xFF0C;&#x53CC;&#x5206;&#x6D3E;&#xFF1A;</strong></p>
<p>&#x6240;&#x8C13;&#x53CC;&#x5206;&#x6D3E;&#x6280;&#x672F;&#x5C31;&#x662F;&#x5728;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x8981;&#x6839;&#x636E;&#x6D88;&#x606F;&#x63A5;&#x6536;&#x8005;&#xFF08;receiver&#xFF09;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x533A;&#x522B;&#xFF0C;&#x8FD8;&#x8981;&#x6839;&#x636E;&#x53C2;&#x6570;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x533A;&#x522B;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5728;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;Execute&#x5BF9;&#x8C61;&#x505A;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;Animal&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5B8C;&#x6210;&#x7B2C;&#x4E00;&#x6B21;&#x5206;&#x6D3E;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x65B9;&#x6CD5;&#x91CD;&#x5199;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x52A8;&#x6001;&#x5206;&#x6D3E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6267;&#x884C;&#x5B9E;&#x9645;&#x7C7B;&#x578B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;<code>&#x5C06;&#x81EA;&#x5DF1;this&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x8FDB;&#x53BB;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x7B2C;&#x4E8C;&#x6B21;&#x5206;&#x6D3E;</code>&#xFF0C;&#x8FD9;&#x91CC;&#x7684;Execute&#x7C7B;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x91CD;&#x8F7D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x4F20;&#x9012;&#x8FDB;&#x884C;&#x7684;&#x662F;this&#xFF0C;&#x5C31;&#x662F;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x9645;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x660E;&#x767D;&#x53CC;&#x5206;&#x6D3E;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x6709;&#x4EC0;&#x4E48;&#x6548;&#x679C;&#x5462;&#xFF1F;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x52A8;&#x6001;&#x7ED1;&#x5B9A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\image-20200426233931693.png" style="zoom:67%;">
<p><strong>&#x53CC;&#x5206;&#x6D3E;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x7ED1;&#x5B9A;&#x7684;&#x672C;&#x8D28;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#x59D4;&#x6D3E;&#x7684;&#x524D;&#x9762;&#x52A0;&#x4E0A;&#x4E86;&#x7EE7;&#x627F;&#x4F53;&#x7CFB;&#x4E2D;&#x8986;&#x76D6;&#x7684;&#x73AF;&#x8282;&#xFF0C;&#x7531;&#x4E8E;&#x8986;&#x76D6;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x91CD;&#x8F7D;&#x5C31;&#x662F;&#x52A8;&#x6001;&#x7684;&#x4E86;&#x3002;</strong></p>
<h2>6.10 &#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</h2>
<h3>6.10.1 &#x6982;&#x8FF0;</h3>
<p>&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x72B6;&#x6001;&#x6062;&#x590D;&#x7684;&#x5B9E;&#x73B0;&#x673A;&#x5236;&#xFF0C;&#x4F7F;&#x5F97;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x56DE;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x5386;&#x53F2;&#x6B65;&#x9AA4;&#xFF0C;&#x5F53;&#x65B0;&#x7684;&#x72B6;&#x6001;&#x65E0;&#x6548;&#x6216;&#x8005;&#x5B58;&#x5728;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6682;&#x65F6;&#x5B58;&#x50A8;&#x8D77;&#x6765;&#x7684;&#x5907;&#x5FD8;&#x5F55;&#x5C06;&#x72B6;&#x6001;&#x590D;&#x539F;&#xFF0C;&#x5F88;&#x591A;&#x8F6F;&#x4EF6;&#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x64A4;&#x9500;&#xFF08;Undo&#xFF09;&#x64CD;&#x4F5C;&#xFF0C;&#x5982; Word&#x3001;&#x8BB0;&#x4E8B;&#x672C;&#x3001;Photoshop&#x3001;IDEA&#x7B49;&#x8F6F;&#x4EF6;&#x5728;&#x7F16;&#x8F91;&#x65F6;&#x6309; Ctrl+Z &#x7EC4;&#x5408;&#x952E;&#x65F6;&#x80FD;&#x64A4;&#x9500;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x6587;&#x6863;&#x6062;&#x590D;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#xFF1B;&#x8FD8;&#x6709;&#x5728; &#x6D4F;&#x89C8;&#x5668; &#x4E2D;&#x7684;&#x540E;&#x9000;&#x952E;&#x3001;&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x4E2D;&#x7684;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;&#x3001;&#x73A9;&#x6E38;&#x620F;&#x65F6;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x5B58;&#x6863;&#x529F;&#x80FD;&#x3001;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x5907;&#x4EFD;&#x64CD;&#x4F5C;&#x3001;&#x68CB;&#x7C7B;&#x6E38;&#x620F;&#x4E2D;&#x7684;&#x6094;&#x68CB;&#x529F;&#x80FD;&#x7B49;&#x90FD;&#x5C5E;&#x4E8E;&#x8FD9;&#x7C7B;&#x3002;</p>
<p><strong>&#x5B9A;&#x4E49;&#xFF1A;</strong></p>
<p>&#x53C8;&#x53EB;&#x5FEB;&#x7167;&#x6A21;&#x5F0F;&#xFF0C;&#x5728;&#x4E0D;&#x7834;&#x574F;&#x5C01;&#x88C5;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6355;&#x83B7;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x4E4B;&#x5916;&#x4FDD;&#x5B58;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x4EE5;&#x4FBF;&#x4EE5;&#x540E;&#x5F53;&#x9700;&#x8981;&#x65F6;&#x80FD;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x6062;&#x590D;&#x5230;&#x539F;&#x5148;&#x4FDD;&#x5B58;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<h3>6.10.2 &#x7ED3;&#x6784;</h3>
<p>&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#x7684;&#x4E3B;&#x8981;&#x89D2;&#x8272;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x53D1;&#x8D77;&#x4EBA;&#xFF08;Originator&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x65F6;&#x523B;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x63D0;&#x4F9B;&#x521B;&#x5EFA;&#x5907;&#x5FD8;&#x5F55;&#x548C;&#x6062;&#x590D;&#x5907;&#x5FD8;&#x5F55;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5B9E;&#x73B0;&#x5176;&#x4ED6;&#x4E1A;&#x52A1;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5907;&#x5FD8;&#x5F55;&#x91CC;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x3002;</li>
<li>&#x5907;&#x5FD8;&#x5F55;&#xFF08;Memento&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x8D1F;&#x8D23;&#x5B58;&#x50A8;&#x53D1;&#x8D77;&#x4EBA;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x5728;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x4F9B;&#x8FD9;&#x4E9B;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x7ED9;&#x53D1;&#x8D77;&#x4EBA;&#x3002;</li>
<li>&#x7BA1;&#x7406;&#x8005;&#xFF08;Caretaker&#xFF09;&#x89D2;&#x8272;&#xFF1A;&#x5BF9;&#x5907;&#x5FD8;&#x5F55;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF0C;&#x63D0;&#x4F9B;&#x4FDD;&#x5B58;&#x4E0E;&#x83B7;&#x53D6;&#x5907;&#x5FD8;&#x5F55;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x5176;&#x4E0D;&#x80FD;&#x5BF9;&#x5907;&#x5FD8;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x4E0E;&#x4FEE;&#x6539;&#x3002;</li>
</ul>
<blockquote>
<p>&#x5907;&#x5FD8;&#x5F55;&#x6709;&#x4E24;&#x4E2A;&#x7B49;&#x6548;&#x7684;&#x63A5;&#x53E3;&#xFF1A;</p>
<ul>
<li><strong>&#x7A84;&#x63A5;&#x53E3;</strong>&#xFF1A;&#x7BA1;&#x7406;&#x8005;(Caretaker)&#x5BF9;&#x8C61;&#xFF08;&#x548C;&#x5176;&#x4ED6;&#x53D1;&#x8D77;&#x4EBA;&#x5BF9;&#x8C61;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#xFF09;&#x770B;&#x5230;&#x7684;&#x662F;&#x5907;&#x5FD8;&#x5F55;&#x7684;&#x7A84;&#x63A5;&#x53E3;(narror Interface)&#xFF0C;&#x8FD9;&#x4E2A;&#x7A84;&#x63A5;&#x53E3;&#x53EA;&#x5141;&#x8BB8;&#x4ED6;&#x628A;&#x5907;&#x5FD8;&#x5F55;&#x5BF9;&#x8C61;&#x4F20;&#x7ED9;&#x5176;&#x4ED6;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li><strong>&#x5BBD;&#x63A5;&#x53E3;</strong>&#xFF1A;&#x4E0E;&#x7BA1;&#x7406;&#x8005;&#x770B;&#x5230;&#x7684;&#x7A84;&#x63A5;&#x53E3;&#x76F8;&#x53CD;&#xFF0C;&#x53D1;&#x8D77;&#x4EBA;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x5BBD;&#x63A5;&#x53E3;(wide Interface)&#xFF0C;&#x8FD9;&#x4E2A;&#x5BBD;&#x63A5;&#x53E3;&#x5141;&#x8BB8;&#x5B83;&#x8BFB;&#x53D6;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x4FBF;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x6062;&#x590D;&#x8FD9;&#x4E2A;&#x53D1;&#x8D77;&#x4EBA;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x3002;</li>
</ul>
</blockquote>
<h3>6.10.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</h3>
<p>&#x3010;&#x4F8B;&#x3011;&#x6E38;&#x620F;&#x6311;&#x6218;BOSS</p>
<p>&#x6E38;&#x620F;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x4E00;&#x6E38;&#x620F;&#x89D2;&#x8272;&#x6709;&#x751F;&#x547D;&#x529B;&#x3001;&#x653B;&#x51FB;&#x529B;&#x3001;&#x9632;&#x5FA1;&#x529B;&#x7B49;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x6253;Boss&#x524D;&#x548C;&#x540E;&#x4E00;&#x5B9A;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5141;&#x8BB8;&#x73A9;&#x5BB6;&#x5982;&#x679C;&#x611F;&#x89C9;&#x4E0E;Boss&#x51B3;&#x6597;&#x7684;&#x6548;&#x679C;&#x4E0D;&#x7406;&#x60F3;&#x53EF;&#x4EE5;&#x8BA9;&#x6E38;&#x620F;&#x6062;&#x590D;&#x5230;&#x51B3;&#x6597;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<p>&#x8981;&#x5B9E;&#x73B0;&#x4E0A;&#x8FF0;&#x6848;&#x4F8B;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x201C;&#x767D;&#x7BB1;&#x201D;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</li>
<li>&#x201C;&#x9ED1;&#x7BB1;&#x201D;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</li>
</ul>
<h4>6.10.3.1 &#x201C;&#x767D;&#x7BB1;&#x201D;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</h4>
<p>&#x5907;&#x5FD8;&#x5F55;&#x89D2;&#x8272;&#x5BF9;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#x90FD;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5373;&#x5BBD;&#x63A5;&#x53E3;&#xFF0C;&#x5907;&#x5FD8;&#x5F55;&#x89D2;&#x8272;&#x7684;&#x5185;&#x90E8;&#x6240;&#x5B58;&#x50A8;&#x7684;&#x72B6;&#x6001;&#x5C31;&#x5BF9;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x516C;&#x5F00;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x767D;&#x7BB1;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;.png" style="zoom:80%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x6E38;&#x620F;&#x89D2;&#x8272;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//&#x751F;&#x547D;&#x529B;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//&#x653B;&#x51FB;&#x529B;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//&#x9632;&#x5FA1;&#x529B;</span>

    <span class="token comment">//&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6218;&#x6597;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x4FDD;&#x5B58;&#x89D2;&#x8272;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x56DE;&#x590D;&#x89D2;&#x8272;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x751F;&#x547D;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x653B;&#x51FB;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x9632;&#x5FA1;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6E38;&#x620F;&#x72B6;&#x6001;&#x5B58;&#x50A8;&#x7C7B;(&#x5907;&#x5FD8;&#x5F55;&#x7C7B;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x89D2;&#x8272;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x8005;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//&#x6D4B;&#x8BD5;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x5927;&#x6218;Boss&#x524D;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5927;&#x6218;Boss&#x524D;</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x4FDD;&#x5B58;&#x8FDB;&#x5EA6;</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x5927;&#x6218;Boss&#x540E;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5927;&#x6218;Boss&#x65F6;&#xFF0C;&#x635F;&#x8017;&#x4E25;&#x91CD;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x6062;&#x590D;&#x4E4B;&#x524D;&#x72B6;&#x6001;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x6062;&#x590D;&#x4E4B;&#x524D;&#x72B6;&#x6001;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x5206;&#x6790;&#xFF1A;&#x767D;&#x7BB1;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#x662F;&#x7834;&#x574F;&#x5C01;&#x88C5;&#x6027;&#x7684;&#x3002;&#x4F46;&#x662F;&#x901A;&#x8FC7;&#x7A0B;&#x5E8F;&#x5458;&#x81EA;&#x5F8B;&#xFF0C;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#x7684;&#x5927;&#x90E8;&#x5206;&#x7528;&#x610F;&#x3002;</p>
</blockquote>
<h4>6.10.3.2 &#x201C;&#x9ED1;&#x7BB1;&#x201D;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</h4>
<p>&#x5907;&#x5FD8;&#x5F55;&#x89D2;&#x8272;&#x5BF9;&#x53D1;&#x8D77;&#x4EBA;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5BBD;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x4E3A;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7A84;&#x63A5;&#x53E3;&#x3002;&#x5728;Java&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x5B9E;&#x73B0;&#x53CC;&#x91CD;&#x63A5;&#x53E3;&#x7684;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x5C06;<strong>&#x5907;&#x5FD8;&#x5F55;&#x7C7B;</strong>&#x8BBE;&#x8BA1;&#x6210;<strong>&#x53D1;&#x8D77;&#x4EBA;&#x7C7B;</strong>&#x7684;&#x5185;&#x90E8;&#x6210;&#x5458;&#x7C7B;&#x3002;</p>
<p>&#x5C06; <code>RoleStateMemento</code> &#x8BBE;&#x4E3A; <code>GameRole</code> &#x7684;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x4ECE;&#x800C;&#x5C06; <code>RoleStateMemento</code> &#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x5728; <code>GameRole</code> &#x91CC;&#x9762;&#xFF1B;&#x5728;&#x5916;&#x9762;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x6807;&#x8BC6;&#x63A5;&#x53E3; <code>Memento</code> &#x7ED9; <code>RoleStateCaretaker</code> &#x53CA;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x6837; <code>GameRole</code> &#x7C7B;&#x770B;&#x5230;&#x7684;&#x662F; <code>RoleStateMemento</code> &#x6240;&#x6709;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x800C;<code>RoleStateCaretaker</code>  &#x53CA;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x770B;&#x5230;&#x7684;&#x4EC5;&#x4EC5;&#x662F;&#x6807;&#x8BC6;&#x63A5;&#x53E3; <code>Memento</code> &#x6240;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4ECE;&#x800C;&#x7EF4;&#x62A4;&#x4E86;&#x5C01;&#x88C5;&#x578B;&#x3002;&#x7C7B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<img src="D:\sjtu\AIR\SYY\JOB\Note\doc\DesignPatterns\img\&#x9ED1;&#x7BB1;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;.png" style="zoom:70%;">
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x7A84;&#x63A5;&#x53E3;<code>Memento</code>&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x8BC6;&#x63A5;&#x53E3;&#xFF0C;&#x56E0;&#x6B64;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x51FA;&#x4EFB;&#x4F55;&#x7684;&#x65B9;&#x6CD5;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</pre><p>&#x5B9A;&#x4E49;&#x53D1;&#x8D77;&#x4EBA;&#x7C7B; <code>GameRole</code>&#xFF0C;&#x5E76;&#x5728;&#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x5907;&#x5FD8;&#x5F55;&#x5185;&#x90E8;&#x7C7B; <code>RoleStateMemento</code>&#xFF08;&#x8BE5;&#x5185;&#x90E8;&#x7C7B;&#x8BBE;&#x7F6E;&#x4E3A;&#x79C1;&#x6709;&#x7684;&#xFF09;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token operator">/</span>&#x6E38;&#x620F;&#x89D2;&#x8272;&#x7C7B;
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//&#x751F;&#x547D;&#x529B;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//&#x653B;&#x51FB;&#x529B;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//&#x9632;&#x5FA1;&#x529B;</span>

    <span class="token comment">//&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x6218;&#x6597;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x4FDD;&#x5B58;&#x89D2;&#x8272;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//&#x56DE;&#x590D;&#x89D2;&#x8272;&#x72B6;&#x6001;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x751F;&#x547D;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x653B;&#x51FB;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#x89D2;&#x8272;&#x9632;&#x5FA1;&#x529B;&#xFF1A;&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8D1F;&#x8D23;&#x4EBA;&#x89D2;&#x8272;&#x7C7B; <code>RoleStateCaretaker</code> &#x80FD;&#x591F;&#x5F97;&#x5230;&#x7684;&#x5907;&#x5FD8;&#x5F55;&#x5BF9;&#x8C61;&#x662F;&#x4EE5; <code>Memento</code> &#x4E3A;&#x63A5;&#x53E3;&#x7684;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x8BC6;&#x63A5;&#x53E3;&#xFF0C;&#x56E0;&#x6B64;&#x8D1F;&#x8D23;&#x4EBA;&#x89D2;&#x8272;&#x4E0D;&#x53EF;&#x80FD;&#x6539;&#x53D8;&#x8FD9;&#x4E2A;&#x5907;&#x5FD8;&#x5F55;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5BB9;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">//&#x89D2;&#x8272;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x8005;&#x7C7B;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x6D4B;&#x8BD5;&#x7C7B;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x5927;&#x6218;Boss&#x524D;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5927;&#x6218;Boss&#x524D;</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//&#x4FDD;&#x5B58;&#x8FDB;&#x5EA6;</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x5927;&#x6218;Boss&#x540E;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x5927;&#x6218;Boss&#x65F6;&#xFF0C;&#x635F;&#x8017;&#x4E25;&#x91CD;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&#x6062;&#x590D;&#x4E4B;&#x524D;&#x72B6;&#x6001;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x6062;&#x590D;&#x4E4B;&#x524D;&#x72B6;&#x6001;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><h3>6.10.4 &#x4F18;&#x7F3A;&#x70B9;</h3>
<p><strong>1&#xFF0C;&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x72B6;&#x6001;&#x7684;&#x673A;&#x5236;&#x3002;&#x5F53;&#x7528;&#x6237;&#x9700;&#x8981;&#x65F6;&#x80FD;&#x591F;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#x5730;&#x5C06;&#x6570;&#x636E;&#x6062;&#x590D;&#x5230;&#x67D0;&#x4E2A;&#x5386;&#x53F2;&#x7684;&#x72B6;&#x6001;&#x3002;</li>
<li>&#x5B9E;&#x73B0;&#x4E86;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x7684;&#x5C01;&#x88C5;&#x3002;&#x9664;&#x4E86;&#x521B;&#x5EFA;&#x5B83;&#x7684;&#x53D1;&#x8D77;&#x4EBA;&#x4E4B;&#x5916;&#xFF0C;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x90FD;&#x4E0D;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3002;</li>
<li>&#x7B80;&#x5316;&#x4E86;&#x53D1;&#x8D77;&#x4EBA;&#x7C7B;&#x3002;&#x53D1;&#x8D77;&#x4EBA;&#x4E0D;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x548C;&#x4FDD;&#x5B58;&#x5176;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x7684;&#x5404;&#x4E2A;&#x5907;&#x4EFD;&#xFF0C;&#x6240;&#x6709;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x90FD;&#x4FDD;&#x5B58;&#x5728;&#x5907;&#x5FD8;&#x5F55;&#x4E2D;&#xFF0C;&#x5E76;&#x7531;&#x7BA1;&#x7406;&#x8005;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF0C;&#x8FD9;&#x7B26;&#x5408;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#x3002;</li>
</ul>
<p><strong>2&#xFF0C;&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ul>
<li>&#x8D44;&#x6E90;&#x6D88;&#x8017;&#x5927;&#x3002;&#x5982;&#x679C;&#x8981;&#x4FDD;&#x5B58;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x8FC7;&#x591A;&#x6216;&#x8005;&#x7279;&#x522B;&#x9891;&#x7E41;&#xFF0C;&#x5C06;&#x4F1A;&#x5360;&#x7528;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x3002;</li>
</ul>
<h3>6.10.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<ul>
<li>
<p>&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x73A9;&#x6E38;&#x620F;&#x65F6;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x7684;&#x5B58;&#x6863;&#x529F;&#x80FD;&#x3002;</p>
</li>
<li>
<p>&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x53EF;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5982; Word&#x3001;&#x8BB0;&#x4E8B;&#x672C;&#x3001;Photoshop&#xFF0C;idea&#x7B49;&#x8F6F;&#x4EF6;&#x5728;&#x7F16;&#x8F91;&#x65F6;&#x6309; Ctrl+Z &#x7EC4;&#x5408;&#x952E;&#xFF0C;&#x8FD8;&#x6709;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x3002;</p>
</li>
</ul>
</li>
</ul>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a href="#1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%A6%82%E8%BF%B0">1&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x6982;&#x8FF0;</a>
<ul>
<li><a href="#11-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF">1.1 &#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x4EA7;&#x751F;&#x80CC;&#x666F;</a></li>
<li><a href="#12-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%A6%82%E5%BF%B5">1.2 &#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x6982;&#x5FF5;</a></li>
<li><a href="#13-%E5%AD%A6%E4%B9%A0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7">1.3 &#x5B66;&#x4E60;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x5FC5;&#x8981;&#x6027;</a></li>
<li><a href="#14-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB">1.4 &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5206;&#x7C7B;</a></li>
</ul>
</li>
<li><a href="#2uml%E5%9B%BE">2&#xFF0C;UML&#x56FE;</a>
<ul>
<li><a href="#21-%E7%B1%BB%E5%9B%BE%E6%A6%82%E8%BF%B0">2.1 &#x7C7B;&#x56FE;&#x6982;&#x8FF0;</a></li>
<li><a href="#22-%E7%B1%BB%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8">2.2 &#x7C7B;&#x56FE;&#x7684;&#x4F5C;&#x7528;</a></li>
<li><a href="#23-%E7%B1%BB%E5%9B%BE%E8%A1%A8%E7%A4%BA%E6%B3%95">2.3 &#x7C7B;&#x56FE;&#x8868;&#x793A;&#x6CD5;</a>
<ul>
<li><a href="#231-%E7%B1%BB%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F">2.3.1 &#x7C7B;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;</a></li>
<li><a href="#232-%E7%B1%BB%E4%B8%8E%E7%B1%BB%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F">2.3.2 &#x7C7B;&#x4E0E;&#x7C7B;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;</a>
<ul>
<li><a href="#2321-%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB">2.3.2.1 &#x5173;&#x8054;&#x5173;&#x7CFB;</a></li>
<li><a href="#2322-%E8%81%9A%E5%90%88%E5%85%B3%E7%B3%BB">2.3.2.2 &#x805A;&#x5408;&#x5173;&#x7CFB;</a></li>
<li><a href="#2323-%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB">2.3.2.3 &#x7EC4;&#x5408;&#x5173;&#x7CFB;</a></li>
<li><a href="#2324-%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB">2.3.2.4 &#x4F9D;&#x8D56;&#x5173;&#x7CFB;</a></li>
<li><a href="#2325-%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB">2.3.2.5 &#x7EE7;&#x627F;&#x5173;&#x7CFB;</a></li>
<li><a href="#2326-%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB">2.3.2.6 &#x5B9E;&#x73B0;&#x5173;&#x7CFB;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#3%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99">3&#xFF0C;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x539F;&#x5219;</a>
<ul>
<li><a href="#31-%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99">3.1 &#x5F00;&#x95ED;&#x539F;&#x5219;</a></li>
<li><a href="#32-%E9%87%8C%E6%B0%8F%E4%BB%A3%E6%8D%A2%E5%8E%9F%E5%88%99">3.2 &#x91CC;&#x6C0F;&#x4EE3;&#x6362;&#x539F;&#x5219;</a></li>
<li><a href="#33-%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99">3.3 &#x4F9D;&#x8D56;&#x5012;&#x8F6C;&#x539F;&#x5219;</a></li>
<li><a href="#34-%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99">3.4 &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</a></li>
<li><a href="#35-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99">3.5 &#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;</a></li>
<li><a href="#36-%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99">3.6 &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;</a></li>
</ul>
</li>
<li><a href="#4%E5%88%9B%E5%BB%BA%E8%80%85%E6%A8%A1%E5%BC%8F">4&#xFF0C;&#x521B;&#x5EFA;&#x8005;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#41-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">4.1 &#x5355;&#x4F8B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#411-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84">4.1.1 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x6784;</a></li>
<li><a href="#412-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0">4.1.2 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li><a href="#413-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">4.1.3 &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</a>
<ul>
<li><a href="#4131-%E9%97%AE%E9%A2%98%E6%BC%94%E7%A4%BA">4.1.3.1 &#x95EE;&#x9898;&#x6F14;&#x793A;</a></li>
<li><a href="#4132-%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3">4.1.3.2 &#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;</a></li>
</ul>
</li>
<li><a href="#414-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-runtime%E7%B1%BB">4.1.4 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;-Runtime&#x7C7B;</a></li>
</ul>
</li>
<li><a href="#42-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2 &#x5DE5;&#x5382;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#421-%E6%A6%82%E8%BF%B0">4.2.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#422-%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2.2 &#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#4221-%E7%BB%93%E6%9E%84">4.2.2.1 &#x7ED3;&#x6784;</a></li>
<li><a href="#4222-%E5%AE%9E%E7%8E%B0">4.2.2.2 &#x5B9E;&#x73B0;</a></li>
<li><a href="#4224-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.2.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#4223-%E6%89%A9%E5%B1%95">4.2.2.3 &#x6269;&#x5C55;</a></li>
</ul>
</li>
<li><a href="#423-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">4.2.3 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#4231-%E6%A6%82%E5%BF%B5">4.2.3.1 &#x6982;&#x5FF5;</a></li>
<li><a href="#4232-%E7%BB%93%E6%9E%84">4.2.3.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#4233-%E5%AE%9E%E7%8E%B0">4.2.3.3 &#x5B9E;&#x73B0;</a></li>
<li><a href="#4234-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.3.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
</ul>
</li>
<li><a href="#424-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">4.2.4 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#4241-%E6%A6%82%E5%BF%B5">4.2.4.1 &#x6982;&#x5FF5;</a></li>
<li><a href="#4242-%E7%BB%93%E6%9E%84">4.2.4.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#4242-%E5%AE%9E%E7%8E%B0">4.2.4.2 &#x5B9E;&#x73B0;</a></li>
<li><a href="#4243-%E4%BC%98%E7%BC%BA%E7%82%B9">4.2.4.3 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#4244-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.2.4.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
</ul>
</li>
<li><a href="#425-%E6%A8%A1%E5%BC%8F%E6%89%A9%E5%B1%95">4.2.5 &#x6A21;&#x5F0F;&#x6269;&#x5C55;</a></li>
<li><a href="#426-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-collectioniterator%E6%96%B9%E6%B3%95">4.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;-Collection.iterator&#x65B9;&#x6CD5;</a></li>
</ul>
</li>
<li><a href="#43-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F">4.3 &#x539F;&#x578B;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#431-%E6%A6%82%E8%BF%B0">4.3.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#432-%E7%BB%93%E6%9E%84">4.3.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#433-%E5%AE%9E%E7%8E%B0">4.3.3 &#x5B9E;&#x73B0;</a></li>
<li><a href="#434-%E6%A1%88%E4%BE%8B">4.3.4 &#x6848;&#x4F8B;</a></li>
<li><a href="#435-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.3.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#436-%E6%89%A9%E5%B1%95%E6%B7%B1%E5%85%8B%E9%9A%86">4.3.6 &#x6269;&#x5C55;&#xFF08;&#x6DF1;&#x514B;&#x9686;&#xFF09;</a></li>
</ul>
</li>
<li><a href="#45-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.5 &#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#441-%E6%A6%82%E8%BF%B0">4.4.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#442-%E7%BB%93%E6%9E%84">4.4.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#443-%E5%AE%9E%E4%BE%8B">4.4.3 &#x5B9E;&#x4F8B;</a></li>
<li><a href="#444-%E4%BC%98%E7%BC%BA%E7%82%B9">4.4.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#445-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">4.4.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#446-%E6%A8%A1%E5%BC%8F%E6%89%A9%E5%B1%95">4.4.6 &#x6A21;&#x5F0F;&#x6269;&#x5C55;</a></li>
</ul>
</li>
<li><a href="#46-%E5%88%9B%E5%BB%BA%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94">4.6 &#x521B;&#x5EFA;&#x8005;&#x6A21;&#x5F0F;&#x5BF9;&#x6BD4;</a>
<ul>
<li><a href="#461-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8Fvs%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.6.1 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;VS&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a></li>
<li><a href="#462-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8Fvs%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">4.6.2 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;VS&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F">5&#xFF0C;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#51-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F">5.1 &#x4EE3;&#x7406;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#511-%E6%A6%82%E8%BF%B0">5.1.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#512-%E7%BB%93%E6%9E%84">5.1.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#513-%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86">5.1.3 &#x9759;&#x6001;&#x4EE3;&#x7406;</a></li>
<li><a href="#514-jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">5.1.4 JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;</a></li>
<li><a href="#515-cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">5.1.5 CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406;</a></li>
<li><a href="#516-%E4%B8%89%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AF%B9%E6%AF%94">5.1.6 &#x4E09;&#x79CD;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x6BD4;</a></li>
<li><a href="#517-%E4%BC%98%E7%BC%BA%E7%82%B9">5.1.7 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#518-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.1.8 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
</ul>
</li>
<li><a href="#52-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2 &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#521-%E6%A6%82%E8%BF%B0">5.2.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#522-%E7%BB%93%E6%9E%84">5.2.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#523-%E7%B1%BB%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2.3 &#x7C7B;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</a></li>
<li><a href="#524-%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">5.2.4 &#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</a></li>
<li><a href="#525-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5.2.5 &#x5E94;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#526-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
<li><a href="#53-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F">5.3 &#x88C5;&#x9970;&#x8005;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#531-%E6%A6%82%E8%BF%B0">5.3.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#532-%E7%BB%93%E6%9E%84">5.3.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#533-%E6%A1%88%E4%BE%8B">5.3.3 &#x6848;&#x4F8B;</a></li>
<li><a href="#534-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.3.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#535-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.3.5 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
<li><a href="#536-%E4%BB%A3%E7%90%86%E5%92%8C%E8%A3%85%E9%A5%B0%E8%80%85%E7%9A%84%E5%8C%BA%E5%88%AB">5.3.6 &#x4EE3;&#x7406;&#x548C;&#x88C5;&#x9970;&#x8005;&#x7684;&#x533A;&#x522B;</a></li>
</ul>
</li>
<li><a href="#54-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F">5.4 &#x6865;&#x63A5;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#541-%E6%A6%82%E8%BF%B0">5.4.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#542-%E7%BB%93%E6%9E%84">5.4.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#543-%E6%A1%88%E4%BE%8B">5.4.3 &#x6848;&#x4F8B;</a></li>
<li><a href="#544-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.4.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
</ul>
</li>
<li><a href="#55-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F">5.5 &#x5916;&#x89C2;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#551-%E6%A6%82%E8%BF%B0">5.5.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#552-%E7%BB%93%E6%9E%84">5.5.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#553-%E6%A1%88%E4%BE%8B">5.5.3 &#x6848;&#x4F8B;</a></li>
<li><a href="#554-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.5.4 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#555-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.5.5 &#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
<li><a href="#56-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F">5.6 &#x7EC4;&#x5408;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#561-%E6%A6%82%E8%BF%B0">5.6.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#562-%E7%BB%93%E6%9E%84">5.6.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#563-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">5.6.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#564-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%88%86%E7%B1%BB">5.6.4 &#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x7684;&#x5206;&#x7C7B;</a></li>
<li><a href="#565-%E4%BC%98%E7%82%B9">5.6.5 &#x4F18;&#x70B9;</a></li>
<li><a href="#566-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.6.6 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
</ul>
</li>
<li><a href="#57-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F">5.7 &#x4EAB;&#x5143;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#571-%E6%A6%82%E8%BF%B0">5.7.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#572-%E7%BB%93%E6%9E%84">5.7.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#573-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">5.7.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#575-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.7.5 &#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#576-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">5.7.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F">6&#xFF0C;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#61-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">6.1 &#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#611-%E6%A6%82%E8%BF%B0">6.1.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#612-%E7%BB%93%E6%9E%84">6.1.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#613-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.1.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#613-%E4%BC%98%E7%BC%BA%E7%82%B9">6.1.3 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#614-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">6.1.4 &#x9002;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#615-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.1.5 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
<li><a href="#62-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F">6.2 &#x7B56;&#x7565;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#621-%E6%A6%82%E8%BF%B0">6.2.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#622-%E7%BB%93%E6%9E%84">6.2.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#623-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.2.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#624-%E4%BC%98%E7%BC%BA%E7%82%B9">6.2.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#625-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">6.2.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#626-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.2.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
<li><a href="#63-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F">6.3 &#x547D;&#x4EE4;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#631-%E6%A6%82%E8%BF%B0">6.3.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#632-%E7%BB%93%E6%9E%84">6.3.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#633-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.3.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#634-%E4%BC%98%E7%BC%BA%E7%82%B9">6.3.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#635-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">6.3.5 &#x4F7F;&#x7528;&#x573A;&#x666F;</a></li>
<li><a href="#636-jdk%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.3.6 JDK&#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
<li><a href="#64-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F">6.4 &#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;</a>
<ul>
<li><a href="#641-%E6%A6%82%E8%BF%B0">6.4.1 &#x6982;&#x8FF0;</a></li>
<li><a href="#642-%E7%BB%93%E6%9E%84">6.4.2 &#x7ED3;&#x6784;</a></li>
<li><a href="#643-%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0">6.4.3 &#x6848;&#x4F8B;&#x5B9E;&#x73B0;</a></li>
<li><a href="#644-%E4%BC%98%E7%BC%BA%E7%82%B9">6.4.4 &#x4F18;&#x7F3A;&#x70B9;</a></li>
<li><a href="#645-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">6.4.5 &#x6E90;&#x7801;&#x89E3;&#x6790;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">&#x2261;</a>
    
    
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    </body></html>